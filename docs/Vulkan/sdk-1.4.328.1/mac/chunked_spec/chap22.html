<!DOCTYPE html><html lang="en"><head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<meta name="author" content="The Khronos® Vulkan  Working Group">
<title>Vulkan® 1.4.328 - A Specification (with all registered extensions)</title>
<link rel="stylesheet" href="style0.css" type="text/css">
<link rel="stylesheet" href="style1.css" type="text/css">
<link rel="stylesheet" href="style2.css" type="text/css">

<!-- dragged in by font-awesome css included by asciidoctor, but preloaded in this extension for convenience -->
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2?v=4.7.0" as="font" type="font/woff2" crossorigin="">

<!-- Note: Chrome needs crossorigin="" even for same-origin fonts -->
<link rel="preload" href="../katex/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Typewriter-Regular.woff2" as="font" type="font/woff2" crossorigin=""><link rel="stylesheet" href="../katex/katex.min.css">
<!--ChunkedSearchJSMarker-->
<link href="chunked.css?4" rel="stylesheet">
<script>var searchindexurl = 'search.index.js?4' + (document.title.replace(/[^0-9.]/g, ''));</script>
<script src="chunked.js?4"></script>
<link rel="stylesheet" href="style3.css" type="text/css">
<script>
    function hideElement(e){
        e.setAttribute("hidden", "");
        e.classList.add("hidden");
    }

    function unhideElement(e){
        e.classList.remove("hidden");
        e.removeAttribute("hidden");
    }

    function hideLoadableContent(){
        unhideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) hideElement(loadable);
    }

    function unhideLoadableContent(){
        hideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) unhideElement(loadable);
    }

    window.addEventListener("load", unhideLoadableContent);
</script>
<link rel="stylesheet" href="asciidoctor-chunker.css" type="text/css"></head>
<body class="book toc2 toc-left">
<div style="text-align: center;">
    <span class="image"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+Cjxzdmcgdmlld0JveD0iMCAwIDExNTAgMzI2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHN0eWxlPSJmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MS40MTQyMTsiPgogICAgPGcgaWQ9IkFydGJvYXJkMSIgdHJhbnNmb3JtPSJtYXRyaXgoMC45NTUxNSwwLDAsMC44ODgyODMsLTQwLjExNjMsLTMwLjIwMTYpIj4KICAgICAgICA8cmVjdCB4PSI0MiIgeT0iMzQiIHdpZHRoPSIxMjA0IiBoZWlnaHQ9IjM2NyIgc3R5bGU9ImZpbGw6bm9uZTsiLz4KICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxLjA0Njk2LDAsMCwxLjEyNTc3LC00Ni45OTEzLC01MC40MzI1KSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik03MjQuMSwzODUuMDZMNjgzLjUzLDM4NS4wNkM2ODMuNTMsMzg1LjA2IDY4My41MywyODYuMDkgNjgzLjUzLDI1NS40QzY5Ni40OSwyNjIuNjIgNzEzLjYyLDI3NS45NCA3MjQuMSwyODguNzJMNzI0LjEsMzg1LjA2WiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxnPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTM4MS43NSwzODUuMDZMMzMxLjE3LDM4NS4wNkwyNjUuMTYsMTgxLjAzTDMxMS4xNywxODEuMDNMMzU2LjYxLDMyNC40OEwzNTcuMTgsMzI0LjQ4TDQwMy4xOCwxODEuMDNMNDQ5LjQ3LDE4MS4wM0wzODEuNzUsMzg1LjA2WiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNTg1LjUxLDM4NS4wNkw1NDYuOTMsMzg1LjA2TDU0Ni45MywzNjQuNDlMNTQ2LjA4LDM2NC40OUM1NDAuOTMsMzczLjA3IDUzNC4yNywzNzkuMjYgNTI2LjA3LDM4My4wN0M1MTcuODgsMzg2Ljg4IDUwOS41LDM4OC43OCA1MDAuOTIsMzg4Ljc4QzQ5MC4wNiwzODguNzggNDgxLjE2LDM4Ny4zNSA0NzQuMiwzODQuNUM0NjcuMjUsMzgxLjY1IDQ2MS43NywzNzcuNTkgNDU3Ljc3LDM3Mi4zNkM0NTMuNzYsMzY3LjEyIDQ1MC45NSwzNjAuNzQgNDQ5LjMzLDM1My4yMUM0NDcuNzIsMzQ1LjY5IDQ0Ni45MSwzMzcuMzUgNDQ2LjkxLDMyOC4yMUw0NDYuOTEsMjM3LjMzTDQ4Ny40OSwyMzcuMzNMNDg3LjQ5LDMyMC43N0M0ODcuNDksMzMyLjk2IDQ4OS40LDM0Mi4wNiA0OTMuMjEsMzQ4LjA2QzQ5Ny4wMiwzNTQuMDcgNTAzLjc4LDM1Ny4wNiA1MTMuNSwzNTcuMDZDNTI0LjU1LDM1Ny4wNiA1MzIuNTUsMzUzLjc4IDUzNy41LDM0Ny4yQzU0Mi40NiwzNDAuNjIgNTQ0LjkzLDMyOS44MSA1NDQuOTMsMzE0Ljc2TDU0NC45MywyMzcuMzJMNTg1LjUyLDIzNy4zMkw1ODUuNTIsMzg1LjA2TDU4NS41MSwzODUuMDZaIiBzdHlsZT0iZmlsbDpyZ2IoMTcyLDIyLDQ0KTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8cGF0aCBkPSJNNzMwLjg0LDI5Ni4xOUw3MzAuNzQsMjkwLjQ3TDc4MS44OSwyMzcuMzNMODI5LjkxLDIzNy4zM0w3NzQuMTgsMjkxLjYyTDgzNi4xOSwzODUuMDZMNzg3LjA0LDM4NS4wNkw3MzAuODQsMjk2LjE5WiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik04NDMuNjIsMjgyLjc2Qzg0NC4xOSwyNzMuMjQgODQ2LjU4LDI2NS4zMyA4NTAuNzcsMjU5LjA0Qzg1NC45NiwyNTIuNzUgODYwLjI5LDI0Ny43MSA4NjYuNzcsMjQzLjlDODczLjI1LDI0MC4wOSA4ODAuNTQsMjM3LjM3IDg4OC42NCwyMzUuNzZDODk2LjczLDIzNC4xNCA5MDQuODgsMjMzLjMzIDkxMy4wNywyMzMuMzNDOTIwLjUsMjMzLjMzIDkyOC4wMiwyMzMuODUgOTM1LjY0LDIzNC45Qzk0My4yNywyMzUuOTUgOTUwLjIxLDIzOCA5NTYuNSwyNDEuMDVDOTYyLjc4LDI0NC4xIDk2Ny45MywyNDguMzQgOTcxLjk0LDI1My43NkM5NzUuOTQsMjU5LjE5IDk3Ny45NCwyNjYuMzggOTc3Ljk0LDI3NS4zNEw5NzcuOTQsMzUyLjIxQzk3Ny45NCwzNTguODggOTc4LjMyLDM2NS4yNyA5NzkuMDgsMzcxLjM2Qzk3OS44NCwzNzcuNDYgOTgxLjE4LDM4Mi4wMyA5ODMuMDksMzg1LjA4TDk0MS45NCwzODUuMDhDOTQxLjE4LDM4Mi44IDk0MC41NiwzODAuNDYgOTQwLjA4LDM3OC4wOEM5MzkuNjEsMzc1LjcgOTM5LjI3LDM3My4yOCA5MzkuMDgsMzcwLjc5QzkzMi42LDM3Ny40NyA5MjQuOTcsMzgyLjEzIDkxNi4yMSwzODQuOEM5MDcuNDUsMzg3LjQ2IDg5OC40OSwzODguOCA4ODkuMzUsMzg4LjhDODgyLjMsMzg4LjggODc1LjcyLDM4Ny45NCA4NjkuNjQsMzg2LjIzQzg2My41NCwzODQuNTIgODU4LjIsMzgxLjg1IDg1My42NCwzNzguMjNDODQ5LjA2LDM3NC42MSA4NDUuNDgsMzcwLjA0IDg0Mi45MiwzNjQuNTFDODQwLjM1LDM1OC45OSA4MzkuMDYsMzUyLjQyIDgzOS4wNiwzNDQuOEM4MzkuMDYsMzM2LjQyIDg0MC41NCwzMjkuNTEgODQzLjQ5LDMyNC4wOEM4NDYuNDUsMzE4LjY1IDg1MC4yNSwzMTQuMzIgODU0LjkzLDMxMS4wOEM4NTkuNiwzMDcuODQgODY0LjkzLDMwNS40MSA4NzAuOTMsMzAzLjc5Qzg3Ni45MywzMDIuMTcgODgyLjk4LDMwMC44OCA4ODkuMDcsMjk5LjkzQzg5NS4xNywyOTguOTkgOTAxLjE3LDI5OC4yMiA5MDcuMDgsMjk3LjY1QzkxMi45OSwyOTcuMDggOTE4LjIyLDI5Ni4yMiA5MjIuNzksMjk1LjA4QzkyNy4zNywyOTMuOTMgOTMwLjk4LDI5Mi4yNyA5MzMuNjUsMjkwLjA3QzkzNi4zMiwyODcuODggOTM3LjU2LDI4NC42OSA5MzcuMzcsMjgwLjVDOTM3LjM3LDI3Ni4xMiA5MzYuNjUsMjcyLjY0IDkzNS4yMiwyNzAuMDdDOTMzLjc5LDI2Ny41IDkzMS44OSwyNjUuNSA5MjkuNTEsMjY0LjA3QzkyNy4xMywyNjIuNjQgOTI0LjM3LDI2MS42OSA5MjEuMjIsMjYxLjIxQzkxOC4wNywyNjAuNzMgOTE0LjcsMjYwLjQ5IDkxMS4wOCwyNjAuNDlDOTAzLjA4LDI2MC40OSA4OTYuNzksMjYyLjIgODkyLjIyLDI2NS42NEM4ODcuNjUsMjY5LjA3IDg4NC45OCwyNzQuNzggODg0LjIyLDI4Mi43OUw4NDMuNjIsMjgyLjc5TDg0My42MiwyODIuNzZaTTkzNy4zNSwzMTIuNzdDOTM1LjYzLDMxNC4zIDkzMy40OSwzMTUuNDggOTMwLjkyLDMxNi4zNEM5MjguMzUsMzE3LjIxIDkyNS41OSwzMTcuOTIgOTIyLjYzLDMxOC40OUM5MTkuNjgsMzE5LjA2IDkxNi41OCwzMTkuNTQgOTEzLjM1LDMxOS45MkM5MTAuMTEsMzIwLjMgOTA2Ljg3LDMyMC43NyA5MDMuNjMsMzIxLjM1QzkwMC41OCwzMjEuOTIgODk3LjU4LDMyMi42OSA4OTQuNjMsMzIzLjYzQzg5MS42OCwzMjQuNTkgODg5LjEsMzI1Ljg3IDg4Ni45MSwzMjcuNDlDODg0LjcyLDMyOS4xMSA4ODIuOTYsMzMxLjE2IDg4MS42MiwzMzMuNjNDODgwLjI5LDMzNi4xMSA4NzkuNjIsMzM5LjI1IDg3OS42MiwzNDMuMDZDODc5LjYyLDM0Ni42OCA4ODAuMjksMzQ5LjczIDg4MS42MiwzNTIuMkM4ODIuOTYsMzU0LjY4IDg4NC43NywzNTYuNjMgODg3LjA1LDM1OC4wNkM4ODkuMzQsMzU5LjQ5IDg5MiwzNjAuNDkgODk1LjA1LDM2MS4wNkM4OTguMSwzNjEuNjMgOTAxLjI0LDM2MS45MSA5MDQuNDgsMzYxLjkxQzkxMi40OCwzNjEuOTEgOTE4LjY4LDM2MC41OCA5MjMuMDYsMzU3LjkyQzkyNy40NCwzNTUuMjUgOTMwLjY5LDM1Mi4wNiA5MzIuNzcsMzQ4LjM0QzkzNC44NiwzNDQuNjMgOTM2LjE2LDM0MC44NyA5MzYuNjIsMzM3LjA2QzkzNy4xLDMzMy4yNSA5MzcuMzMsMzMwLjIgOTM3LjM0LDMyNy45Mkw5MzcuMzQsMzEyLjc3TDkzNy4zNSwzMTIuNzdaIiBzdHlsZT0iZmlsbDpyZ2IoMTcyLDIyLDQ0KTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTEwMDQuMjEsMjM3LjMzTDEwNDIuOCwyMzcuMzNMMTA0Mi44LDI1Ny45TDEwNDMuNjUsMjU3LjlDMTA0OC43OSwyNDkuMzMgMTA1NS40NiwyNDMuMDkgMTA2My42NSwyMzkuMTlDMTA3MS44NCwyMzUuMjggMTA4MC4yMywyMzMuMzMgMTA4OC43OSwyMzMuMzNDMTA5OS42NiwyMzMuMzMgMTEwOC41NiwyMzQuODEgMTExNS41MiwyMzcuNzZDMTEyMi40NywyNDAuNzIgMTEyNy45NCwyNDQuODEgMTEzMS45NSwyNTAuMDVDMTEzNS45NSwyNTUuMjkgMTEzOC43NiwyNjEuNjcgMTE0MC4zOCwyNjkuMTlDMTE0MiwyNzYuNzIgMTE0Mi44MSwyODUuMDUgMTE0Mi44MSwyOTQuMkwxMTQyLjgxLDM4NS4wN0wxMTAyLjI0LDM4NS4wN0wxMTAyLjI0LDMwMS42M0MxMTAyLjI0LDI4OS40MyAxMTAwLjMzLDI4MC4zNCAxMDk2LjUzLDI3NC4zNEMxMDkyLjcxLDI2OC4zNCAxMDg1Ljk1LDI2NS4zNCAxMDc2LjIzLDI2NS4zNEMxMDY1LjE4LDI2NS4zNCAxMDU3LjE5LDI2OC42MyAxMDUyLjIzLDI3NS4yQzEwNDcuMjcsMjgxLjc2IDEwNDQuOCwyOTIuNTggMTA0NC44LDMwNy42M0wxMDQ0LjgsMzg1LjA3TDEwMDQuMjIsMzg1LjA3TDEwMDQuMjIsMjM3LjMzTDEwMDQuMjEsMjM3LjMzWiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik02MTIuMzcsMjExLjg0TDYxMi4zNywzODUuMDdMNjUyLjk1LDM4NS4wN0w2NTIuOTUsMjM0LjIxQzYzOS45MywyMjYuMjMgNjI2LjM2LDIxOC43NCA2MTIuMzcsMjExLjg0WiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xOTguNDMsMjE5LjIxQzIyMS45NSwxNTAuMzIgMzYyLjU4LDEyNS4wNSA1MTIuNTgsMTYyLjc4QzYwMi41NSwxODUuNCA2NzYuMDcsMjI5LjI4IDcyNC4wOSwyNzIuNjdDNzAyLjMsMjE1LjEyIDU5Ni42NSwxMzMuMDggNDUxLjE4LDEwNC45NkMyODYuNyw3My4xNiAxMjQuNDcsMTAxLjExIDEwNC4zOSwxNzQuMUM4OS44OSwyMjYuODMgMTUzLjU3LDI4OC42IDI1Mi4wNSwzMzAuODRDMjA3LjgxLDI5NS4wMiAxODYuMjksMjU0Ljc4IDE5OC40MywyMTkuMjFaIiBzdHlsZT0iZmlsbDpyZ2IoMTcyLDIyLDQ0KTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTcyNC4xNiwyNDcuNjJMNzI0LjE2LDE4MS4wM0w2ODMuNTcsMTgxLjAzTDY4My41NywyMDEuMjVDNzAwLjg4LDIxNi43MSA3MTQuNjEsMjMyLjQ1IDcyNC4xNiwyNDcuNjJaIiBzdHlsZT0iZmlsbDpyZ2IoMTcyLDIyLDQ0KTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICA8L2c+CiAgICAgICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMS4wNDY5NiwwLDAsMS4xMjU3NywtNDYuOTkxMywtNTAuNDMyNSkiPgogICAgICAgICAgICA8cGF0aCBkPSJNMTIxNC45OCwzNjMuNDNDMTIxNC45OCwzNzUuNjkgMTIwNS4zNSwzODUuMzIgMTE5Mi44MywzODUuMzJDMTE4MC40MywzODUuMzIgMTE3MC41NCwzNzUuNjkgMTE3MC41NCwzNjMuNDNDMTE3MC41NCwzNTEuNDMgMTE4MC40MywzNDEuOCAxMTkyLjgzLDM0MS44QzEyMDUuMzUsMzQxLjggMTIxNC45OCwzNTEuNDMgMTIxNC45OCwzNjMuNDNaTTExNzYuMDgsMzYzLjQzQzExNzYuMDgsMzczLjA2IDExODMuMiwzODAuNyAxMTkyLjk2LDM4MC43QzEyMDIuNDUsMzgwLjcgMTIwOS40NCwzNzMuMDUgMTIwOS40NCwzNjMuNTZDMTIwOS40NCwzNTMuOTMgMTIwMi40NSwzNDYuMTUgMTE5Mi44MiwzNDYuMTVDMTE4My4yLDM0Ni4xNiAxMTc2LjA4LDM1My45NCAxMTc2LjA4LDM2My40M1pNMTE4OS4zOSwzNzQuNzdMMTE4NC4zOCwzNzQuNzdMMTE4NC4zOCwzNTMuMTRDMTE4Ni4zNiwzNTIuNzQgMTE4OS4xMywzNTIuNDggMTE5Mi42OSwzNTIuNDhDMTE5Ni43OCwzNTIuNDggMTE5OC42MiwzNTMuMTQgMTIwMC4yMSwzNTQuMDZDMTIwMS40LDM1NC45OCAxMjAyLjMyLDM1Ni43IDEyMDIuMzIsMzU4LjgxQzEyMDIuMzIsMzYxLjE4IDEyMDAuNDcsMzYzLjAzIDExOTcuODQsMzYzLjgyTDExOTcuODQsMzY0LjA4QzExOTkuOTUsMzY0Ljg3IDEyMDEuMTQsMzY2LjQ1IDEyMDEuOCwzNjkuMzVDMTIwMi40NiwzNzIuNjUgMTIwMi44NSwzNzMuOTcgMTIwMy4zOCwzNzQuNzZMMTE5Ny45NywzNzQuNzZDMTE5Ny4zMSwzNzMuOTcgMTE5Ni45MiwzNzEuOTkgMTE5Ni4yNiwzNjkuNDlDMTE5NS44NiwzNjcuMTIgMTE5NC41NSwzNjYuMDYgMTE5MS43OCwzNjYuMDZMMTE4OS40MSwzNjYuMDZMMTE4OS40MSwzNzQuNzdMMTE4OS4zOSwzNzQuNzdaTTExODkuNTMsMzYyLjUxTDExOTEuOSwzNjIuNTFDMTE5NC42NywzNjIuNTEgMTE5Ni45MSwzNjEuNTkgMTE5Ni45MSwzNTkuMzRDMTE5Ni45MSwzNTcuMzYgMTE5NS40NiwzNTYuMDQgMTE5Mi4yOSwzNTYuMDRDMTE5MC45NywzNTYuMDQgMTE5MC4wNSwzNTYuMTcgMTE4OS41MiwzNTYuM0wxMTg5LjUyLDM2Mi41MUwxMTg5LjUzLDM2Mi41MVoiIHN0eWxlPSJmaWxsOnJnYigxNzIsMjIsNDQpO2ZpbGwtcnVsZTpub256ZXJvOyIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+Cg==" alt="Vulkan Logo" width="50%">
    </span>
</div>
<div id="header">
<h1>Vulkan<sup>®</sup> 1.4.328 - A Specification (with all registered extensions)</h1>
<div class="details">
<span id="author" class="author">The Khronos<sup>®</sup> Vulkan  Working Group</span><br>
<span id="revnumber">version 1.4.328,</span>
<span id="revdate">2025-10-08 21:55:58Z</span>
<br><span id="revremark">from git branch: Git branch not available commit: Git commit not available</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="index.html">Titlepage</a></li><li><a href="chap1.html">1. Preamble</a></li>
<li><a href="chap2.html">2. Introduction</a>
<ul class="sectlevel2">
<li><a href="chap2.html#introduction-conventions">2.1. Document Conventions</a></li>
</ul>
</li>
<li><a href="chap3.html">3. Fundamentals</a>
<ul class="sectlevel2">
<li><a href="chap3.html#fundamentals-host-environment">3.1. Host and Device Environment</a></li>
<li><a href="chap3.html#fundamentals-execmodel">3.2. Execution Model</a></li>
<li><a href="chap3.html#fundamentals-objectmodel-overview">3.3. Object Model</a></li>
<li><a href="chap3.html#fundamentals-abi">3.4. Application Binary Interface</a></li>
<li><a href="chap3.html#fundamentals-commandsyntax">3.5. Command Syntax and Duration</a></li>
<li><a href="chap3.html#fundamentals-threadingbehavior">3.6. Threading Behavior</a></li>
<li><a href="chap3.html#fundamentals-validusage">3.7. Valid Usage</a></li>
<li><a href="chap3.html#fundamentals-returncodes">3.8. <code>VkResult</code> Return Codes</a></li>
<li><a href="chap3.html#fundamentals-numerics">3.9. Numeric Representation and Computation</a></li>
<li><a href="chap3.html#fundamentals-fixedconv">3.10. Fixed-Point Data Conversions</a></li>
<li><a href="chap3.html#fundamentals-strings">3.11. String Representation</a></li>
<li><a href="chap3.html#fundamentals-common-objects">3.12. Common Object Types</a></li>
<li><a href="chap3.html#fundamentals-api-name-aliases">3.13. API Name Aliases</a></li>
</ul>
</li>
<li><a href="chap4.html">4. Initialization</a>
<ul class="sectlevel2">
<li><a href="chap4.html#initialization-functionpointers">4.1. Command Function Pointers</a></li>
<li><a href="chap4.html#initialization-instances">4.2. Instances</a></li>
</ul>
</li>
<li><a href="chap5.html">5. Devices and Queues</a>
<ul class="sectlevel2">
<li><a href="chap5.html#devsandqueues-physical-device-enumeration">5.1. Physical Devices</a></li>
<li><a href="chap5.html#devsandqueues-devices">5.2. Devices</a></li>
<li><a href="chap5.html#devsandqueues-queues">5.3. Queues</a></li>
</ul>
</li>
<li><a href="chap6.html">6. Command Buffers</a>
<ul class="sectlevel2">
<li><a href="chap6.html#commandbuffers-lifecycle">6.1. Command Buffer Lifecycle</a></li>
<li><a href="chap6.html#commandbuffers-pools">6.2. Command Pools</a></li>
<li><a href="chap6.html#commandbuffer-allocation">6.3. Command Buffer Allocation and Management</a></li>
<li><a href="chap6.html#commandbuffers-recording">6.4. Command Buffer Recording</a></li>
<li><a href="chap6.html#commandbuffers-submission">6.5. Command Buffer Submission</a></li>
<li><a href="chap6.html#commandbuffers-submission-progress">6.6. Queue Forward Progress</a></li>
<li><a href="chap6.html#commandbuffers-secondary">6.7. Secondary Command Buffer Execution</a></li>
<li><a href="chap6.html#commandbuffers-nested">6.8. Nested Command Buffers</a></li>
<li><a href="chap6.html#commandbuffers-devicemask">6.9. Command Buffer Device Mask</a></li>
</ul>
</li>
<li><a href="chap7.html">7. Synchronization and Cache Control</a>
<ul class="sectlevel2">
<li><a href="chap7.html#synchronization-dependencies">7.1. Execution and Memory Dependencies</a></li>
<li><a href="chap7.html#synchronization-implicit">7.2. Implicit Synchronization Guarantees</a></li>
<li><a href="chap7.html#synchronization-fences">7.3. Fences</a></li>
<li><a href="chap7.html#synchronization-semaphores">7.4. Semaphores</a></li>
<li><a href="chap7.html#synchronization-events">7.5. Events</a></li>
<li><a href="chap7.html#synchronization-pipeline-barriers">7.6. Pipeline Barriers</a></li>
<li><a href="chap7.html#synchronization-memory-barriers">7.7. Memory Barriers</a></li>
<li><a href="chap7.html#synchronization-wait-idle">7.8. Wait Idle Operations</a></li>
<li><a href="chap7.html#synchronization-submission-host-writes">7.9. Host Write Ordering Guarantees</a></li>
<li><a href="chap7.html#synchronization-device-group">7.10. Synchronization and Multiple Physical Devices</a></li>
<li><a href="chap7.html#calibrated-timestamps">7.11. Calibrated Timestamps</a></li>
</ul>
</li>
<li><a href="chap8.html">8. Render Pass</a>
<ul class="sectlevel2">
<li><a href="chap8.html#renderpass-objects">8.1. Render Pass Objects</a></li>
<li><a href="chap8.html#renderpass-creation">8.2. Render Pass Creation</a></li>
<li><a href="chap8.html#renderpass-compatibility">8.3. Render Pass Compatibility</a></li>
<li><a href="chap8.html#_framebuffers">8.4. Framebuffers</a></li>
<li><a href="chap8.html#renderpass-load-operations">8.5. Render Pass Load Operations</a></li>
<li><a href="chap8.html#renderpass-store-operations">8.6. Render Pass Store Operations</a></li>
<li><a href="chap8.html#renderpass-resolve-operations">8.7. Render Pass Multisample Resolve Operations</a></li>
<li><a href="chap8.html#renderpass-commands">8.8. Render Pass Commands</a></li>
<li><a href="chap8.html#renderpass-creation-feedback">8.9. Render Pass Creation Feedback</a></li>
<li><a href="chap8.html#common-render-pass-data-races">8.10. Common Render Pass Data Races (Informative)</a></li>
<li><a href="chap8.html#renderpass-tile-shading">8.11. Tile Shading Render Pass</a></li>
</ul>
</li>
<li><a href="chap9.html">9. Shaders</a>
<ul class="sectlevel2">
<li><a href="chap9.html#shaders-objects">9.1. Shader Objects</a></li>
<li><a href="chap9.html#shader-modules">9.2. Shader Modules</a></li>
<li><a href="chap9.html#shaders-identifiers">9.3. Shader Module Identifiers</a></li>
<li><a href="chap9.html#shaders-binding">9.4. Binding Shaders</a></li>
<li><a href="chap9.html#shaders-execution">9.5. Shader Execution</a></li>
<li><a href="chap9.html#shaders-execution-memory-access-bounds">9.6. Shader Out-of-Bounds Memory Access</a></li>
<li><a href="chap9.html#shaders-execution-memory-ordering">9.7. Shader Memory Access Ordering</a></li>
<li><a href="chap9.html#shaders-inputs">9.8. Shader Inputs and Outputs</a></li>
<li><a href="chap9.html#shaders-task">9.9. Task Shaders</a></li>
<li><a href="chap9.html#shaders-mesh">9.10. Mesh Shaders</a></li>
<li><a href="chap9.html#shaders-cluster-culling">9.11. Cluster Culling Shaders</a></li>
<li><a href="chap9.html#shaders-vertex">9.12. Vertex Shaders</a></li>
<li><a href="chap9.html#shaders-tessellation-control">9.13. Tessellation Control Shaders</a></li>
<li><a href="chap9.html#shaders-tessellation-evaluation">9.14. Tessellation Evaluation Shaders</a></li>
<li><a href="chap9.html#shaders-geometry">9.15. Geometry Shaders</a></li>
<li><a href="chap9.html#shaders-fragment">9.16. Fragment Shaders</a></li>
<li><a href="chap9.html#shaders-compute">9.17. Compute Shaders</a></li>
<li><a href="chap9.html#shaders-ray-generation">9.18. Ray Generation Shaders</a></li>
<li><a href="chap9.html#shaders-intersection">9.19. Intersection Shaders</a></li>
<li><a href="chap9.html#shaders-any-hit">9.20. Any-Hit Shaders</a></li>
<li><a href="chap9.html#shaders-closest-hit">9.21. Closest Hit Shaders</a></li>
<li><a href="chap9.html#shaders-miss">9.22. Miss Shaders</a></li>
<li><a href="chap9.html#shaders-callable">9.23. Callable Shaders</a></li>
<li><a href="chap9.html#shaders-interpolation-decorations">9.24. Interpolation Decorations</a></li>
<li><a href="chap9.html#shaders-staticuse">9.25. Static Use</a></li>
<li><a href="chap9.html#shaders-scope">9.26. Scope</a></li>
<li><a href="chap9.html#shaders-group-operations">9.27. Group Operations</a></li>
<li><a href="chap9.html#shaders-quad-operations">9.28. Quad Group Operations</a></li>
<li><a href="chap9.html#shaders-derivative-operations">9.29. Derivative Operations</a></li>
<li><a href="chap9.html#shaders-helper-invocations">9.30. Helper Invocations</a></li>
<li><a href="chap9.html#cooperative-matrices">9.31. Cooperative Matrices</a></li>
<li><a href="chap9.html#_cooperative_vectors">9.32. Cooperative Vectors</a></li>
<li><a href="chap9.html#shaders-validation-cache">9.33. Validation Cache</a></li>
<li><a href="chap9.html#cuda-modules">9.34. CUDA Modules</a></li>
</ul>
</li>
<li><a href="chap10.html">10. Pipelines</a>
<ul class="sectlevel2">
<li><a href="chap10.html#pipelines-multiple">10.1. Multiple Pipeline Creation</a></li>
<li><a href="chap10.html#pipelines-creation-flags">10.2. Pipeline Creation Flags</a></li>
<li><a href="chap10.html#pipelines-compute">10.3. Compute Pipelines</a></li>
<li><a href="chap10.html#pipelines-graphics">10.4. Graphics Pipelines</a></li>
<li><a href="chap10.html#pipelines-ray-tracing">10.5. Ray Tracing Pipelines</a></li>
<li><a href="chap10.html#pipelines-destruction">10.6. Pipeline Destruction</a></li>
<li><a href="chap10.html#pipelines-pipeline-derivatives">10.7. Pipeline Derivatives</a></li>
<li><a href="chap10.html#pipelines-cache">10.8. Pipeline Cache</a></li>
<li><a href="chap10.html#pipelines-binaries">10.9. Pipeline Binaries</a></li>
<li><a href="chap10.html#pipelines-specialization-constants">10.10. Specialization Constants</a></li>
<li><a href="chap10.html#pipelines-library">10.11. Pipeline Libraries</a></li>
<li><a href="chap10.html#pipelines-binding">10.12. Pipeline Binding</a></li>
<li><a href="chap10.html#pipelines-dynamic-state">10.13. Dynamic State</a></li>
<li><a href="chap10.html#pipelines-shader-information">10.14. Pipeline Properties and Shader Information</a></li>
<li><a href="chap10.html#pipelines-compiler-control">10.15. Pipeline Compiler Control</a></li>
<li><a href="chap10.html#pipelines-creation-feedback">10.16. Pipeline Creation Feedback</a></li>
</ul>
</li>
<li><a href="chap11.html">11. Memory Allocation</a>
<ul class="sectlevel2">
<li><a href="chap11.html#memory-host">11.1. Host Memory</a></li>
<li><a href="chap11.html#memory-device">11.2. Device Memory</a></li>
</ul>
</li>
<li><a href="chap12.html">12. Resource Creation</a>
<ul class="sectlevel2">
<li><a href="chap12.html#resources-buffers">12.1. Buffers</a></li>
<li><a href="chap12.html#resources-buffer-views">12.2. Buffer Views</a></li>
<li><a href="chap12.html#resources-buffer-device-addresses">12.3. Buffer Device Addresses</a></li>
<li><a href="chap12.html#resources-images">12.4. Images</a></li>
<li><a href="chap12.html#resources-image-layouts">12.5. Image Layouts</a></li>
<li><a href="chap12.html#resources-image-views">12.6. Image Views</a></li>
<li><a href="chap12.html#resources-acceleration-structures">12.7. Acceleration Structures</a></li>
<li><a href="chap12.html#resources-micromaps">12.8. Micromaps</a></li>
<li><a href="chap12.html#resources-association">12.9. Resource Memory Association</a></li>
<li><a href="chap12.html#resources-sharing">12.10. Resource Sharing Mode</a></li>
<li><a href="chap12.html#resources-memory-aliasing">12.11. Memory Aliasing</a></li>
<li><a href="chap12.html#resources-buffer-collection-fuchsia">12.12. Buffer Collections</a></li>
<li><a href="chap12.html#resources-tensors">12.13. Tensors</a></li>
<li><a href="chap12.html#resources-tensor-views">12.14. Tensor Views</a></li>
</ul>
</li>
<li><a href="chap13.html">13. Images</a>
<ul class="sectlevel2">
<li><a href="chap13.html#images-coordinate-validation">13.1. Image Coordinate Validation</a></li>
<li><a href="chap13.html#images-reads">13.2. Image Reads</a></li>
<li><a href="chap13.html#images-writes">13.3. Image Writes</a></li>
</ul>
</li>
<li><a href="chap14.html">14. Samplers</a>
<ul class="sectlevel2">
<li><a href="chap14.html#samplers-YCbCr-conversion">14.1. Sampler Y′C<sub>B</sub>C<sub>R</sub> Conversion</a></li>
</ul>
</li>
<li><a href="chap15.html">15. Resource Descriptors</a>
<ul class="sectlevel2">
<li><a href="chap15.html#descriptorsets-types">15.1. Descriptor Types</a></li>
<li><a href="chap15.html#descriptorsets-sets">15.2. Descriptor Sets</a></li>
<li><a href="chap15.html#descriptorsets-physical-storage-buffer">15.3. Physical Storage Buffer Access</a></li>
<li><a href="chap15.html#descriptorbuffers">15.4. Descriptor Buffers</a></li>
</ul>
</li>
<li><a href="chap16.html">16. Shader Interfaces</a>
<ul class="sectlevel2">
<li><a href="chap16.html#interfaces-iointerfaces">16.1. Shader Input and Output Interfaces</a></li>
<li><a href="chap16.html#interfaces-vertexinput">16.2. Vertex Input Interface</a></li>
<li><a href="chap16.html#interfaces-fragmentoutput">16.3. Fragment Output Interface</a></li>
<li><a href="chap16.html#interfaces-legacy-dithering">16.4. Legacy Dithering</a></li>
<li><a href="chap16.html#interfaces-fragmenttileimage">16.5. Fragment Tile Image Interface</a></li>
<li><a href="chap16.html#interfaces-tile-attachment">16.6. Tile Attachment Interface</a></li>
<li><a href="chap16.html#interfaces-inputattachment">16.7. Fragment Input Attachment Interface</a></li>
<li><a href="chap16.html#interfaces-raypipeline">16.8. Ray Tracing Pipeline Interface</a></li>
<li><a href="chap16.html#interfaces-resources">16.9. Shader Resource Interface</a></li>
<li><a href="chap16.html#interfaces-builtin-variables">16.10. Built-In Variables</a></li>
</ul>
</li>
<li><a href="chap17.html">17. Image Operations</a>
<ul class="sectlevel2">
<li><a href="chap17.html#_image_operations_overview">17.1. Image Operations Overview</a></li>
<li><a href="chap17.html#textures-input">17.2. Sampling Operations</a></li>
<li><a href="chap17.html#textures-normalized-operations">17.3. Normalized Texel Coordinate Operations</a></li>
<li><a href="chap17.html#textures-unnormalized-operations">17.4. Unnormalized Texel Coordinate Operations</a></li>
<li><a href="chap17.html#textures-integer-coordinate-operations">17.5. Integer Texel Coordinate Operations</a></li>
<li><a href="chap17.html#textures-sample-operations">17.6. Image Sample Operations</a></li>
<li><a href="chap17.html#textures-footprint">17.7. Texel Footprint Evaluation</a></li>
<li><a href="chap17.html#textures-weightimage">17.8. Weight Image Sampling</a></li>
<li><a href="chap17.html#textures-blockmatch">17.9. Block Matching</a></li>
<li><a href="chap17.html#textures-boxfilter">17.10. Box Filter Sampling</a></li>
<li><a href="chap17.html#textures-instructions">17.11. Image Operation Steps</a></li>
<li><a href="chap17.html#textures-queries">17.12. Image Query Instructions</a></li>
</ul>
</li>
<li><a href="chap18.html">18. Fragment Density Map Operations</a>
<ul class="sectlevel2">
<li><a href="chap18.html#_fragment_density_map_operations_overview">18.1. Fragment Density Map Operations Overview</a></li>
<li><a href="chap18.html#fragmentdensitymap-fetch-density-value">18.2. Fetch Density Value</a></li>
<li><a href="chap18.html#fragmentdensitymap-conversion-to-fragment-area">18.3. Fragment Area Conversion</a></li>
</ul>
</li>
<li><a href="chap19.html">19. Tensor Operations</a>
<ul class="sectlevel2">
<li><a href="chap19.html#_tensor_operations_overview">19.1. Tensor Operations Overview</a></li>
<li><a href="chap19.html#_tensor_element_input_operations">19.2. Tensor Element Input Operations</a></li>
<li><a href="chap19.html#_tensor_element_output_operations">19.3. Tensor Element Output Operations</a></li>
<li><a href="chap19.html#tensors-queries">19.4. Tensor Query Instructions</a></li>
</ul>
</li>
<li><a href="chap20.html">20. Queries</a>
<ul class="sectlevel2">
<li><a href="chap20.html#queries-pools">20.1. Query Pools</a></li>
<li><a href="chap20.html#queries-operation">20.2. Query Operation</a></li>
<li><a href="chap20.html#queries-occlusion">20.3. Occlusion Queries</a></li>
<li><a href="chap20.html#queries-pipestats">20.4. Pipeline Statistics Queries</a></li>
<li><a href="chap20.html#queries-timestamps">20.5. Timestamp Queries</a></li>
<li><a href="chap20.html#queries-performance">20.6. Performance Queries</a></li>
<li><a href="chap20.html#queries-transform-feedback">20.7. Transform Feedback Queries</a></li>
<li><a href="chap20.html#queries-primitives-generated">20.8. Primitives Generated Queries</a></li>
<li><a href="chap20.html#queries-mesh-shader">20.9. Mesh Shader Queries</a></li>
<li><a href="chap20.html#queries-performance-intel">20.10. Intel Performance Queries</a></li>
<li><a href="chap20.html#queries-result-status-only">20.11. Result Status Queries</a></li>
<li><a href="chap20.html#queries-video-encode-feedback">20.12. Video Encode Feedback Queries</a></li>
</ul>
</li>
<li><a href="chap21.html">21. Clear Commands</a>
<ul class="sectlevel2">
<li><a href="chap21.html#clears-outside">21.1. Clearing Images Outside a Render Pass Instance</a></li>
<li><a href="chap21.html#clears-inside">21.2. Clearing Images Inside a Render Pass Instance</a></li>
<li><a href="chap21.html#clears-values">21.3. Clear Values</a></li>
<li><a href="chap21.html#clears-filling-buffers">21.4. Filling Buffers</a></li>
<li><a href="chap21.html#clears-updating-buffers">21.5. Updating Buffers</a></li>
</ul>
</li>
<li class="current"><a href="chap22.html">22. Copy Commands</a>
<ul class="sectlevel2">
<li class="current"><a href="chap22.html#copies-buffers">22.1. Copying Data Between Buffers</a></li>
<li class="current"><a href="chap22.html#copies-images">22.2. Copying Data Between Images</a></li>
<li class="current"><a href="chap22.html#copies-buffers-images">22.3. Copying Data Between Buffers and Images</a></li>
<li class="current"><a href="chap22.html#indirect-copies">22.4. Indirect Copies</a></li>
<li class="current"><a href="chap22.html#copies-imagescaling">22.5. Image Copies With Scaling</a></li>
<li class="current"><a href="chap22.html#copies-resolve">22.6. Resolving Multisample Images</a></li>
<li class="current"><a href="chap22.html#copies-buffer-markers">22.7. Buffer Markers</a></li>
<li class="current"><a href="chap22.html#copies-tensors">22.8. Copying Data Between Tensors</a></li>
</ul>
</li>
<li><a href="chap23.html">23. Drawing Commands</a>
<ul class="sectlevel2">
<li><a href="chap23.html#drawing-primitive-topologies">23.1. Primitive Topologies</a></li>
<li><a href="chap23.html#drawing-effective-primitive-topology">23.2. Effective Primitive Topology</a></li>
<li><a href="chap23.html#drawing-primitive-order">23.3. Primitive Order</a></li>
<li><a href="chap23.html#drawing-primitive-shading">23.4. Programmable Primitive Shading</a></li>
<li><a href="chap23.html#drawing-conditional-rendering">23.5. Conditional Rendering</a></li>
<li><a href="chap23.html#drawing-mesh-shading">23.6. Programmable Mesh Shading</a></li>
<li><a href="chap23.html#drawing-cluster-culling-shading">23.7. Programmable Cluster Culling Shading</a></li>
</ul>
</li>
<li><a href="chap24.html">24. Fixed-Function Vertex Processing</a>
<ul class="sectlevel2">
<li><a href="chap24.html#fxvertex-attrib">24.1. Vertex Attributes</a></li>
<li><a href="chap24.html#fxvertex-input">24.2. Vertex Input Description</a></li>
<li><a href="chap24.html#fxvertex-attribute_divisor">24.3. Vertex Attribute Divisor in Instanced Rendering</a></li>
<li><a href="chap24.html#fxvertex-input-address-calculation">24.4. Vertex Input Address Calculation</a></li>
</ul>
</li>
<li><a href="chap25.html">25. Tessellation</a>
<ul class="sectlevel2">
<li><a href="chap25.html#_tessellator">25.1. Tessellator</a></li>
<li><a href="chap25.html#_tessellator_patch_discard">25.2. Tessellator Patch Discard</a></li>
<li><a href="chap25.html#tessellation-tessellator-spacing">25.3. Tessellator Spacing</a></li>
<li><a href="chap25.html#tessellation-primitive-order">25.4. Tessellation Primitive Ordering</a></li>
<li><a href="chap25.html#tessellation-vertex-winding-order">25.5. Tessellator Vertex Winding Order</a></li>
<li><a href="chap25.html#tessellation-triangle-tessellation">25.6. Triangle Tessellation</a></li>
<li><a href="chap25.html#tessellation-quad-tessellation">25.7. Quad Tessellation</a></li>
<li><a href="chap25.html#tessellation-isoline-tessellation">25.8. Isoline Tessellation</a></li>
<li><a href="chap25.html#tessellation-point-mode">25.9. Tessellation Point Mode</a></li>
<li><a href="chap25.html#_tessellation_pipeline_state">25.10. Tessellation Pipeline State</a></li>
</ul>
</li>
<li><a href="chap26.html">26. Geometry Shading</a>
<ul class="sectlevel2">
<li><a href="chap26.html#geometry-input">26.1. Geometry Shader Input Primitives</a></li>
<li><a href="chap26.html#geometry-output">26.2. Geometry Shader Output Primitives</a></li>
<li><a href="chap26.html#geometry-invocations">26.3. Multiple Invocations of Geometry Shaders</a></li>
<li><a href="chap26.html#geometry-ordering">26.4. Geometry Shader Primitive Ordering</a></li>
<li><a href="chap26.html#geometry-passthrough">26.5. Geometry Shader Passthrough</a></li>
</ul>
</li>
<li><a href="chap27.html">27. Mesh Shading</a>
<ul class="sectlevel2">
<li><a href="chap27.html#mesh-task-input">27.1. Task Shader Input</a></li>
<li><a href="chap27.html#mesh-task-output">27.2. Task Shader Output</a></li>
<li><a href="chap27.html#mesh-generation">27.3. Mesh Generation</a></li>
<li><a href="chap27.html#mesh-input">27.4. Mesh Shader Input</a></li>
<li><a href="chap27.html#mesh-output">27.5. Mesh Shader Output</a></li>
<li><a href="chap27.html#mesh-output-perview">27.6. Mesh Shader Per-View Outputs</a></li>
<li><a href="chap27.html#mesh-ordering">27.7. Mesh Shader Primitive Ordering</a></li>
</ul>
</li>
<li><a href="chap28.html">28. Cluster Culling Shading</a>
<ul class="sectlevel2">
<li><a href="chap28.html#cluster-culling-input">28.1. Cluster Culling Shader Input</a></li>
<li><a href="chap28.html#cluster-culling-output">28.2. Cluster Culling Shader Output</a></li>
<li><a href="chap28.html#cluster-culling-cluster-ordering">28.3. Cluster Culling Shader Cluster Ordering</a></li>
<li><a href="chap28.html#cluster-culling-primitive-ordering">28.4. Cluster Culling Shader Primitive Ordering</a></li>
</ul>
</li>
<li><a href="chap29.html">29. Fixed-Function Vertex Post-Processing</a>
<ul class="sectlevel2">
<li><a href="chap29.html#vertexpostproc-transform-feedback">29.1. Transform Feedback</a></li>
<li><a href="chap29.html#vertexpostproc-viewport-swizzle">29.2. Viewport Swizzle</a></li>
<li><a href="chap29.html#vertexpostproc-flatshading">29.3. Flat Shading</a></li>
<li><a href="chap29.html#vertexpostproc-clipping">29.4. Primitive Clipping</a></li>
<li><a href="chap29.html#vertexpostproc-clipping-shader-outputs">29.5. Clipping Shader Outputs</a></li>
<li><a href="chap29.html#vertexpostproc-viewportwscaling">29.6. Controlling Viewport W Scaling</a></li>
<li><a href="chap29.html#vertexpostproc-coord-transform">29.7. Coordinate Transformations</a></li>
<li><a href="chap29.html#vertexpostproc-renderpass-transform">29.8. Render Pass Transform</a></li>
<li><a href="chap29.html#vertexpostproc-viewport">29.9. Controlling the Viewport</a></li>
</ul>
</li>
<li><a href="chap30.html">30. Rasterization</a>
<ul class="sectlevel2">
<li><a href="chap30.html#primsrast-discard">30.1. Discarding Primitives Before Rasterization</a></li>
<li><a href="chap30.html#primsrast-stream">30.2. Controlling the Vertex Stream Used for Rasterization</a></li>
<li><a href="chap30.html#primsrast-order">30.3. Rasterization Order</a></li>
<li><a href="chap30.html#primsrast-multisampling">30.4. Multisampling</a></li>
<li><a href="chap30.html#primsrast-samplelocations">30.5. Custom Sample Locations</a></li>
<li><a href="chap30.html#primsrast-fragment-shading-rate">30.6. Fragment Shading Rates</a></li>
<li><a href="chap30.html#primsrast-shading-rate-image">30.7. Shading Rate Image</a></li>
<li><a href="chap30.html#primsrast-sampleshading">30.8. Sample Shading</a></li>
<li><a href="chap30.html#primsrast-barycentric">30.9. Barycentric Interpolation</a></li>
<li><a href="chap30.html#primsrast-points">30.10. Points</a></li>
<li><a href="chap30.html#primsrast-lines">30.11. Line Segments</a></li>
<li><a href="chap30.html#primsrast-polygons">30.12. Polygons</a></li>
</ul>
</li>
<li><a href="chap31.html">31. Fragment Operations</a>
<ul class="sectlevel2">
<li><a href="chap31.html#fragops-discard-rectangles">31.1. Discard Rectangles Test</a></li>
<li><a href="chap31.html#fragops-scissor">31.2. Scissor Test</a></li>
<li><a href="chap31.html#fragops-exclusive-scissor">31.3. Exclusive Scissor Test</a></li>
<li><a href="chap31.html#fragops-samplemask">31.4. Sample Mask Test</a></li>
<li><a href="chap31.html#fragops-shader">31.5. Fragment Shading</a></li>
<li><a href="chap31.html#fragops-covg">31.6. Multisample Coverage</a></li>
<li><a href="chap31.html#fragops-ds-state">31.7. Depth and Stencil Operations</a></li>
<li><a href="chap31.html#fragops-dbt">31.8. Depth Bounds Test</a></li>
<li><a href="chap31.html#fragops-stencil">31.9. Stencil Test</a></li>
<li><a href="chap31.html#fragops-depth">31.10. Depth Test</a></li>
<li><a href="chap31.html#fragops-rep-frag-test">31.11. Representative Fragment Test</a></li>
<li><a href="chap31.html#fragops-samplecount">31.12. Sample Counting</a></li>
<li><a href="chap31.html#fragops-coverage-to-color">31.13. Fragment Coverage to Color</a></li>
<li><a href="chap31.html#fragops-coverage-reduction">31.14. Coverage Reduction</a></li>
</ul>
</li>
<li><a href="chap32.html">32. The Framebuffer</a>
<ul class="sectlevel2">
<li><a href="chap32.html#framebuffer-blending">32.1. Blending</a></li>
<li><a href="chap32.html#framebuffer-logicop">32.2. Logical Operations</a></li>
<li><a href="chap32.html#framebuffer-color-write-mask">32.3. Color Write Mask</a></li>
<li><a href="chap32.html#framebuffer-color-write-enable">32.4. Color Write Enable</a></li>
<li><a href="chap32.html#framebuffer-queries">32.5. Framebuffer Query Instructions</a></li>
</ul>
</li>
<li><a href="chap33.html">33. Dispatching Commands</a>
<ul class="sectlevel2">
<li><a href="chap33.html#cudadispatch">33.1. Dispatch Command for CUDA PTX Kernels</a></li>
</ul>
</li>
<li><a href="chap34.html">34. Device-Generated Commands</a>
<ul class="sectlevel2">
<li><a href="chap34.html#indirectmdslayout">34.1. Indirect Commands Layout</a></li>
<li><a href="chap34.html#_indirect_commands_generation_and_execution">34.2. Indirect Commands Generation and Execution</a></li>
</ul>
</li>
<li><a href="chap35.html">35. Sparse Resources</a>
<ul class="sectlevel2">
<li><a href="chap35.html#sparsememory-sparseresourcefeatures">35.1. Sparse Resource Features</a></li>
<li><a href="chap35.html#sparsememory-fully-resident">35.2. Sparse Buffers and Fully-Resident Images</a></li>
<li><a href="chap35.html#sparsememory-partially-resident-buffers">35.3. Sparse Partially-Resident Buffers</a></li>
<li><a href="chap35.html#sparsememory-partially-resident-images">35.4. Sparse Partially-Resident Images</a></li>
<li><a href="chap35.html#sparsememory-sparse-memory-aliasing">35.5. Sparse Memory Aliasing</a></li>
<li><a href="chap35.html#_sparse_resource_implementation_guidelines_informative">35.6. Sparse Resource Implementation Guidelines (Informative)</a></li>
<li><a href="chap35.html#sparsememory-resourceapi">35.7. Sparse Resource API</a></li>
</ul>
</li>
<li><a href="chap36.html">36. Window System Integration (WSI)</a>
<ul class="sectlevel2">
<li><a href="chap36.html#_wsi_platform">36.1. WSI Platform</a></li>
<li><a href="chap36.html#_wsi_surface">36.2. WSI Surface</a></li>
<li><a href="chap36.html#display">36.3. Presenting Directly to Display Devices</a></li>
<li><a href="chap36.html#_querying_for_wsi_support">36.4. Querying for WSI Support</a></li>
<li><a href="chap36.html#_surface_queries">36.5. Surface Queries</a></li>
<li><a href="chap36.html#_full_screen_exclusive_control">36.6. Full Screen Exclusive Control</a></li>
<li><a href="chap36.html#_device_group_queries">36.7. Device Group Queries</a></li>
<li><a href="chap36.html#_display_timing_queries">36.8. Display Timing Queries</a></li>
<li><a href="chap36.html#present-wait2">36.9. Present Wait</a></li>
<li><a href="chap36.html#wsi-swapchain">36.10. WSI Swapchain</a></li>
<li><a href="chap36.html#_hdr_metadata">36.11. HDR Metadata</a></li>
<li><a href="chap36.html#lag-control">36.12. Lag Control</a></li>
<li><a href="chap36.html#present-barrier">36.13. Present Barrier</a></li>
</ul>
</li>
<li><a href="chap37.html">37. Deferred Host Operations</a>
<ul class="sectlevel2">
<li><a href="chap37.html#deferred-host-operations-requesting">37.1. Requesting Deferral</a></li>
<li><a href="chap37.html#_deferred_host_operations_api">37.2. Deferred Host Operations API</a></li>
</ul>
</li>
<li><a href="chap38.html">38. Private Data</a></li>
<li><a href="chap39.html">39. Acceleration Structures</a>
<ul class="sectlevel2">
<li><a href="chap39.html#acceleration-structure-def">39.1. Acceleration Structures</a></li>
<li><a href="chap39.html#cluster-geometry">39.2. Cluster Level Acceleration Structures</a></li>
<li><a href="chap39.html#partitioned-tlas">39.3. Partitioned Top Level Acceleration Structures</a></li>
<li><a href="chap39.html#host-acceleration-structure">39.4. Host Acceleration Structure Operations</a></li>
</ul>
</li>
<li><a href="chap40.html">40. Compressed triangle data</a>
<ul class="sectlevel2">
<li><a href="chap40.html#dense-geometry-format">40.1. Dense Geometry Format Version 1 (DGF1)</a></li>
</ul>
</li>
<li><a href="chap41.html">41. Micromap</a>
<ul class="sectlevel2">
<li><a href="chap41.html#micromap-def">41.1. Micromaps</a></li>
<li><a href="chap41.html#host-micromap">41.2. Host Micromap Operations</a></li>
</ul>
</li>
<li><a href="chap42.html">42. Ray Traversal</a>
<ul class="sectlevel2">
<li><a href="chap42.html#ray-intersection-candidate-determination">42.1. Ray Intersection Candidate Determination</a></li>
<li><a href="chap42.html#ray-intersection-culling">42.2. Ray Intersection Culling</a></li>
<li><a href="chap42.html#ray-intersection-confirmation">42.3. Ray Intersection Confirmation</a></li>
<li><a href="chap42.html#ray-closest-hit-determination">42.4. Ray Closest Hit Determination</a></li>
<li><a href="chap42.html#ray-result-determination">42.5. Ray Result Determination</a></li>
</ul>
</li>
<li><a href="chap43.html">43. Ray Tracing</a>
<ul class="sectlevel2">
<li><a href="chap43.html#ray-tracing-shader-call">43.1. Shader Call Instructions</a></li>
<li><a href="chap43.html#ray-tracing-commands">43.2. Ray Tracing Commands</a></li>
<li><a href="chap43.html#shader-binding-table">43.3. Shader Binding Table</a></li>
<li><a href="chap43.html#ray-tracing-pipeline-stack">43.4. Ray Tracing Pipeline Stack</a></li>
<li><a href="chap43.html#ray-tracing-capture-replay">43.5. Ray Tracing Capture Replay</a></li>
<li><a href="chap43.html#ray-tracing-validation">43.6. Ray Tracing Validation</a></li>
</ul>
</li>
<li><a href="chap44.html">44. Memory Decompression</a></li>
<li><a href="chap45.html">45. Video Coding</a>
<ul class="sectlevel2">
<li><a href="chap45.html#video-picture-resources">45.1. Video Picture Resources</a></li>
<li><a href="chap45.html#dpb">45.2. Decoded Picture Buffer</a></li>
<li><a href="chap45.html#video-profiles">45.3. Video Profiles</a></li>
<li><a href="chap45.html#video-capabilities">45.4. Video Capabilities</a></li>
<li><a href="chap45.html#video-session">45.5. Video Sessions</a></li>
<li><a href="chap45.html#video-profile-compatibility">45.6. Video Profile Compatibility</a></li>
<li><a href="chap45.html#video-session-parameters">45.7. Video Session Parameters</a></li>
<li><a href="chap45.html#video-coding-scope">45.8. Video Coding Scope</a></li>
<li><a href="chap45.html#video-coding-control">45.9. Video Coding Control</a></li>
<li><a href="chap45.html#video-inline-queries">45.10. Inline Queries</a></li>
<li><a href="chap45.html#video-decode-operations">45.11. Video Decode Operations</a></li>
<li><a href="chap45.html#decode-h264">45.12. H.264 Decode Operations</a></li>
<li><a href="chap45.html#decode-h265">45.13. H.265 Decode Operations</a></li>
<li><a href="chap45.html#decode-vp9">45.14. VP9 Decode Operations</a></li>
<li><a href="chap45.html#decode-av1">45.15. AV1 Decode Operations</a></li>
<li><a href="chap45.html#video-encode-operations">45.16. Video Encode Operations</a></li>
<li><a href="chap45.html#encode-intra-refresh">45.17. Video Encode Intra Refresh</a></li>
<li><a href="chap45.html#encode-rate-control">45.18. Video Encode Rate Control</a></li>
<li><a href="chap45.html#encode-quantization-map">45.19. Video Encode Quantization Maps</a></li>
<li><a href="chap45.html#encode-rgb-conversion">45.20. Video Encode R′G′B′ Conversion</a></li>
<li><a href="chap45.html#encode-h264">45.21. H.264 Encode Operations</a></li>
<li><a href="chap45.html#encode-h265">45.22. H.265 Encode Operations</a></li>
<li><a href="chap45.html#encode-av1">45.23. AV1 Encode Operations</a></li>
</ul>
</li>
<li><a href="chap46.html">46. Optical Flow</a>
<ul class="sectlevel2">
<li><a href="chap46.html#_optical_flow_queues">46.1. Optical Flow Queues</a></li>
<li><a href="chap46.html#opticalflow-formats">46.2. Optical Flow Image Formats</a></li>
<li><a href="chap46.html#opticalflow-session">46.3. Optical Flow Session</a></li>
</ul>
</li>
<li><a href="chap47.html">47. Execution Graphs</a>
<ul class="sectlevel2">
<li><a href="chap47.html#_pipeline_creation">47.1. Pipeline Creation</a></li>
<li><a href="chap47.html#_initializing_scratch_memory">47.2. Initializing Scratch Memory</a></li>
<li><a href="chap47.html#_dispatching_a_graph">47.3. Dispatching a Graph</a></li>
<li><a href="chap47.html#_shader_enqueue">47.4. Shader Enqueue</a></li>
</ul>
</li>
<li><a href="chap48.html">48. External Compute Queues</a></li>
<li><a href="chap49.html">49. Data graphs</a>
<ul class="sectlevel2">
<li><a href="chap49.html#graphs-pipelines">49.1. Pipeline Creation</a></li>
<li><a href="chap49.html#_sessions">49.2. Sessions</a></li>
<li><a href="chap49.html#_dispatch">49.3. Dispatch</a></li>
<li><a href="chap49.html#graphs-properties">49.4. Properties</a></li>
<li><a href="chap49.html#graphs-processing-engines">49.5. Processing Engines</a></li>
<li><a href="chap49.html#graphs-operations">49.6. Operations</a></li>
</ul>
</li>
<li><a href="chap50.html">50. Extending Vulkan</a>
<ul class="sectlevel2">
<li><a href="chap50.html#extendingvulkan-functionalitylevels">50.1. Functionality Levels</a></li>
<li><a href="chap50.html#extendingvulkan-instanceanddeviceversions">50.2. Instance and Device Versions</a></li>
<li><a href="chap50.html#extendingvulkan-coreversions">50.3. Core Versions</a></li>
<li><a href="chap50.html#extendingvulkan-layers">50.4. Layers</a></li>
<li><a href="chap50.html#extendingvulkan-extensions">50.5. Extensions</a></li>
<li><a href="chap50.html#extendingvulkan-extensions-extensiondependencies">50.6. Extension Dependencies</a></li>
<li><a href="chap50.html#_compatibility_guarantees_informative">50.7. Compatibility Guarantees (Informative)</a></li>
</ul>
</li>
<li><a href="chap51.html">51. Features</a>
<ul class="sectlevel2">
<li><a href="chap51.html#features-requirements">51.1. Feature Requirements</a></li>
<li><a href="chap51.html#profile-features">51.2. Profile Features</a></li>
</ul>
</li>
<li><a href="chap52.html">52. Limits</a>
<ul class="sectlevel2">
<li><a href="chap52.html#limits-minmax">52.1. Limit Requirements</a></li>
<li><a href="chap52.html#limits-multisample">52.2. Additional Multisampling Capabilities</a></li>
<li><a href="chap52.html#profile-limits">52.3. Profile Limits</a></li>
</ul>
</li>
<li><a href="chap53.html">53. Formats</a>
<ul class="sectlevel2">
<li><a href="chap53.html#formats-definition">53.1. Format Definition</a></li>
<li><a href="chap53.html#formats-properties">53.2. Format Properties</a></li>
<li><a href="chap53.html#features-required-format-support">53.3. Required Format Support</a></li>
</ul>
</li>
<li><a href="chap54.html">54. Additional Capabilities</a>
<ul class="sectlevel2">
<li><a href="chap54.html#capabilities-image">54.1. Additional Image Capabilities</a></li>
<li><a href="chap54.html#capabilities-buffer">54.2. Additional Buffer Capabilities</a></li>
<li><a href="chap54.html#capabilities-tensor">54.3. Additional Tensor Capabilities</a></li>
<li><a href="chap54.html#capabilities-semaphore">54.4. Optional Semaphore Capabilities</a></li>
<li><a href="chap54.html#capabilities-fence">54.5. Optional Fence Capabilities</a></li>
<li><a href="chap54.html#features-timestamp-calibration">54.6. Timestamp Calibration Capabilities</a></li>
</ul>
</li>
<li><a href="chap55.html">55. Debugging</a>
<ul class="sectlevel2">
<li><a href="chap55.html#debugging-debug-utils">55.1. Debug Utilities</a></li>
<li><a href="chap55.html#debugging-debug-markers">55.2. Debug Markers</a></li>
<li><a href="chap55.html#debugging-debug-report-callbacks">55.3. Debug Report Callbacks</a></li>
<li><a href="chap55.html#_device_loss_debugging">55.4. Device Loss Debugging</a></li>
<li><a href="chap55.html#debugging-tooling-info">55.5. Active Tooling Information</a></li>
<li><a href="chap55.html#_frame_boundary">55.6. Frame Boundary</a></li>
</ul>
</li>
<li><a href="chap56.html">Appendix A: Vulkan Environment for SPIR-V</a>
<ul class="sectlevel2">
<li><a href="chap56.html#_versions_and_formats">Versions and Formats</a></li>
<li><a href="chap56.html#spirvenv-capabilities">Capabilities</a></li>
<li><a href="chap56.html#spirvenv-module-validation">Validation Rules Within a Module</a></li>
<li><a href="chap56.html#spirvenv-precision-operation">Precision and Operation of SPIR-V Instructions</a></li>
<li><a href="chap56.html#spirvenv-buffer-indexing">Buffer Indexing Calculations</a></li>
<li><a href="chap56.html#spirvenv-image-signedness">Signedness of SPIR-V Image Accesses</a></li>
<li><a href="chap56.html#spirvenv-format-type-matching">Image Format and Type Matching</a></li>
<li><a href="chap56.html#spirvenv-image-dimensions">Compatibility Between SPIR-V Image Dimensions and Vulkan ImageView Types</a></li>
<li><a href="chap56.html#spirvenv-image-formats">Compatibility Between SPIR-V Image Formats and Vulkan Formats</a></li>
<li><a href="chap56.html#spirenv-ray-query-precision-operation">Ray Query Precision and Operation</a></li>
<li><a href="chap56.html#spirvenv-tensor-formats">Compatibility Between SPIR-V Tensor Element Types And Vulkan Formats</a></li>
</ul>
</li>
<li><a href="chap57.html">Appendix B: Memory Model</a>
<ul class="sectlevel2">
<li><a href="chap57.html#memory-model-agent">Agent</a></li>
<li><a href="chap57.html#memory-model-memory-location">Memory Location</a></li>
<li><a href="chap57.html#memory-model-allocation">Allocation</a></li>
<li><a href="chap57.html#memory-model-memory-operation">Memory Operation</a></li>
<li><a href="chap57.html#memory-model-references">Reference</a></li>
<li><a href="chap57.html#memory-model-program-order">Program-Order</a></li>
<li><a href="chap57.html#shader-call-related">Shader Call Related</a></li>
<li><a href="chap57.html#shader-call-order">Shader Call Order</a></li>
<li><a href="chap57.html#memory-model-scope">Scope</a></li>
<li><a href="chap57.html#memory-model-atomic-operation">Atomic Operation</a></li>
<li><a href="chap57.html#memory-model-scoped-modification-order">Scoped Modification Order</a></li>
<li><a href="chap57.html#memory-model-memory-semantics">Memory Semantics</a></li>
<li><a href="chap57.html#memory-model-release-sequence">Release Sequence</a></li>
<li><a href="chap57.html#memory-model-synchronizes-with">Synchronizes-With</a></li>
<li><a href="chap57.html#memory-model-system-synchronizes-with">System-Synchronizes-With</a></li>
<li><a href="chap57.html#memory-model-non-private">Private vs. Non-Private</a></li>
<li><a href="chap57.html#memory-model-inter-thread-happens-before">Inter-Thread-Happens-Before</a></li>
<li><a href="chap57.html#memory-model-happens-before">Happens-Before</a></li>
<li><a href="chap57.html#memory-model-availability-visibility">Availability and Visibility</a></li>
<li><a href="chap57.html#memory-model-vulkan-availability-visibility">Availability, Visibility, and Domain Operations</a></li>
<li><a href="chap57.html#memory-model-availability-visibility-semantics">Availability and Visibility Semantics</a></li>
<li><a href="chap57.html#memory-model-instruction-av-vis">Per-Instruction Availability and Visibility Semantics</a></li>
<li><a href="chap57.html#memory-model-location-ordered">Location-Ordered</a></li>
<li><a href="chap57.html#memory-model-access-data-race">Data Race</a></li>
<li><a href="chap57.html#memory-model-visible-to">Visible-To</a></li>
<li><a href="chap57.html#memory-model-acyclicity">Acyclicity</a></li>
<li><a href="chap57.html#memory-model-shader-io">Shader I/O</a></li>
<li><a href="chap57.html#memory-model-deallocation">Deallocation</a></li>
<li><a href="chap57.html#memory-model-informative-descriptions">Descriptions (Informative)</a></li>
<li><a href="chap57.html#memory-model-tessellation-output-ordering">Tessellation Output Ordering</a></li>
<li><a href="chap57.html#memory-model-cooperative-matrix">Cooperative Matrix Memory Access</a></li>
</ul>
</li>
<li><a href="chap58.html">Appendix C: Compressed Image Formats</a>
<ul class="sectlevel2">
<li><a href="chap58.html#appendix-compressedtex-bc">Block-Compressed Image Formats</a></li>
<li><a href="chap58.html#appendix-compressedtex-etc2">ETC Compressed Image Formats</a></li>
<li><a href="chap58.html#appendix-compressedtex-astc">ASTC Compressed Image Formats</a></li>
<li><a href="chap58.html#appendix-compressedtex-pvrtc">PVRTC Compressed Image Formats</a></li>
</ul>
</li>
<li><a href="chap59.html">Appendix D: Core Revisions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap59.html#versions-1.4">Vulkan Version 1.4</a></li>
<li><a href="chap59.html#versions-1.3">Vulkan Version 1.3</a></li>
<li><a href="chap59.html#versions-1.2">Vulkan Version 1.2</a></li>
<li><a href="chap59.html#versions-1.1">Vulkan Version 1.1</a></li>
<li><a href="chap59.html#versions-1.0">Vulkan Version 1.0</a></li>
</ul>
</li>
<li><a href="chap60.html">Appendix E: Layers &amp; Extensions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap60.html#_extension_dependencies">Extension Dependencies</a></li>
<li><a href="chap60.html#_extension_interactions">Extension Interactions</a></li>
<li><a href="chap60.html#current-extension-appendices-list">List of Current Extensions</a></li>
<li><a href="chap60.html#provisional-extension-appendices-list">List of Provisional Extensions</a></li>
<li><a href="chap60.html#deprecated-extension-appendices-list">List of Deprecated Extensions</a></li>
</ul>
</li>
<li><a href="chap61.html">Appendix F: Vulkan Roadmap Milestones</a>
<ul class="sectlevel2">
<li><a href="chap61.html#roadmap-2022">Roadmap 2022</a></li>
<li><a href="chap61.html#roadmap-2024">Roadmap 2024</a></li>
</ul>
</li>
<li><a href="chap62.html">Appendix G: Deprecation</a>
<ul class="sectlevel2">
<li><a href="chap62.html#_deprecated_functionality">Deprecated Functionality</a></li>
</ul>
</li>
<li><a href="chap63.html">Appendix H: API Boilerplate</a>
<ul class="sectlevel2">
<li><a href="chap63.html#boilerplate-headers">Vulkan Header Files</a></li>
<li><a href="chap63.html#boilerplate-wsi-header">Window System-Specific Header Control (Informative)</a></li>
<li><a href="chap63.html#boilerplate-provisional-header">Provisional Extension Header Control (Informative)</a></li>
<li><a href="chap63.html#boilerplate-video-std-headers">Video Std Headers</a></li>
</ul>
</li>
<li><a href="chap64.html">Appendix I: Invariance</a>
<ul class="sectlevel2">
<li><a href="chap64.html#_repeatability">Repeatability</a></li>
<li><a href="chap64.html#_multi_pass_algorithms">Multi-Pass Algorithms</a></li>
<li><a href="chap64.html#_invariance_rules">Invariance Rules</a></li>
<li><a href="chap64.html#_tessellation_invariance">Tessellation Invariance</a></li>
</ul>
</li>
<li><a href="chap65.html">Appendix J: Lexicon</a>
<ul class="sectlevel2">
<li><a href="chap65.html#glossary">Glossary</a></li>
<li><a href="chap65.html#lexicon-common-abbreviations">Common Abbreviations</a></li>
<li><a href="chap65.html#lexicon-video-abbreviations">Video-Specific Abbreviations</a></li>
<li><a href="chap65.html#lexicon-prefixes">Prefixes</a></li>
</ul>
</li>
<li><a href="chap66.html">Appendix K: Credits (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap66.html#_working_group_contributors_to_vulkan">Working Group Contributors to Vulkan</a></li>
<li><a href="chap66.html#_other_credits">Other Credits</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="loading_msg" class="hidden" hidden=""><p>Loading… please wait.</p></div>
<!--ChunkedSearchboxMarker-->
<div class="searchbox"><label for="searchbox">Search: </label><input id="searchbox" type="text" disabled="disabled" value="Loading Search Data"><div id="resultsdiv"><ol id="results"></ol></div></div>
<div id="content" class="loadable"><div class="sect1">
<h2 id="copies"><a class="anchor" href="chap22.html"></a>22. Copy Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An application <strong class="purple">can</strong> copy buffer and image data using several methods
described in this chapter, depending on the type of data transfer.</p>
</div>
<div class="paragraph">
<p>All copy commands are treated as “transfer” operations for the purposes of
synchronization barriers.</p>
</div>
<div class="paragraph">
<p>All copy commands that have a source format with an X component in its
format description read undefined values from those bits.</p>
</div>
<div class="paragraph">
<p>All copy commands that have a destination format with an X component in its
format description write undefined values to those bits.</p>
</div>
<div class="sect2">
<h3 id="copies-buffers"><a class="anchor" href="chap22.html#copies-buffers"></a>22.1. Copying Data Between Buffers</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data between buffer objects, call:</p>
</div>
<div id="vkCmdCopyBuffer" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyBuffer</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkBuffer</span>                                    <span class="n">srcBuffer</span><span class="p">,</span>
    <span class="n">VkBuffer</span>                                    <span class="n">dstBuffer</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">regionCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkBufferCopy</span><span class="o">*</span>                         <span class="n">pRegions</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>srcBuffer</code> is the source buffer.</p>
</li>
<li>
<p><code>dstBuffer</code> is the destination buffer.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap22.html#VkBufferCopy">VkBufferCopy</a> structures
specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each source region specified by <code>pRegions</code> is copied from the source
buffer to the destination region of the destination buffer.
If any of the specified regions in <code>srcBuffer</code> overlaps in memory with
any of the specified regions in <code>dstBuffer</code>, values read from those
overlapping regions are undefined.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commandBuffer-01822" href="chap22.html#VUID-vkCmdCopyBuffer-commandBuffer-01822"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commandBuffer-01822</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>srcBuffer</code> <strong class="purple">must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commandBuffer-01823" href="chap22.html#VUID-vkCmdCopyBuffer-commandBuffer-01823"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commandBuffer-01823</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong class="purple">must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commandBuffer-01824" href="chap22.html#VUID-vkCmdCopyBuffer-commandBuffer-01824"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commandBuffer-01824</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong class="purple">must</strong> not be an unprotected buffer</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBuffer-srcOffset-00113" href="chap22.html#VUID-vkCmdCopyBuffer-srcOffset-00113"></a> <span class="vuid">VUID-vkCmdCopyBuffer-srcOffset-00113</span><br>

The <code>srcOffset</code> member of each element of <code>pRegions</code> <strong class="purple">must</strong> be
less than the size of <code>srcBuffer</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-dstOffset-00114" href="chap22.html#VUID-vkCmdCopyBuffer-dstOffset-00114"></a> <span class="vuid">VUID-vkCmdCopyBuffer-dstOffset-00114</span><br>

The <code>dstOffset</code> member of each element of <code>pRegions</code> <strong class="purple">must</strong> be
less than the size of <code>dstBuffer</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-size-00115" href="chap22.html#VUID-vkCmdCopyBuffer-size-00115"></a> <span class="vuid">VUID-vkCmdCopyBuffer-size-00115</span><br>

The <code>size</code> member of each element of <code>pRegions</code> <strong class="purple">must</strong> be less
than or equal to the size of <code>srcBuffer</code> minus <code>srcOffset</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-size-00116" href="chap22.html#VUID-vkCmdCopyBuffer-size-00116"></a> <span class="vuid">VUID-vkCmdCopyBuffer-size-00116</span><br>

The <code>size</code> member of each element of <code>pRegions</code> <strong class="purple">must</strong> be less
than or equal to the size of <code>dstBuffer</code> minus <code>dstOffset</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-pRegions-00117" href="chap22.html#VUID-vkCmdCopyBuffer-pRegions-00117"></a> <span class="vuid">VUID-vkCmdCopyBuffer-pRegions-00117</span><br>

The union of the source regions, and the union of the destination
regions, specified by the elements of <code>pRegions</code>, <strong class="purple">must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-srcBuffer-00118" href="chap22.html#VUID-vkCmdCopyBuffer-srcBuffer-00118"></a> <span class="vuid">VUID-vkCmdCopyBuffer-srcBuffer-00118</span><br>

<code>srcBuffer</code> <strong class="purple">must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-srcBuffer-00119" href="chap22.html#VUID-vkCmdCopyBuffer-srcBuffer-00119"></a> <span class="vuid">VUID-vkCmdCopyBuffer-srcBuffer-00119</span><br>

If <code>srcBuffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-dstBuffer-00120" href="chap22.html#VUID-vkCmdCopyBuffer-dstBuffer-00120"></a> <span class="vuid">VUID-vkCmdCopyBuffer-dstBuffer-00120</span><br>

<code>dstBuffer</code> <strong class="purple">must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-dstBuffer-00121" href="chap22.html#VUID-vkCmdCopyBuffer-dstBuffer-00121"></a> <span class="vuid">VUID-vkCmdCopyBuffer-dstBuffer-00121</span><br>

If <code>dstBuffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commandBuffer-parameter" href="chap22.html#VUID-vkCmdCopyBuffer-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-srcBuffer-parameter" href="chap22.html#VUID-vkCmdCopyBuffer-srcBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBuffer-srcBuffer-parameter</span><br>
 <code>srcBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-dstBuffer-parameter" href="chap22.html#VUID-vkCmdCopyBuffer-dstBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBuffer-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-pRegions-parameter" href="chap22.html#VUID-vkCmdCopyBuffer-pRegions-parameter"></a> <span class="vuid">VUID-vkCmdCopyBuffer-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap22.html#VkBufferCopy">VkBufferCopy</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commandBuffer-recording" href="chap22.html#VUID-vkCmdCopyBuffer-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commandBuffer-cmdpool" href="chap22.html#VUID-vkCmdCopyBuffer-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support VK_QUEUE_COMPUTE_BIT, VK_QUEUE_GRAPHICS_BIT, or VK_QUEUE_TRANSFER_BIT operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-renderpass" href="chap22.html#VUID-vkCmdCopyBuffer-renderpass"></a> <span class="vuid">VUID-vkCmdCopyBuffer-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-videocoding" href="chap22.html#VUID-vkCmdCopyBuffer-videocoding"></a> <span class="vuid">VUID-vkCmdCopyBuffer-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-regionCount-arraylength" href="chap22.html#VUID-vkCmdCopyBuffer-regionCount-arraylength"></a> <span class="vuid">VUID-vkCmdCopyBuffer-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commonparent" href="chap22.html#VUID-vkCmdCopyBuffer-commonparent"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commonparent</span><br>
 Each of <code>commandBuffer</code>, <code>dstBuffer</code>, and <code>srcBuffer</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap45.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VK_QUEUE_COMPUTE_BIT<br>
VK_QUEUE_GRAPHICS_BIT<br>
VK_QUEUE_TRANSFER_BIT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Conditional Rendering</div>
<div class="paragraph">
<p>vkCmdCopyBuffer is not affected by <a href="chap23.html#drawing-conditional-rendering">conditional rendering</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferCopy</code> structure is defined as:</p>
</div>
<div id="VkBufferCopy" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBufferCopy</span> <span class="p">{</span>
    <span class="n">VkDeviceSize</span>    <span class="n">srcOffset</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>    <span class="n">dstOffset</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>    <span class="n">size</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBufferCopy</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>srcOffset</code> is the starting offset in bytes from the start of
<code>srcBuffer</code>.</p>
</li>
<li>
<p><code>dstOffset</code> is the starting offset in bytes from the start of
<code>dstBuffer</code>.</p>
</li>
<li>
<p><code>size</code> is the number of bytes to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCopy-size-01988" href="chap22.html#VUID-VkBufferCopy-size-01988"></a> <span class="vuid">VUID-VkBufferCopy-size-01988</span><br>

The <code>size</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>A more extensible version of the copy buffer command is defined below.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data between buffer objects, call:</p>
</div>
<div id="vkCmdCopyBuffer2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyBuffer2</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCopyBufferInfo2</span><span class="o">*</span>                    <span class="n">pCopyBufferInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkCmdCopyBuffer2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyBuffer2KHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCopyBufferInfo2</span><span class="o">*</span>                    <span class="n">pCopyBufferInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pCopyBufferInfo</code> is a pointer to a <a href="chap22.html#VkCopyBufferInfo2">VkCopyBufferInfo2</a>
structure describing the copy parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each source region specified by <code>pCopyBufferInfo-&gt;pRegions</code> is copied
from the source buffer to the destination region of the destination buffer.
If any of the specified regions in <code>pCopyBufferInfo-&gt;srcBuffer</code> overlaps
in memory with any of the specified regions in
<code>pCopyBufferInfo-&gt;dstBuffer</code>, values read from those overlapping regions
are undefined.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-commandBuffer-01822" href="chap22.html#VUID-vkCmdCopyBuffer2-commandBuffer-01822"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-commandBuffer-01822</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>srcBuffer</code> <strong class="purple">must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-commandBuffer-01823" href="chap22.html#VUID-vkCmdCopyBuffer2-commandBuffer-01823"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-commandBuffer-01823</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong class="purple">must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-commandBuffer-01824" href="chap22.html#VUID-vkCmdCopyBuffer2-commandBuffer-01824"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-commandBuffer-01824</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong class="purple">must</strong> not be an unprotected buffer</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-commandBuffer-parameter" href="chap22.html#VUID-vkCmdCopyBuffer2-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-pCopyBufferInfo-parameter" href="chap22.html#VUID-vkCmdCopyBuffer2-pCopyBufferInfo-parameter"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-pCopyBufferInfo-parameter</span><br>
 <code>pCopyBufferInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap22.html#VkCopyBufferInfo2">VkCopyBufferInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-commandBuffer-recording" href="chap22.html#VUID-vkCmdCopyBuffer2-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-commandBuffer-cmdpool" href="chap22.html#VUID-vkCmdCopyBuffer2-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support VK_QUEUE_COMPUTE_BIT, VK_QUEUE_GRAPHICS_BIT, or VK_QUEUE_TRANSFER_BIT operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-renderpass" href="chap22.html#VUID-vkCmdCopyBuffer2-renderpass"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-videocoding" href="chap22.html#VUID-vkCmdCopyBuffer2-videocoding"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap45.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VK_QUEUE_COMPUTE_BIT<br>
VK_QUEUE_GRAPHICS_BIT<br>
VK_QUEUE_TRANSFER_BIT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Conditional Rendering</div>
<div class="paragraph">
<p>vkCmdCopyBuffer2 is not affected by <a href="chap23.html#drawing-conditional-rendering">conditional rendering</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyBufferInfo2</code> structure is defined as:</p>
</div>
<div id="VkCopyBufferInfo2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkCopyBufferInfo2</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>         <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>             <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkBuffer</span>                <span class="n">srcBuffer</span><span class="p">;</span>
    <span class="n">VkBuffer</span>                <span class="n">dstBuffer</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                <span class="n">regionCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkBufferCopy2</span><span class="o">*</span>    <span class="n">pRegions</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkCopyBufferInfo2</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkCopyBufferInfo2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="k">typedef</span> <span class="n">VkCopyBufferInfo2</span> <span class="n">VkCopyBufferInfo2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="chap3.html#VkStructureType">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcBuffer</code> is the source buffer.</p>
</li>
<li>
<p><code>dstBuffer</code> is the destination buffer.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap22.html#VkBufferCopy2">VkBufferCopy2</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferInfo2-srcOffset-00113" href="chap22.html#VUID-VkCopyBufferInfo2-srcOffset-00113"></a> <span class="vuid">VUID-VkCopyBufferInfo2-srcOffset-00113</span><br>

The <code>srcOffset</code> member of each element of <code>pRegions</code> <strong class="purple">must</strong> be
less than the size of <code>srcBuffer</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-dstOffset-00114" href="chap22.html#VUID-VkCopyBufferInfo2-dstOffset-00114"></a> <span class="vuid">VUID-VkCopyBufferInfo2-dstOffset-00114</span><br>

The <code>dstOffset</code> member of each element of <code>pRegions</code> <strong class="purple">must</strong> be
less than the size of <code>dstBuffer</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-size-00115" href="chap22.html#VUID-VkCopyBufferInfo2-size-00115"></a> <span class="vuid">VUID-VkCopyBufferInfo2-size-00115</span><br>

The <code>size</code> member of each element of <code>pRegions</code> <strong class="purple">must</strong> be less
than or equal to the size of <code>srcBuffer</code> minus <code>srcOffset</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-size-00116" href="chap22.html#VUID-VkCopyBufferInfo2-size-00116"></a> <span class="vuid">VUID-VkCopyBufferInfo2-size-00116</span><br>

The <code>size</code> member of each element of <code>pRegions</code> <strong class="purple">must</strong> be less
than or equal to the size of <code>dstBuffer</code> minus <code>dstOffset</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-pRegions-00117" href="chap22.html#VUID-VkCopyBufferInfo2-pRegions-00117"></a> <span class="vuid">VUID-VkCopyBufferInfo2-pRegions-00117</span><br>

The union of the source regions, and the union of the destination
regions, specified by the elements of <code>pRegions</code>, <strong class="purple">must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-srcBuffer-00118" href="chap22.html#VUID-VkCopyBufferInfo2-srcBuffer-00118"></a> <span class="vuid">VUID-VkCopyBufferInfo2-srcBuffer-00118</span><br>

<code>srcBuffer</code> <strong class="purple">must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-srcBuffer-00119" href="chap22.html#VUID-VkCopyBufferInfo2-srcBuffer-00119"></a> <span class="vuid">VUID-VkCopyBufferInfo2-srcBuffer-00119</span><br>

If <code>srcBuffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-dstBuffer-00120" href="chap22.html#VUID-VkCopyBufferInfo2-dstBuffer-00120"></a> <span class="vuid">VUID-VkCopyBufferInfo2-dstBuffer-00120</span><br>

<code>dstBuffer</code> <strong class="purple">must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-dstBuffer-00121" href="chap22.html#VUID-VkCopyBufferInfo2-dstBuffer-00121"></a> <span class="vuid">VUID-VkCopyBufferInfo2-dstBuffer-00121</span><br>

If <code>dstBuffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferInfo2-sType-sType" href="chap22.html#VUID-VkCopyBufferInfo2-sType-sType"></a> <span class="vuid">VUID-VkCopyBufferInfo2-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_COPY_BUFFER_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-pNext-pNext" href="chap22.html#VUID-VkCopyBufferInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkCopyBufferInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-srcBuffer-parameter" href="chap22.html#VUID-VkCopyBufferInfo2-srcBuffer-parameter"></a> <span class="vuid">VUID-VkCopyBufferInfo2-srcBuffer-parameter</span><br>
 <code>srcBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-dstBuffer-parameter" href="chap22.html#VUID-VkCopyBufferInfo2-dstBuffer-parameter"></a> <span class="vuid">VUID-VkCopyBufferInfo2-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-pRegions-parameter" href="chap22.html#VUID-VkCopyBufferInfo2-pRegions-parameter"></a> <span class="vuid">VUID-VkCopyBufferInfo2-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap22.html#VkBufferCopy2">VkBufferCopy2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-regionCount-arraylength" href="chap22.html#VUID-VkCopyBufferInfo2-regionCount-arraylength"></a> <span class="vuid">VUID-VkCopyBufferInfo2-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-commonparent" href="chap22.html#VUID-VkCopyBufferInfo2-commonparent"></a> <span class="vuid">VUID-VkCopyBufferInfo2-commonparent</span><br>
 Both of <code>dstBuffer</code>, and <code>srcBuffer</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferCopy2</code> structure is defined as:</p>
</div>
<div id="VkBufferCopy2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBufferCopy2</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">srcOffset</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">dstOffset</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">size</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBufferCopy2</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkBufferCopy2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="k">typedef</span> <span class="n">VkBufferCopy2</span> <span class="n">VkBufferCopy2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="chap3.html#VkStructureType">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcOffset</code> is the starting offset in bytes from the start of
<code>srcBuffer</code>.</p>
</li>
<li>
<p><code>dstOffset</code> is the starting offset in bytes from the start of
<code>dstBuffer</code>.</p>
</li>
<li>
<p><code>size</code> is the number of bytes to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCopy2-size-01988" href="chap22.html#VUID-VkBufferCopy2-size-01988"></a> <span class="vuid">VUID-VkBufferCopy2-size-01988</span><br>

The <code>size</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCopy2-sType-sType" href="chap22.html#VUID-VkBufferCopy2-sType-sType"></a> <span class="vuid">VUID-VkBufferCopy2-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_COPY_2</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCopy2-pNext-pNext" href="chap22.html#VUID-VkBufferCopy2-pNext-pNext"></a> <span class="vuid">VUID-VkBufferCopy2-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="copies-images"><a class="anchor" href="chap22.html#copies-images"></a>22.2. Copying Data Between Images</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data between image objects, call:</p>
</div>
<div id="vkCmdCopyImage" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyImage</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">srcImage</span><span class="p">,</span>
    <span class="n">VkImageLayout</span>                               <span class="n">srcImageLayout</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">dstImage</span><span class="p">,</span>
    <span class="n">VkImageLayout</span>                               <span class="n">dstImageLayout</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">regionCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkImageCopy</span><span class="o">*</span>                          <span class="n">pRegions</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the current layout of the source image
subresource.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the current layout of the destination image
subresource.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap22.html#VkImageCopy">VkImageCopy</a> structures
specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each source region specified by <code>pRegions</code> is copied from the source
image to the destination region of the destination image.
If any of the specified regions in <code>srcImage</code> overlaps in memory with
any of the specified regions in <code>dstImage</code>, values read from those
overlapping regions are undefined.
If any region accesses a depth aspect in <code>dstImage</code>
and the <code><a href="chap60.html#VK_EXT_depth_range_unrestricted">VK_EXT_depth_range_unrestricted</a></code> extension is not enabled,
values copied from <code>srcBuffer</code> outside of the range <span class="eq">[0,1]</span> will be
written as undefined values to the destination image.</p>
</div>
<div class="paragraph">
<p><a href="chap53.html#formats-multiplanar">Multi-planar images</a> <strong class="purple">can</strong> only be copied on a
per-plane basis, and the subresources used in each region when copying to or
from such images <strong class="purple">must</strong> specify only one plane, though different regions <strong class="purple">can</strong>
specify different planes.
When copying planes of multi-planar images, the format considered is the
<a href="chap53.html#formats-compatible-planes">compatible format for that plane</a>, rather than
the format of the multi-planar image.</p>
</div>
<div class="paragraph">
<p>If the format of the destination image has a different
<a href="chap53.html#formats-compatibility-classes">block extent</a> than the source image (e.g.
one is a compressed format), the offset and extent for each of the regions
specified is <a href="chap53.html#formats-size-compatibility">scaled according to the block
extents of each format</a> to match in size.
Copy regions for each image <strong class="purple">must</strong> be aligned to a multiple of the texel
block extent in each dimension, except at the edges of the image, where
region extents <strong class="purple">must</strong> match the edge of the image.</p>
</div>
<div class="paragraph">
<p>Image data <strong class="purple">can</strong> be copied between images with different image types.
If one image is <code>VK_IMAGE_TYPE_3D</code> and the other image is
<code>VK_IMAGE_TYPE_2D</code> with multiple layers, then each slice is copied to or
from a different layer; <code>depth</code> slices in the 3D image correspond to
<code>layerCount</code> layers in the 2D image, with an effective <code>depth</code> of
<code>1</code> used for the 2D image.
If the <a href="chap51.html#features-maintenance5"><code>maintenance5</code></a> feature is enabled, all
other combinations are allowed and function as if 1D images are 2D images
with a height of 1.
Otherwise, other combinations of image types are disallowed.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-01825" href="chap22.html#VUID-vkCmdCopyImage-commandBuffer-01825"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-01825</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>srcImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-01826" href="chap22.html#VUID-vkCmdCopyImage-commandBuffer-01826"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-01826</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-01827" href="chap22.html#VUID-vkCmdCopyImage-commandBuffer-01827"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-01827</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong class="purple">must</strong> not be an unprotected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-10217" href="chap22.html#VUID-vkCmdCopyImage-commandBuffer-10217"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-10217</span><br>

If the queue family used to create the <a href="chap6.html#VkCommandPool">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code>, for each element of <code>pRegions</code>, where
the <code>aspectMask</code> member of <code>srcSubresource</code> is
<code>VK_IMAGE_ASPECT_COLOR_BIT</code>, the <code>aspectMask</code> of
<code>dstSubresource</code> <strong class="purple">must</strong> not be <code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-10218" href="chap22.html#VUID-vkCmdCopyImage-commandBuffer-10218"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-10218</span><br>

If the queue family used to create the <a href="chap6.html#VkCommandPool">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code>, for each element of <code>pRegions</code>, where
the <code>aspectMask</code> member of <code>dstSubresource</code> is
<code>VK_IMAGE_ASPECT_COLOR_BIT</code> then the <code>aspectMask</code> of
<code>srcSubresource</code> <strong class="purple">must</strong> not be <code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-00124" href="chap22.html#VUID-vkCmdCopyImage-pRegions-00124"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-00124</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong class="purple">must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01995" href="chap22.html#VUID-vkCmdCopyImage-srcImage-01995"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01995</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>srcImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImageLayout-00128" href="chap22.html#VUID-vkCmdCopyImage-srcImageLayout-00128"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImageLayout-00128</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImageLayout-01917" href="chap22.html#VUID-vkCmdCopyImage-srcImageLayout-01917"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImageLayout-01917</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-09460" href="chap22.html#VUID-vkCmdCopyImage-srcImage-09460"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-09460</span><br>

If <code>srcImage</code> and <code>dstImage</code> are the same, and any elements of
<code>pRegions</code> contains the <code>srcSubresource</code> and
<code>dstSubresource</code> with matching <code>mipLevel</code> and overlapping array
layers, then the <code>srcImageLayout</code> and <code>dstImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_GENERAL</code>
or <code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01996" href="chap22.html#VUID-vkCmdCopyImage-dstImage-01996"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01996</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>dstImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImageLayout-00133" href="chap22.html#VUID-vkCmdCopyImage-dstImageLayout-00133"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImageLayout-00133</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImageLayout-01395" href="chap22.html#VUID-vkCmdCopyImage-dstImageLayout-01395"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImageLayout-01395</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01548" href="chap22.html#VUID-vkCmdCopyImage-srcImage-01548"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01548</span><br>

If the <a href="chap53.html#VkFormat">VkFormat</a> of each of <code>srcImage</code> and <code>dstImage</code> is
not a <a href="chap53.html#formats-multiplanar">multi-planar format</a>, the
<a href="chap53.html#VkFormat">VkFormat</a> of each of <code>srcImage</code> and <code>dstImage</code> <strong class="purple">must</strong> be
<a href="chap53.html#formats-size-compatibility">size-compatible</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-None-01549" href="chap22.html#VUID-vkCmdCopyImage-None-01549"></a> <span class="vuid">VUID-vkCmdCopyImage-None-01549</span><br>

 In a copy to or from a plane of a
<a href="chap53.html#formats-multiplanar">multi-planar image</a>, the <a href="chap53.html#VkFormat">VkFormat</a> of the
image and plane <strong class="purple">must</strong> be compatible according to
<a href="chap53.html#formats-compatible-planes">the description of compatible planes</a> for
the plane being copied</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-09247" href="chap22.html#VUID-vkCmdCopyImage-srcImage-09247"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-09247</span><br>

If the <a href="chap53.html#VkFormat">VkFormat</a> of each of <code>srcImage</code> and <code>dstImage</code> is a
<a href="chap58.html">compressed image format</a>, the formats <strong class="purple">must</strong>
have the same texel block extent</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-00136" href="chap22.html#VUID-vkCmdCopyImage-srcImage-00136"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-00136</span><br>

The sample count of <code>srcImage</code> and <code>dstImage</code> <strong class="purple">must</strong> match</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcOffset-01783" href="chap22.html#VUID-vkCmdCopyImage-srcOffset-01783"></a> <span class="vuid">VUID-vkCmdCopyImage-srcOffset-01783</span><br>

The <code>srcOffset</code> and <code>extent</code> members of each element of
<code>pRegions</code> <strong class="purple">must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>’s command pool’s queue family, as described in
<a href="chap5.html#VkQueueFamilyProperties">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstOffset-01784" href="chap22.html#VUID-vkCmdCopyImage-dstOffset-01784"></a> <span class="vuid">VUID-vkCmdCopyImage-dstOffset-01784</span><br>

The <code>dstOffset</code> and <code>extent</code> members of each element of
<code>pRegions</code> <strong class="purple">must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>’s command pool’s queue family, as described in
<a href="chap5.html#VkQueueFamilyProperties">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01551" href="chap22.html#VUID-vkCmdCopyImage-srcImage-01551"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01551</span><br>

    If neither <code>srcImage</code> nor <code>dstImage</code> has a
    <a href="chap53.html#formats-multiplanar">multi-planar format</a>
and the <a href="chap51.html#features-maintenance8"><code>maintenance8</code></a> feature is not enabled
    then for each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
    and <code>dstSubresource.aspectMask</code> <strong class="purple">must</strong> match</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcSubresource-10214" href="chap22.html#VUID-vkCmdCopyImage-srcSubresource-10214"></a> <span class="vuid">VUID-vkCmdCopyImage-srcSubresource-10214</span><br>

If <code>srcSubresource.aspectMask</code> is <code>VK_IMAGE_ASPECT_COLOR_BIT</code>,
then <code>dstSubresource.aspectMask</code> <strong class="purple">must</strong> not contain both
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> and <code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstSubresource-10215" href="chap22.html#VUID-vkCmdCopyImage-dstSubresource-10215"></a> <span class="vuid">VUID-vkCmdCopyImage-dstSubresource-10215</span><br>

If <code>dstSubresource.aspectMask</code> is <code>VK_IMAGE_ASPECT_COLOR_BIT</code>,
then <code>srcSubresource.aspectMask</code> <strong class="purple">must</strong> not contain both
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> and <code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-08713" href="chap22.html#VUID-vkCmdCopyImage-srcImage-08713"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-08713</span><br>

If <code>srcImage</code> has a <a href="chap53.html#formats-multiplanar">multi-planar format</a>,
then for each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong class="purple">must</strong> be a single valid <a href="chap53.html#formats-multiplanar-image-aspect">multi-planar
aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-08714" href="chap22.html#VUID-vkCmdCopyImage-dstImage-08714"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-08714</span><br>

If <code>dstImage</code> has a <a href="chap53.html#formats-multiplanar">multi-planar format</a>,
then for each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong class="purple">must</strong> be a single valid <a href="chap53.html#formats-multiplanar-image-aspect">multi-planar
aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01556" href="chap22.html#VUID-vkCmdCopyImage-srcImage-01556"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01556</span><br>

If <code>srcImage</code> has a <a href="chap53.html#formats-multiplanar">multi-planar format</a> and
the <code>dstImage</code> does not have a multi-planar image format, then for
each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01557" href="chap22.html#VUID-vkCmdCopyImage-dstImage-01557"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01557</span><br>

If <code>dstImage</code> has a <a href="chap53.html#formats-multiplanar">multi-planar format</a> and
the <code>srcImage</code> does not have a multi-planar image format, then for
each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcSubresource-10211" href="chap22.html#VUID-vkCmdCopyImage-srcSubresource-10211"></a> <span class="vuid">VUID-vkCmdCopyImage-srcSubresource-10211</span><br>

If <code>srcSubresource.aspectMask</code> is <code>VK_IMAGE_ASPECT_COLOR_BIT</code>
and <code>dstSubresource.aspectMask</code> is <code>VK_IMAGE_ASPECT_DEPTH_BIT</code>
or <code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, then the <a href="chap53.html#VkFormat">VkFormat</a> values of
<code>srcImage</code> and <code>dstImage</code> <strong class="purple">must</strong> be compatible according to
<a href="chap53.html#formats-compatible-zs-color">the list of compatible depth-stencil and
color formats</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcSubresource-10212" href="chap22.html#VUID-vkCmdCopyImage-srcSubresource-10212"></a> <span class="vuid">VUID-vkCmdCopyImage-srcSubresource-10212</span><br>

If <code>srcSubresource.aspectMask</code> is <code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code> and <code>dstSubresource.aspectMask</code> is
<code>VK_IMAGE_ASPECT_COLOR_BIT</code>, then the <a href="chap53.html#VkFormat">VkFormat</a> values of
<code>srcImage</code> and <code>dstImage</code> <strong class="purple">must</strong> be compatible according to
<a href="chap53.html#formats-compatible-zs-color">the list of compatible depth-stencil and
color formats</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-apiVersion-07932" href="chap22.html#VUID-vkCmdCopyImage-apiVersion-07932"></a> <span class="vuid">VUID-vkCmdCopyImage-apiVersion-07932</span><br>

    If
    the <a href="chap60.html#VK_KHR_maintenance1">VK_KHR_maintenance1</a> extension is not enabled,
or
    <a href="chap5.html#VkPhysicalDeviceProperties">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
    1.1,
and
    either <code>srcImage</code> or <code>dstImage</code> is of type
    <code>VK_IMAGE_TYPE_3D</code>, then for each element of <code>pRegions</code>,
    <code>srcSubresource.baseArrayLayer</code> and
    <code>dstSubresource.baseArrayLayer</code> <strong class="purple">must</strong> both be <code>0</code>, and
    <code>srcSubresource.layerCount</code> and <code>dstSubresource.layerCount</code>
    <strong class="purple">must</strong> both be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-04443" href="chap22.html#VUID-vkCmdCopyImage-srcImage-04443"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-04443</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>srcSubresource.baseArrayLayer</code> <strong class="purple">must</strong> be
<code>0</code> and <code>srcSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-04444" href="chap22.html#VUID-vkCmdCopyImage-dstImage-04444"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-04444</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>dstSubresource.baseArrayLayer</code> <strong class="purple">must</strong> be
<code>0</code> and <code>dstSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-aspectMask-00142" href="chap22.html#VUID-vkCmdCopyImage-aspectMask-00142"></a> <span class="vuid">VUID-vkCmdCopyImage-aspectMask-00142</span><br>

For each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-aspectMask-00143" href="chap22.html#VUID-vkCmdCopyImage-aspectMask-00143"></a> <span class="vuid">VUID-vkCmdCopyImage-aspectMask-00143</span><br>

For each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcOffset-00144" href="chap22.html#VUID-vkCmdCopyImage-srcOffset-00144"></a> <span class="vuid">VUID-vkCmdCopyImage-srcOffset-00144</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>srcOffset.x</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcOffset-00145" href="chap22.html#VUID-vkCmdCopyImage-srcOffset-00145"></a> <span class="vuid">VUID-vkCmdCopyImage-srcOffset-00145</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>srcOffset.y</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-00146" href="chap22.html#VUID-vkCmdCopyImage-srcImage-00146"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-00146</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>extent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcOffset-00147" href="chap22.html#VUID-vkCmdCopyImage-srcOffset-00147"></a> <span class="vuid">VUID-vkCmdCopyImage-srcOffset-00147</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>srcOffset.z</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01785" href="chap22.html#VUID-vkCmdCopyImage-srcImage-01785"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01785</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and
<code>extent.depth</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01786" href="chap22.html#VUID-vkCmdCopyImage-dstImage-01786"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01786</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.z</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-10907" href="chap22.html#VUID-vkCmdCopyImage-srcImage-10907"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-10907</span><br>

If either the <a href="chap53.html#VkFormat">VkFormat</a> of each of <code>srcImage</code> and
<code>dstImage</code> is not a <a href="chap58.html">compressed image
format</a>, and <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for
each element of <code>pRegions</code>, <code>extent.depth</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01787" href="chap22.html#VUID-vkCmdCopyImage-srcImage-01787"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01787</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.z</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01788" href="chap22.html#VUID-vkCmdCopyImage-dstImage-01788"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01788</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.z</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-apiVersion-07933" href="chap22.html#VUID-vkCmdCopyImage-apiVersion-07933"></a> <span class="vuid">VUID-vkCmdCopyImage-apiVersion-07933</span><br>

    If
    the <a href="chap60.html#VK_KHR_maintenance1">VK_KHR_maintenance1</a> extension is not enabled,
and
    <a href="chap5.html#VkPhysicalDeviceProperties">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
    1.1,
    <code>srcImage</code> and <code>dstImage</code> <strong class="purple">must</strong> have the same <a href="chap12.html#VkImageType">VkImageType</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-apiVersion-08969" href="chap22.html#VUID-vkCmdCopyImage-apiVersion-08969"></a> <span class="vuid">VUID-vkCmdCopyImage-apiVersion-08969</span><br>

    If
    the <a href="chap60.html#VK_KHR_maintenance1">VK_KHR_maintenance1</a> extension is not enabled,
and
    <a href="chap5.html#VkPhysicalDeviceProperties">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
    1.1,
    <code>srcImage</code> or <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, then
    for each element of <code>pRegions</code>, <code>extent.depth</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-07743" href="chap22.html#VUID-vkCmdCopyImage-srcImage-07743"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-07743</span><br>

If <code>srcImage</code> and <code>dstImage</code> have a different <a href="chap12.html#VkImageType">VkImageType</a>,
and the <a href="chap51.html#features-maintenance5"><code>maintenance5</code></a> feature is not
enabled,
one <strong class="purple">must</strong> be <code>VK_IMAGE_TYPE_3D</code> and the other <strong class="purple">must</strong> be
<code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-08793" href="chap22.html#VUID-vkCmdCopyImage-srcImage-08793"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-08793</span><br>

If <code>srcImage</code> and <code>dstImage</code> have the same <a href="chap12.html#VkImageType">VkImageType</a>,
for each element of <code>pRegions</code>,
if neither of the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> are <code>VK_REMAINING_ARRAY_LAYERS</code>,
the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> <strong class="purple">must</strong> match</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-08794" href="chap22.html#VUID-vkCmdCopyImage-srcImage-08794"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-08794</span><br>

If <code>srcImage</code> and <code>dstImage</code> have the same <a href="chap12.html#VkImageType">VkImageType</a>,
and one of the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> is <code>VK_REMAINING_ARRAY_LAYERS</code>, the other
member <strong class="purple">must</strong> be either <code>VK_REMAINING_ARRAY_LAYERS</code> or equal to the
<code>arrayLayers</code> member of the <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> used to create
the image minus <code>baseArrayLayer</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01790" href="chap22.html#VUID-vkCmdCopyImage-srcImage-01790"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01790</span><br>

If <code>srcImage</code> and <code>dstImage</code> are both of type
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>extent.depth</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01791" href="chap22.html#VUID-vkCmdCopyImage-srcImage-01791"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01791</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, and <code>dstImage</code>
is of type <code>VK_IMAGE_TYPE_3D</code>, then for each element of
<code>pRegions</code>, <code>extent.depth</code> <strong class="purple">must</strong> equal
<code>srcSubresource.layerCount</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01792" href="chap22.html#VUID-vkCmdCopyImage-dstImage-01792"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01792</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, and <code>srcImage</code>
is of type <code>VK_IMAGE_TYPE_3D</code>, then for each element of
<code>pRegions</code>, <code>extent.depth</code> <strong class="purple">must</strong> equal
<code>dstSubresource.layerCount</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstOffset-00150" href="chap22.html#VUID-vkCmdCopyImage-dstOffset-00150"></a> <span class="vuid">VUID-vkCmdCopyImage-dstOffset-00150</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>dstOffset.x</code>)</span>, where <code>extent</code>
is <a href="chap53.html#formats-size-compatibility">adjusted for size-compatibility</a>,
<strong class="purple">must</strong> both be greater than or equal to <code>0</code> and less than or equal to the
width of the specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstOffset-00151" href="chap22.html#VUID-vkCmdCopyImage-dstOffset-00151"></a> <span class="vuid">VUID-vkCmdCopyImage-dstOffset-00151</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>dstOffset.y</code>)</span>, where <code>extent</code>
is <a href="chap53.html#formats-size-compatibility">adjusted for size-compatibility</a>,
<strong class="purple">must</strong> both be greater than or equal to <code>0</code> and less than or equal to the
height of the specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-00152" href="chap22.html#VUID-vkCmdCopyImage-dstImage-00152"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-00152</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.y</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-10908" href="chap22.html#VUID-vkCmdCopyImage-srcImage-10908"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-10908</span><br>

If either the <a href="chap53.html#VkFormat">VkFormat</a> of each of <code>srcImage</code> and
<code>dstImage</code> is not a <a href="chap58.html">compressed image
format</a>, and <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for
each element of <code>pRegions</code>, <code>extent.height</code> <strong class="purple">must</strong> be <code>1</code>, where
<code>extent</code> is <a href="chap53.html#formats-size-compatibility">adjusted for
size-compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstOffset-00153" href="chap22.html#VUID-vkCmdCopyImage-dstOffset-00153"></a> <span class="vuid">VUID-vkCmdCopyImage-dstOffset-00153</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>dstOffset.z</code>)</span>, where <code>extent</code>
is <a href="chap53.html#formats-size-compatibility">adjusted for size-compatibility</a>,
<strong class="purple">must</strong> both be greater than or equal to <code>0</code> and less than or equal to the
depth of the specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-07278" href="chap22.html#VUID-vkCmdCopyImage-pRegions-07278"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-07278</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
width</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-07279" href="chap22.html#VUID-vkCmdCopyImage-pRegions-07279"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-07279</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
height</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-07280" href="chap22.html#VUID-vkCmdCopyImage-pRegions-07280"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-07280</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.z</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
depth</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-07281" href="chap22.html#VUID-vkCmdCopyImage-pRegions-07281"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-07281</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
width</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-07282" href="chap22.html#VUID-vkCmdCopyImage-pRegions-07282"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-07282</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
height</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-07283" href="chap22.html#VUID-vkCmdCopyImage-pRegions-07283"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-07283</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.z</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
depth</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01728" href="chap22.html#VUID-vkCmdCopyImage-srcImage-01728"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01728</span><br>

For each element of <code>pRegions</code>, if the sum of <code>srcOffset.x</code> and
<code>extent.width</code> does not equal the width of the subresource specified
by <code>srcSubresource</code>, <code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01729" href="chap22.html#VUID-vkCmdCopyImage-srcImage-01729"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01729</span><br>

For each element of <code>pRegions</code>, if the sum of <code>srcOffset.y</code> and
<code>extent.height</code> does not equal the height of the subresource
specified by <code>srcSubresource</code>, <code>extent.height</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
height</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01730" href="chap22.html#VUID-vkCmdCopyImage-srcImage-01730"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01730</span><br>

For each element of <code>pRegions</code>, if the sum of <code>srcOffset.z</code> and
<code>extent.depth</code> does not equal the depth of the subresource specified
by <code>srcSubresource</code>, <code>extent.depth</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent depth</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-aspect-06662" href="chap22.html#VUID-vkCmdCopyImage-aspect-06662"></a> <span class="vuid">VUID-vkCmdCopyImage-aspect-06662</span><br>

If the <code>aspect</code> member of any element of <code>pRegions</code> includes any
flag other than <code>VK_IMAGE_ASPECT_STENCIL_BIT</code> or <code>srcImage</code> was
not created with <a href="chap12.html#VkImageStencilUsageCreateInfo">separate stencil
usage</a>,
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> <strong class="purple">must</strong> have been included in the
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code> used to create <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-aspect-06663" href="chap22.html#VUID-vkCmdCopyImage-aspect-06663"></a> <span class="vuid">VUID-vkCmdCopyImage-aspect-06663</span><br>

If the <code>aspect</code> member of any element of <code>pRegions</code> includes any
flag other than <code>VK_IMAGE_ASPECT_STENCIL_BIT</code> or <code>dstImage</code> was
not created with <a href="chap12.html#VkImageStencilUsageCreateInfo">separate stencil
usage</a>,
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> <strong class="purple">must</strong> have been included in the
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code> used to create <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-aspect-06664" href="chap22.html#VUID-vkCmdCopyImage-aspect-06664"></a> <span class="vuid">VUID-vkCmdCopyImage-aspect-06664</span><br>

If the <code>aspect</code> member of any element of <code>pRegions</code> includes
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, and <code>srcImage</code> was created with
<a href="chap12.html#VkImageStencilUsageCreateInfo">separate stencil usage</a>,
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> <strong class="purple">must</strong> have been included in the
<a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> used to create
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-aspect-06665" href="chap22.html#VUID-vkCmdCopyImage-aspect-06665"></a> <span class="vuid">VUID-vkCmdCopyImage-aspect-06665</span><br>

If the <code>aspect</code> member of any element of <code>pRegions</code> includes
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, and <code>dstImage</code> was created with
<a href="chap12.html#VkImageStencilUsageCreateInfo">separate stencil usage</a>,
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> <strong class="purple">must</strong> have been included in the
<a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> used to create
<code>dstImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-07966" href="chap22.html#VUID-vkCmdCopyImage-srcImage-07966"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-07966</span><br>

If <code>srcImage</code> is non-sparse then the image
or the specified <em>disjoint</em> plane
<strong class="purple">must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcSubresource-07967" href="chap22.html#VUID-vkCmdCopyImage-srcSubresource-07967"></a> <span class="vuid">VUID-vkCmdCopyImage-srcSubresource-07967</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcSubresource-07968" href="chap22.html#VUID-vkCmdCopyImage-srcSubresource-07968"></a> <span class="vuid">VUID-vkCmdCopyImage-srcSubresource-07968</span><br>

If <code>srcSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>,
<span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code>
<strong class="purple">must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-07969" href="chap22.html#VUID-vkCmdCopyImage-srcImage-07969"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-07969</span><br>

<code>srcImage</code> <strong class="purple">must</strong> not have been created with <code>flags</code>
containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-07966" href="chap22.html#VUID-vkCmdCopyImage-dstImage-07966"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-07966</span><br>

If <code>dstImage</code> is non-sparse then the image
or the specified <em>disjoint</em> plane
<strong class="purple">must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstSubresource-07967" href="chap22.html#VUID-vkCmdCopyImage-dstSubresource-07967"></a> <span class="vuid">VUID-vkCmdCopyImage-dstSubresource-07967</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstSubresource-07968" href="chap22.html#VUID-vkCmdCopyImage-dstSubresource-07968"></a> <span class="vuid">VUID-vkCmdCopyImage-dstSubresource-07968</span><br>

If <code>dstSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>,
<span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code>
<strong class="purple">must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-07969" href="chap22.html#VUID-vkCmdCopyImage-dstImage-07969"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-07969</span><br>

<code>dstImage</code> <strong class="purple">must</strong> not have been created with <code>flags</code>
containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-parameter" href="chap22.html#VUID-vkCmdCopyImage-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-parameter" href="chap22.html#VUID-vkCmdCopyImage-srcImage-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-parameter</span><br>
 <code>srcImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImageLayout-parameter" href="chap22.html#VUID-vkCmdCopyImage-srcImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-parameter" href="chap22.html#VUID-vkCmdCopyImage-dstImage-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-parameter</span><br>
 <code>dstImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImageLayout-parameter" href="chap22.html#VUID-vkCmdCopyImage-dstImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-parameter" href="chap22.html#VUID-vkCmdCopyImage-pRegions-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap22.html#VkImageCopy">VkImageCopy</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-recording" href="chap22.html#VUID-vkCmdCopyImage-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-cmdpool" href="chap22.html#VUID-vkCmdCopyImage-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support VK_QUEUE_COMPUTE_BIT, VK_QUEUE_GRAPHICS_BIT, or VK_QUEUE_TRANSFER_BIT operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-renderpass" href="chap22.html#VUID-vkCmdCopyImage-renderpass"></a> <span class="vuid">VUID-vkCmdCopyImage-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-videocoding" href="chap22.html#VUID-vkCmdCopyImage-videocoding"></a> <span class="vuid">VUID-vkCmdCopyImage-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-regionCount-arraylength" href="chap22.html#VUID-vkCmdCopyImage-regionCount-arraylength"></a> <span class="vuid">VUID-vkCmdCopyImage-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-commonparent" href="chap22.html#VUID-vkCmdCopyImage-commonparent"></a> <span class="vuid">VUID-vkCmdCopyImage-commonparent</span><br>
 Each of <code>commandBuffer</code>, <code>dstImage</code>, and <code>srcImage</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap45.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VK_QUEUE_COMPUTE_BIT<br>
VK_QUEUE_GRAPHICS_BIT<br>
VK_QUEUE_TRANSFER_BIT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Conditional Rendering</div>
<div class="paragraph">
<p>vkCmdCopyImage is not affected by <a href="chap23.html#drawing-conditional-rendering">conditional rendering</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageCopy</code> structure is defined as:</p>
</div>
<div id="VkImageCopy" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageCopy</span> <span class="p">{</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">srcSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">srcOffset</span><span class="p">;</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">dstSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">dstOffset</span><span class="p">;</span>
    <span class="n">VkExtent3D</span>                  <span class="n">extent</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageCopy</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>srcSubresource</code> and <code>dstSubresource</code> are
<a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structures specifying the image
subresources of the images used for the source and destination image
data, respectively.</p>
</li>
<li>
<p><code>srcOffset</code> and <code>dstOffset</code> select the initial <code>x</code>, <code>y</code>,
and <code>z</code> offsets in texels of the sub-regions of the source and
destination image data.</p>
</li>
<li>
<p><code>extent</code> is the size in texels of the image to copy in <code>width</code>,
<code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCopy-apiVersion-07940" href="chap22.html#VUID-VkImageCopy-apiVersion-07940"></a> <span class="vuid">VUID-VkImageCopy-apiVersion-07940</span><br>

If
    the <a href="chap60.html#VK_KHR_sampler_ycbcr_conversion">VK_KHR_sampler_ycbcr_conversion</a> extension is not enabled,
and
    <a href="chap5.html#VkPhysicalDeviceProperties">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
    1.1,
the
    <code>aspectMask</code> member of <code>srcSubresource</code> and <code>dstSubresource</code>
    <strong class="purple">must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageCopy-apiVersion-07941" href="chap22.html#VUID-VkImageCopy-apiVersion-07941"></a> <span class="vuid">VUID-VkImageCopy-apiVersion-07941</span><br>

If
    the <a href="chap60.html#VK_KHR_maintenance1">VK_KHR_maintenance1</a> extension is not enabled,
and
    <a href="chap5.html#VkPhysicalDeviceProperties">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
    1.1,
the
    <code>layerCount</code> member of <code>srcSubresource</code> and <code>dstSubresource</code>
    <strong class="purple">must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageCopy-extent-06668" href="chap22.html#VUID-VkImageCopy-extent-06668"></a> <span class="vuid">VUID-VkImageCopy-extent-06668</span><br>

<code>extent.width</code> <strong class="purple">must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkImageCopy-extent-06669" href="chap22.html#VUID-VkImageCopy-extent-06669"></a> <span class="vuid">VUID-VkImageCopy-extent-06669</span><br>

<code>extent.height</code> <strong class="purple">must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkImageCopy-extent-06670" href="chap22.html#VUID-VkImageCopy-extent-06670"></a> <span class="vuid">VUID-VkImageCopy-extent-06670</span><br>

<code>extent.depth</code> <strong class="purple">must</strong> not be 0</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCopy-srcSubresource-parameter" href="chap22.html#VUID-VkImageCopy-srcSubresource-parameter"></a> <span class="vuid">VUID-VkImageCopy-srcSubresource-parameter</span><br>
 <code>srcSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageCopy-dstSubresource-parameter" href="chap22.html#VUID-VkImageCopy-dstSubresource-parameter"></a> <span class="vuid">VUID-VkImageCopy-dstSubresource-parameter</span><br>
 <code>dstSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageSubresourceLayers</code> structure is defined as:</p>
</div>
<div id="VkImageSubresourceLayers" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageSubresourceLayers</span> <span class="p">{</span>
    <span class="n">VkImageAspectFlags</span>    <span class="n">aspectMask</span><span class="p">;</span>
    <span class="kt">uint32_t</span>              <span class="n">mipLevel</span><span class="p">;</span>
    <span class="kt">uint32_t</span>              <span class="n">baseArrayLayer</span><span class="p">;</span>
    <span class="kt">uint32_t</span>              <span class="n">layerCount</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageSubresourceLayers</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>aspectMask</code> is a combination of <a href="chap12.html#VkImageAspectFlagBits">VkImageAspectFlagBits</a>,
selecting the color, depth and/or stencil aspects to be copied.</p>
</li>
<li>
<p><code>mipLevel</code> is the mipmap level to copy</p>
</li>
<li>
<p><code>baseArrayLayer</code> and <code>layerCount</code> are the starting layer and
number of layers to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageSubresourceLayers-aspectMask-00167" href="chap22.html#VUID-VkImageSubresourceLayers-aspectMask-00167"></a> <span class="vuid">VUID-VkImageSubresourceLayers-aspectMask-00167</span><br>

If <code>aspectMask</code> contains <code>VK_IMAGE_ASPECT_COLOR_BIT</code>, it <strong class="purple">must</strong>
not contain either of <code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceLayers-aspectMask-00168" href="chap22.html#VUID-VkImageSubresourceLayers-aspectMask-00168"></a> <span class="vuid">VUID-VkImageSubresourceLayers-aspectMask-00168</span><br>

<code>aspectMask</code> <strong class="purple">must</strong> not contain <code>VK_IMAGE_ASPECT_METADATA_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceLayers-aspectMask-02247" href="chap22.html#VUID-VkImageSubresourceLayers-aspectMask-02247"></a> <span class="vuid">VUID-VkImageSubresourceLayers-aspectMask-02247</span><br>

<code>aspectMask</code> <strong class="purple">must</strong> not include
<code>VK_IMAGE_ASPECT_MEMORY_PLANE<em>_i_</em>BIT_EXT</code> for any index <em>i</em></p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceLayers-layerCount-09243" href="chap22.html#VUID-VkImageSubresourceLayers-layerCount-09243"></a> <span class="vuid">VUID-VkImageSubresourceLayers-layerCount-09243</span><br>


If the <a href="chap51.html#features-maintenance5"><code>maintenance5</code></a> feature is not
enabled,
<code>layerCount</code> <strong class="purple">must</strong> not be <code>VK_REMAINING_ARRAY_LAYERS</code></p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceLayers-layerCount-01700" href="chap22.html#VUID-VkImageSubresourceLayers-layerCount-01700"></a> <span class="vuid">VUID-VkImageSubresourceLayers-layerCount-01700</span><br>

If <code>layerCount</code> is not <code>VK_REMAINING_ARRAY_LAYERS</code>, it <strong class="purple">must</strong> be
greater than 0</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageSubresourceLayers-aspectMask-parameter" href="chap22.html#VUID-VkImageSubresourceLayers-aspectMask-parameter"></a> <span class="vuid">VUID-VkImageSubresourceLayers-aspectMask-parameter</span><br>
 <code>aspectMask</code> <strong class="purple">must</strong> be a valid combination of <a href="chap12.html#VkImageAspectFlagBits">VkImageAspectFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceLayers-aspectMask-requiredbitmask" href="chap22.html#VUID-VkImageSubresourceLayers-aspectMask-requiredbitmask"></a> <span class="vuid">VUID-VkImageSubresourceLayers-aspectMask-requiredbitmask</span><br>
 <code>aspectMask</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>A more extensible version of the copy image command is defined below.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data between image objects, call:</p>
</div>
<div id="vkCmdCopyImage2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyImage2</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCopyImageInfo2</span><span class="o">*</span>                     <span class="n">pCopyImageInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkCmdCopyImage2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyImage2KHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCopyImageInfo2</span><span class="o">*</span>                     <span class="n">pCopyImageInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pCopyImageInfo</code> is a pointer to a <a href="chap22.html#VkCopyImageInfo2">VkCopyImageInfo2</a> structure
describing the copy parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally identical to <a href="chap22.html#vkCmdCopyImage">vkCmdCopyImage</a>, but includes
extensible sub-structures that include <code>sType</code> and <code>pNext</code>
parameters, allowing them to be more easily extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage2-commandBuffer-01825" href="chap22.html#VUID-vkCmdCopyImage2-commandBuffer-01825"></a> <span class="vuid">VUID-vkCmdCopyImage2-commandBuffer-01825</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>srcImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2-commandBuffer-01826" href="chap22.html#VUID-vkCmdCopyImage2-commandBuffer-01826"></a> <span class="vuid">VUID-vkCmdCopyImage2-commandBuffer-01826</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2-commandBuffer-01827" href="chap22.html#VUID-vkCmdCopyImage2-commandBuffer-01827"></a> <span class="vuid">VUID-vkCmdCopyImage2-commandBuffer-01827</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong class="purple">must</strong> not be an unprotected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2-commandBuffer-10217" href="chap22.html#VUID-vkCmdCopyImage2-commandBuffer-10217"></a> <span class="vuid">VUID-vkCmdCopyImage2-commandBuffer-10217</span><br>

If the queue family used to create the <a href="chap6.html#VkCommandPool">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code>, for each element of <code>pCopyImageInfo-&gt;pRegions</code>, where
the <code>aspectMask</code> member of <code>srcSubresource</code> is
<code>VK_IMAGE_ASPECT_COLOR_BIT</code>, the <code>aspectMask</code> of
<code>dstSubresource</code> <strong class="purple">must</strong> not be <code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2-commandBuffer-10218" href="chap22.html#VUID-vkCmdCopyImage2-commandBuffer-10218"></a> <span class="vuid">VUID-vkCmdCopyImage2-commandBuffer-10218</span><br>

If the queue family used to create the <a href="chap6.html#VkCommandPool">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code>, for each element of <code>pCopyImageInfo-&gt;pRegions</code>, where
the <code>aspectMask</code> member of <code>dstSubresource</code> is
<code>VK_IMAGE_ASPECT_COLOR_BIT</code> then the <code>aspectMask</code> of
<code>srcSubresource</code> <strong class="purple">must</strong> not be <code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage2-commandBuffer-parameter" href="chap22.html#VUID-vkCmdCopyImage2-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage2-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2-pCopyImageInfo-parameter" href="chap22.html#VUID-vkCmdCopyImage2-pCopyImageInfo-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage2-pCopyImageInfo-parameter</span><br>
 <code>pCopyImageInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap22.html#VkCopyImageInfo2">VkCopyImageInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2-commandBuffer-recording" href="chap22.html#VUID-vkCmdCopyImage2-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyImage2-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2-commandBuffer-cmdpool" href="chap22.html#VUID-vkCmdCopyImage2-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyImage2-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support VK_QUEUE_COMPUTE_BIT, VK_QUEUE_GRAPHICS_BIT, or VK_QUEUE_TRANSFER_BIT operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2-renderpass" href="chap22.html#VUID-vkCmdCopyImage2-renderpass"></a> <span class="vuid">VUID-vkCmdCopyImage2-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2-videocoding" href="chap22.html#VUID-vkCmdCopyImage2-videocoding"></a> <span class="vuid">VUID-vkCmdCopyImage2-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap45.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VK_QUEUE_COMPUTE_BIT<br>
VK_QUEUE_GRAPHICS_BIT<br>
VK_QUEUE_TRANSFER_BIT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Conditional Rendering</div>
<div class="paragraph">
<p>vkCmdCopyImage2 is not affected by <a href="chap23.html#drawing-conditional-rendering">conditional rendering</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyImageInfo2</code> structure is defined as:</p>
</div>
<div id="VkCopyImageInfo2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkCopyImageInfo2</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>        <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>            <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImage</span>                <span class="n">srcImage</span><span class="p">;</span>
    <span class="n">VkImageLayout</span>          <span class="n">srcImageLayout</span><span class="p">;</span>
    <span class="n">VkImage</span>                <span class="n">dstImage</span><span class="p">;</span>
    <span class="n">VkImageLayout</span>          <span class="n">dstImageLayout</span><span class="p">;</span>
    <span class="kt">uint32_t</span>               <span class="n">regionCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkImageCopy2</span><span class="o">*</span>    <span class="n">pRegions</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkCopyImageInfo2</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkCopyImageInfo2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="k">typedef</span> <span class="n">VkCopyImageInfo2</span> <span class="n">VkCopyImageInfo2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="chap3.html#VkStructureType">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the current layout of the source image
subresource.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the current layout of the destination image
subresource.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap22.html#VkImageCopy2">VkImageCopy2</a> structures
specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageInfo2-pRegions-00124" href="chap22.html#VUID-VkCopyImageInfo2-pRegions-00124"></a> <span class="vuid">VUID-VkCopyImageInfo2-pRegions-00124</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong class="purple">must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01995" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-01995"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01995</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>srcImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImageLayout-00128" href="chap22.html#VUID-VkCopyImageInfo2-srcImageLayout-00128"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImageLayout-00128</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImageLayout-01917" href="chap22.html#VUID-VkCopyImageInfo2-srcImageLayout-01917"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImageLayout-01917</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-09460" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-09460"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-09460</span><br>

If <code>srcImage</code> and <code>dstImage</code> are the same, and any elements of
<code>pRegions</code> contains the <code>srcSubresource</code> and
<code>dstSubresource</code> with matching <code>mipLevel</code> and overlapping array
layers, then the <code>srcImageLayout</code> and <code>dstImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_GENERAL</code>
or <code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-01996" href="chap22.html#VUID-VkCopyImageInfo2-dstImage-01996"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-01996</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>dstImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImageLayout-00133" href="chap22.html#VUID-VkCopyImageInfo2-dstImageLayout-00133"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImageLayout-00133</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImageLayout-01395" href="chap22.html#VUID-VkCopyImageInfo2-dstImageLayout-01395"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImageLayout-01395</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01548" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-01548"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01548</span><br>

If the <a href="chap53.html#VkFormat">VkFormat</a> of each of <code>srcImage</code> and <code>dstImage</code> is
not a <a href="chap53.html#formats-multiplanar">multi-planar format</a>, the
<a href="chap53.html#VkFormat">VkFormat</a> of each of <code>srcImage</code> and <code>dstImage</code> <strong class="purple">must</strong> be
<a href="chap53.html#formats-size-compatibility">size-compatible</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-None-01549" href="chap22.html#VUID-VkCopyImageInfo2-None-01549"></a> <span class="vuid">VUID-VkCopyImageInfo2-None-01549</span><br>

 In a copy to or from a plane of a
<a href="chap53.html#formats-multiplanar">multi-planar image</a>, the <a href="chap53.html#VkFormat">VkFormat</a> of the
image and plane <strong class="purple">must</strong> be compatible according to
<a href="chap53.html#formats-compatible-planes">the description of compatible planes</a> for
the plane being copied</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-09247" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-09247"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-09247</span><br>

If the <a href="chap53.html#VkFormat">VkFormat</a> of each of <code>srcImage</code> and <code>dstImage</code> is a
<a href="chap58.html">compressed image format</a>, the formats <strong class="purple">must</strong>
have the same texel block extent</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-00136" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-00136"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-00136</span><br>

The sample count of <code>srcImage</code> and <code>dstImage</code> <strong class="purple">must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcOffset-01783" href="chap22.html#VUID-VkCopyImageInfo2-srcOffset-01783"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcOffset-01783</span><br>

The <code>srcOffset</code> and <code>extent</code> members of each element of
<code>pRegions</code> <strong class="purple">must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>’s command pool’s queue family, as described in
<a href="chap5.html#VkQueueFamilyProperties">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstOffset-01784" href="chap22.html#VUID-VkCopyImageInfo2-dstOffset-01784"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstOffset-01784</span><br>

The <code>dstOffset</code> and <code>extent</code> members of each element of
<code>pRegions</code> <strong class="purple">must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>’s command pool’s queue family, as described in
<a href="chap5.html#VkQueueFamilyProperties">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01551" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-01551"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01551</span><br>

    If neither <code>srcImage</code> nor <code>dstImage</code> has a
    <a href="chap53.html#formats-multiplanar">multi-planar format</a>
and the <a href="chap51.html#features-maintenance8"><code>maintenance8</code></a> feature is not enabled
    then for each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
    and <code>dstSubresource.aspectMask</code> <strong class="purple">must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcSubresource-10214" href="chap22.html#VUID-VkCopyImageInfo2-srcSubresource-10214"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcSubresource-10214</span><br>

If <code>srcSubresource.aspectMask</code> is <code>VK_IMAGE_ASPECT_COLOR_BIT</code>,
then <code>dstSubresource.aspectMask</code> <strong class="purple">must</strong> not contain both
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> and <code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstSubresource-10215" href="chap22.html#VUID-VkCopyImageInfo2-dstSubresource-10215"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstSubresource-10215</span><br>

If <code>dstSubresource.aspectMask</code> is <code>VK_IMAGE_ASPECT_COLOR_BIT</code>,
then <code>srcSubresource.aspectMask</code> <strong class="purple">must</strong> not contain both
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> and <code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-08713" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-08713"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-08713</span><br>

If <code>srcImage</code> has a <a href="chap53.html#formats-multiplanar">multi-planar format</a>,
then for each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong class="purple">must</strong> be a single valid <a href="chap53.html#formats-multiplanar-image-aspect">multi-planar
aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-08714" href="chap22.html#VUID-VkCopyImageInfo2-dstImage-08714"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-08714</span><br>

If <code>dstImage</code> has a <a href="chap53.html#formats-multiplanar">multi-planar format</a>,
then for each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong class="purple">must</strong> be a single valid <a href="chap53.html#formats-multiplanar-image-aspect">multi-planar
aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01556" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-01556"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01556</span><br>

If <code>srcImage</code> has a <a href="chap53.html#formats-multiplanar">multi-planar format</a> and
the <code>dstImage</code> does not have a multi-planar image format, then for
each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-01557" href="chap22.html#VUID-VkCopyImageInfo2-dstImage-01557"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-01557</span><br>

If <code>dstImage</code> has a <a href="chap53.html#formats-multiplanar">multi-planar format</a> and
the <code>srcImage</code> does not have a multi-planar image format, then for
each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcSubresource-10211" href="chap22.html#VUID-VkCopyImageInfo2-srcSubresource-10211"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcSubresource-10211</span><br>

If <code>srcSubresource.aspectMask</code> is <code>VK_IMAGE_ASPECT_COLOR_BIT</code>
and <code>dstSubresource.aspectMask</code> is <code>VK_IMAGE_ASPECT_DEPTH_BIT</code>
or <code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, then the <a href="chap53.html#VkFormat">VkFormat</a> values of
<code>srcImage</code> and <code>dstImage</code> <strong class="purple">must</strong> be compatible according to
<a href="chap53.html#formats-compatible-zs-color">the list of compatible depth-stencil and
color formats</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcSubresource-10212" href="chap22.html#VUID-VkCopyImageInfo2-srcSubresource-10212"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcSubresource-10212</span><br>

If <code>srcSubresource.aspectMask</code> is <code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code> and <code>dstSubresource.aspectMask</code> is
<code>VK_IMAGE_ASPECT_COLOR_BIT</code>, then the <a href="chap53.html#VkFormat">VkFormat</a> values of
<code>srcImage</code> and <code>dstImage</code> <strong class="purple">must</strong> be compatible according to
<a href="chap53.html#formats-compatible-zs-color">the list of compatible depth-stencil and
color formats</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-apiVersion-07932" href="chap22.html#VUID-VkCopyImageInfo2-apiVersion-07932"></a> <span class="vuid">VUID-VkCopyImageInfo2-apiVersion-07932</span><br>

    If
    the <a href="chap60.html#VK_KHR_maintenance1">VK_KHR_maintenance1</a> extension is not enabled,
or
    <a href="chap5.html#VkPhysicalDeviceProperties">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
    1.1,
and
    either <code>srcImage</code> or <code>dstImage</code> is of type
    <code>VK_IMAGE_TYPE_3D</code>, then for each element of <code>pRegions</code>,
    <code>srcSubresource.baseArrayLayer</code> and
    <code>dstSubresource.baseArrayLayer</code> <strong class="purple">must</strong> both be <code>0</code>, and
    <code>srcSubresource.layerCount</code> and <code>dstSubresource.layerCount</code>
    <strong class="purple">must</strong> both be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-04443" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-04443"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-04443</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>srcSubresource.baseArrayLayer</code> <strong class="purple">must</strong> be
<code>0</code> and <code>srcSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-04444" href="chap22.html#VUID-VkCopyImageInfo2-dstImage-04444"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-04444</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>dstSubresource.baseArrayLayer</code> <strong class="purple">must</strong> be
<code>0</code> and <code>dstSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-aspectMask-00142" href="chap22.html#VUID-VkCopyImageInfo2-aspectMask-00142"></a> <span class="vuid">VUID-VkCopyImageInfo2-aspectMask-00142</span><br>

For each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-aspectMask-00143" href="chap22.html#VUID-VkCopyImageInfo2-aspectMask-00143"></a> <span class="vuid">VUID-VkCopyImageInfo2-aspectMask-00143</span><br>

For each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcOffset-00144" href="chap22.html#VUID-VkCopyImageInfo2-srcOffset-00144"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcOffset-00144</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>srcOffset.x</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcOffset-00145" href="chap22.html#VUID-VkCopyImageInfo2-srcOffset-00145"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcOffset-00145</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>srcOffset.y</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-00146" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-00146"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-00146</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>extent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcOffset-00147" href="chap22.html#VUID-VkCopyImageInfo2-srcOffset-00147"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcOffset-00147</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>srcOffset.z</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01785" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-01785"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01785</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and
<code>extent.depth</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-01786" href="chap22.html#VUID-VkCopyImageInfo2-dstImage-01786"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-01786</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.z</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-10907" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-10907"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-10907</span><br>

If either the <a href="chap53.html#VkFormat">VkFormat</a> of each of <code>srcImage</code> and
<code>dstImage</code> is not a <a href="chap58.html">compressed image
format</a>, and <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for
each element of <code>pRegions</code>, <code>extent.depth</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01787" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-01787"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01787</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.z</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-01788" href="chap22.html#VUID-VkCopyImageInfo2-dstImage-01788"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-01788</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.z</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-apiVersion-07933" href="chap22.html#VUID-VkCopyImageInfo2-apiVersion-07933"></a> <span class="vuid">VUID-VkCopyImageInfo2-apiVersion-07933</span><br>

    If
    the <a href="chap60.html#VK_KHR_maintenance1">VK_KHR_maintenance1</a> extension is not enabled,
and
    <a href="chap5.html#VkPhysicalDeviceProperties">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
    1.1,
    <code>srcImage</code> and <code>dstImage</code> <strong class="purple">must</strong> have the same <a href="chap12.html#VkImageType">VkImageType</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-apiVersion-08969" href="chap22.html#VUID-VkCopyImageInfo2-apiVersion-08969"></a> <span class="vuid">VUID-VkCopyImageInfo2-apiVersion-08969</span><br>

    If
    the <a href="chap60.html#VK_KHR_maintenance1">VK_KHR_maintenance1</a> extension is not enabled,
and
    <a href="chap5.html#VkPhysicalDeviceProperties">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
    1.1,
    <code>srcImage</code> or <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, then
    for each element of <code>pRegions</code>, <code>extent.depth</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-07743" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-07743"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-07743</span><br>

If <code>srcImage</code> and <code>dstImage</code> have a different <a href="chap12.html#VkImageType">VkImageType</a>,
and the <a href="chap51.html#features-maintenance5"><code>maintenance5</code></a> feature is not
enabled,
one <strong class="purple">must</strong> be <code>VK_IMAGE_TYPE_3D</code> and the other <strong class="purple">must</strong> be
<code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-08793" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-08793"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-08793</span><br>

If <code>srcImage</code> and <code>dstImage</code> have the same <a href="chap12.html#VkImageType">VkImageType</a>,
for each element of <code>pRegions</code>,
if neither of the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> are <code>VK_REMAINING_ARRAY_LAYERS</code>,
the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> <strong class="purple">must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-08794" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-08794"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-08794</span><br>

If <code>srcImage</code> and <code>dstImage</code> have the same <a href="chap12.html#VkImageType">VkImageType</a>,
and one of the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> is <code>VK_REMAINING_ARRAY_LAYERS</code>, the other
member <strong class="purple">must</strong> be either <code>VK_REMAINING_ARRAY_LAYERS</code> or equal to the
<code>arrayLayers</code> member of the <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> used to create
the image minus <code>baseArrayLayer</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01790" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-01790"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01790</span><br>

If <code>srcImage</code> and <code>dstImage</code> are both of type
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>extent.depth</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01791" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-01791"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01791</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, and <code>dstImage</code>
is of type <code>VK_IMAGE_TYPE_3D</code>, then for each element of
<code>pRegions</code>, <code>extent.depth</code> <strong class="purple">must</strong> equal
<code>srcSubresource.layerCount</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-01792" href="chap22.html#VUID-VkCopyImageInfo2-dstImage-01792"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-01792</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, and <code>srcImage</code>
is of type <code>VK_IMAGE_TYPE_3D</code>, then for each element of
<code>pRegions</code>, <code>extent.depth</code> <strong class="purple">must</strong> equal
<code>dstSubresource.layerCount</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstOffset-00150" href="chap22.html#VUID-VkCopyImageInfo2-dstOffset-00150"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstOffset-00150</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>dstOffset.x</code>)</span>, where <code>extent</code>
is <a href="chap53.html#formats-size-compatibility">adjusted for size-compatibility</a>,
<strong class="purple">must</strong> both be greater than or equal to <code>0</code> and less than or equal to the
width of the specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstOffset-00151" href="chap22.html#VUID-VkCopyImageInfo2-dstOffset-00151"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstOffset-00151</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>dstOffset.y</code>)</span>, where <code>extent</code>
is <a href="chap53.html#formats-size-compatibility">adjusted for size-compatibility</a>,
<strong class="purple">must</strong> both be greater than or equal to <code>0</code> and less than or equal to the
height of the specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-00152" href="chap22.html#VUID-VkCopyImageInfo2-dstImage-00152"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-00152</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.y</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-10908" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-10908"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-10908</span><br>

If either the <a href="chap53.html#VkFormat">VkFormat</a> of each of <code>srcImage</code> and
<code>dstImage</code> is not a <a href="chap58.html">compressed image
format</a>, and <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for
each element of <code>pRegions</code>, <code>extent.height</code> <strong class="purple">must</strong> be <code>1</code>, where
<code>extent</code> is <a href="chap53.html#formats-size-compatibility">adjusted for
size-compatibility</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstOffset-00153" href="chap22.html#VUID-VkCopyImageInfo2-dstOffset-00153"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstOffset-00153</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>dstOffset.z</code>)</span>, where <code>extent</code>
is <a href="chap53.html#formats-size-compatibility">adjusted for size-compatibility</a>,
<strong class="purple">must</strong> both be greater than or equal to <code>0</code> and less than or equal to the
depth of the specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-pRegions-07278" href="chap22.html#VUID-VkCopyImageInfo2-pRegions-07278"></a> <span class="vuid">VUID-VkCopyImageInfo2-pRegions-07278</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
width</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-pRegions-07279" href="chap22.html#VUID-VkCopyImageInfo2-pRegions-07279"></a> <span class="vuid">VUID-VkCopyImageInfo2-pRegions-07279</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
height</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-pRegions-07280" href="chap22.html#VUID-VkCopyImageInfo2-pRegions-07280"></a> <span class="vuid">VUID-VkCopyImageInfo2-pRegions-07280</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.z</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
depth</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-pRegions-07281" href="chap22.html#VUID-VkCopyImageInfo2-pRegions-07281"></a> <span class="vuid">VUID-VkCopyImageInfo2-pRegions-07281</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
width</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-pRegions-07282" href="chap22.html#VUID-VkCopyImageInfo2-pRegions-07282"></a> <span class="vuid">VUID-VkCopyImageInfo2-pRegions-07282</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
height</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-pRegions-07283" href="chap22.html#VUID-VkCopyImageInfo2-pRegions-07283"></a> <span class="vuid">VUID-VkCopyImageInfo2-pRegions-07283</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.z</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
depth</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01728" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-01728"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01728</span><br>

For each element of <code>pRegions</code>, if the sum of <code>srcOffset.x</code> and
<code>extent.width</code> does not equal the width of the subresource specified
by <code>srcSubresource</code>, <code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01729" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-01729"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01729</span><br>

For each element of <code>pRegions</code>, if the sum of <code>srcOffset.y</code> and
<code>extent.height</code> does not equal the height of the subresource
specified by <code>srcSubresource</code>, <code>extent.height</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
height</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01730" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-01730"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01730</span><br>

For each element of <code>pRegions</code>, if the sum of <code>srcOffset.z</code> and
<code>extent.depth</code> does not equal the depth of the subresource specified
by <code>srcSubresource</code>, <code>extent.depth</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent depth</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-aspect-06662" href="chap22.html#VUID-VkCopyImageInfo2-aspect-06662"></a> <span class="vuid">VUID-VkCopyImageInfo2-aspect-06662</span><br>

If the <code>aspect</code> member of any element of <code>pRegions</code> includes any
flag other than <code>VK_IMAGE_ASPECT_STENCIL_BIT</code> or <code>srcImage</code> was
not created with <a href="chap12.html#VkImageStencilUsageCreateInfo">separate stencil
usage</a>,
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> <strong class="purple">must</strong> have been included in the
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code> used to create <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-aspect-06663" href="chap22.html#VUID-VkCopyImageInfo2-aspect-06663"></a> <span class="vuid">VUID-VkCopyImageInfo2-aspect-06663</span><br>

If the <code>aspect</code> member of any element of <code>pRegions</code> includes any
flag other than <code>VK_IMAGE_ASPECT_STENCIL_BIT</code> or <code>dstImage</code> was
not created with <a href="chap12.html#VkImageStencilUsageCreateInfo">separate stencil
usage</a>,
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> <strong class="purple">must</strong> have been included in the
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code> used to create <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-aspect-06664" href="chap22.html#VUID-VkCopyImageInfo2-aspect-06664"></a> <span class="vuid">VUID-VkCopyImageInfo2-aspect-06664</span><br>

If the <code>aspect</code> member of any element of <code>pRegions</code> includes
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, and <code>srcImage</code> was created with
<a href="chap12.html#VkImageStencilUsageCreateInfo">separate stencil usage</a>,
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> <strong class="purple">must</strong> have been included in the
<a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> used to create
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-aspect-06665" href="chap22.html#VUID-VkCopyImageInfo2-aspect-06665"></a> <span class="vuid">VUID-VkCopyImageInfo2-aspect-06665</span><br>

If the <code>aspect</code> member of any element of <code>pRegions</code> includes
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, and <code>dstImage</code> was created with
<a href="chap12.html#VkImageStencilUsageCreateInfo">separate stencil usage</a>,
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> <strong class="purple">must</strong> have been included in the
<a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> used to create
<code>dstImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-07966" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-07966"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-07966</span><br>

If <code>srcImage</code> is non-sparse then the image
or the specified <em>disjoint</em> plane
<strong class="purple">must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcSubresource-07967" href="chap22.html#VUID-VkCopyImageInfo2-srcSubresource-07967"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcSubresource-07967</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcSubresource-07968" href="chap22.html#VUID-VkCopyImageInfo2-srcSubresource-07968"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcSubresource-07968</span><br>

If <code>srcSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>,
<span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code>
<strong class="purple">must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-07969" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-07969"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-07969</span><br>

<code>srcImage</code> <strong class="purple">must</strong> not have been created with <code>flags</code>
containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-07966" href="chap22.html#VUID-VkCopyImageInfo2-dstImage-07966"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-07966</span><br>

If <code>dstImage</code> is non-sparse then the image
or the specified <em>disjoint</em> plane
<strong class="purple">must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstSubresource-07967" href="chap22.html#VUID-VkCopyImageInfo2-dstSubresource-07967"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstSubresource-07967</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstSubresource-07968" href="chap22.html#VUID-VkCopyImageInfo2-dstSubresource-07968"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstSubresource-07968</span><br>

If <code>dstSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>,
<span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code>
<strong class="purple">must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-07969" href="chap22.html#VUID-VkCopyImageInfo2-dstImage-07969"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-07969</span><br>

<code>dstImage</code> <strong class="purple">must</strong> not have been created with <code>flags</code>
containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageInfo2-sType-sType" href="chap22.html#VUID-VkCopyImageInfo2-sType-sType"></a> <span class="vuid">VUID-VkCopyImageInfo2-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_COPY_IMAGE_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-pNext-pNext" href="chap22.html#VUID-VkCopyImageInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkCopyImageInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-parameter" href="chap22.html#VUID-VkCopyImageInfo2-srcImage-parameter"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-parameter</span><br>
 <code>srcImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImageLayout-parameter" href="chap22.html#VUID-VkCopyImageInfo2-srcImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-parameter" href="chap22.html#VUID-VkCopyImageInfo2-dstImage-parameter"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-parameter</span><br>
 <code>dstImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImageLayout-parameter" href="chap22.html#VUID-VkCopyImageInfo2-dstImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-pRegions-parameter" href="chap22.html#VUID-VkCopyImageInfo2-pRegions-parameter"></a> <span class="vuid">VUID-VkCopyImageInfo2-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap22.html#VkImageCopy2">VkImageCopy2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-regionCount-arraylength" href="chap22.html#VUID-VkCopyImageInfo2-regionCount-arraylength"></a> <span class="vuid">VUID-VkCopyImageInfo2-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-commonparent" href="chap22.html#VUID-VkCopyImageInfo2-commonparent"></a> <span class="vuid">VUID-VkCopyImageInfo2-commonparent</span><br>
 Both of <code>dstImage</code>, and <code>srcImage</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageCopy2</code> structure is defined as:</p>
</div>
<div id="VkImageCopy2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageCopy2</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>             <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                 <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">srcSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">srcOffset</span><span class="p">;</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">dstSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">dstOffset</span><span class="p">;</span>
    <span class="n">VkExtent3D</span>                  <span class="n">extent</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageCopy2</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkImageCopy2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="k">typedef</span> <span class="n">VkImageCopy2</span> <span class="n">VkImageCopy2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="chap3.html#VkStructureType">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcSubresource</code> and <code>dstSubresource</code> are
<a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structures specifying the image
subresources of the images used for the source and destination image
data, respectively.</p>
</li>
<li>
<p><code>srcOffset</code> and <code>dstOffset</code> select the initial <code>x</code>, <code>y</code>,
and <code>z</code> offsets in texels of the sub-regions of the source and
destination image data.</p>
</li>
<li>
<p><code>extent</code> is the size in texels of the image to copy in <code>width</code>,
<code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCopy2-apiVersion-07940" href="chap22.html#VUID-VkImageCopy2-apiVersion-07940"></a> <span class="vuid">VUID-VkImageCopy2-apiVersion-07940</span><br>

If
    the <a href="chap60.html#VK_KHR_sampler_ycbcr_conversion">VK_KHR_sampler_ycbcr_conversion</a> extension is not enabled,
and
    <a href="chap5.html#VkPhysicalDeviceProperties">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
    1.1,
the
    <code>aspectMask</code> member of <code>srcSubresource</code> and <code>dstSubresource</code>
    <strong class="purple">must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageCopy2-apiVersion-07941" href="chap22.html#VUID-VkImageCopy2-apiVersion-07941"></a> <span class="vuid">VUID-VkImageCopy2-apiVersion-07941</span><br>

If
    the <a href="chap60.html#VK_KHR_maintenance1">VK_KHR_maintenance1</a> extension is not enabled,
and
    <a href="chap5.html#VkPhysicalDeviceProperties">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
    1.1,
the
    <code>layerCount</code> member of <code>srcSubresource</code> and <code>dstSubresource</code>
    <strong class="purple">must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageCopy2-extent-06668" href="chap22.html#VUID-VkImageCopy2-extent-06668"></a> <span class="vuid">VUID-VkImageCopy2-extent-06668</span><br>

<code>extent.width</code> <strong class="purple">must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkImageCopy2-extent-06669" href="chap22.html#VUID-VkImageCopy2-extent-06669"></a> <span class="vuid">VUID-VkImageCopy2-extent-06669</span><br>

<code>extent.height</code> <strong class="purple">must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkImageCopy2-extent-06670" href="chap22.html#VUID-VkImageCopy2-extent-06670"></a> <span class="vuid">VUID-VkImageCopy2-extent-06670</span><br>

<code>extent.depth</code> <strong class="purple">must</strong> not be 0</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCopy2-sType-sType" href="chap22.html#VUID-VkImageCopy2-sType-sType"></a> <span class="vuid">VUID-VkImageCopy2-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_COPY_2</code></p>
</li>
<li>
<p><a id="VUID-VkImageCopy2-pNext-pNext" href="chap22.html#VUID-VkImageCopy2-pNext-pNext"></a> <span class="vuid">VUID-VkImageCopy2-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkImageCopy2-srcSubresource-parameter" href="chap22.html#VUID-VkImageCopy2-srcSubresource-parameter"></a> <span class="vuid">VUID-VkImageCopy2-srcSubresource-parameter</span><br>
 <code>srcSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageCopy2-dstSubresource-parameter" href="chap22.html#VUID-VkImageCopy2-dstSubresource-parameter"></a> <span class="vuid">VUID-VkImageCopy2-dstSubresource-parameter</span><br>
 <code>dstSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="copies-buffers-images"><a class="anchor" href="chap22.html#copies-buffers-images"></a>22.3. Copying Data Between Buffers and Images</h3>
<div class="paragraph">
<p>Data <strong class="purple">can</strong> be copied between buffers and images, enabling applications to
load and store data between images and application-defined offsets in buffer
memory.</p>
</div>
<div id="copies-buffers-images-addressing" class="paragraph">
<p>When copying between a buffer and an image, texels in the image and bytes in
the buffer are accessed as follows.</p>
</div>
<div class="paragraph">
<p>Texels at each coordinate <span class="eq">(x,y,z,layer)</span> in the image subresource are
accessed, where:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">x</span> is in the range <span class="eq">[<code>imageOffset.x</code>,
<code>imageOffset.x</code> +  <code>imageExtent.width</code>)</span>,</p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">y</span> is in the range <span class="eq">[<code>imageOffset.y</code>,
<code>imageOffset.y</code> +  <code>imageExtent.height</code>)</span>,</p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">z</span> is in the range <span class="eq">[<code>imageOffset.z</code>,
<code>imageOffset.z</code> +  <code>imageExtent.depth</code>)</span>,</p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">layer</span> is in the range
<span class="eq">[<code>imageSubresource.baseArrayLayer</code>,
<code>imageSubresource.baseArrayLayer</code> + 
<code>imageSubresource.layerCount</code>)</span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For each <span class="eq">(x,y,z,layer)</span> coordinate in the image, bytes in the buffer
are accessed at offsets in the range <span class="eq">[texelOffset, texelOffset + 
blockSize)</span>, where:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">texelOffset = <code>bufferOffset</code> +  (⌊(x -
imageOffset.x) / blockWidth⌋ × blockSize) + 
(⌊(y - imageOffset.y) / blockHeight⌋ ×
rowExtent) +  (⌊(z - imageOffset.z) /
blockDepth⌋ × sliceExtent) +  ((layer -
<code>imageSubresource.baseArrayLayer</code>) × layerExtent)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">rowExtent = ⌈ max(<code>bufferRowLength</code>,
<code>imageExtent.width</code>) / blockWidth ⌉ × blockSize</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">sliceExtent = ⌈ max(<code>bufferImageHeight</code>,
<code>imageExtent.height</code>) / blockHeight ⌉ ×
rowExtent</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">layerExtent = ⌈ <code>imageExtent.depth</code> / blockDepth
⌉ × sliceExtent</span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>and where <span class="eq">blockSize</span>, <span class="eq">blockWidth</span>, <span class="eq">blockHeight</span>, and
<span class="eq">blockDepth</span> are the <a href="chap53.html#formats-compatibility-classes">texel block size
and extents</a> of the image’s format.</p>
</div>
<div id="copies-buffers-images-rotation-addressing" class="paragraph">
<div class="title">Image Rotation Addressing</div>
<p>If a rotation is specified by <a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>, the 2D
region of the image being addressed is rotated around the offset, and texels
at each coordinate <span class="eq">(x',y',z',layer)</span> are accessed in the image
subresource instead, where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code> is specified, no rotation
is performed:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">x'</span> is in the same range as <span class="eq">x</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">y'</span> is in the same range as <span class="eq">y</span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>If <code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code> is specified</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">x'</span> is in the range <span class="eq">[<code>imageOffset.x</code> - 
<code>imageExtent.height</code>, <code>imageOffset.x</code>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">y'</span> is in the range <span class="eq">[<code>imageOffset.y</code>,
<code>imageOffset.y</code> +  <code>imageExtent.width</code>)</span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>If <code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code> is specified:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">x'</span> is in the range <span class="eq">[<code>imageOffset.x</code> - 
<code>imageExtent.width</code>, <code>imageOffset.x</code>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">y'</span> is in the range <span class="eq">[<code>imageOffset.y</code> - 
<code>imageExtent.height</code>, <code>imageOffset.y</code>)</span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>If <code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code> is specified:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">x'</span> is in the range <span class="eq">[<code>imageOffset.x</code>,
<code>imageOffset.x</code> +  <code>imageExtent.height</code>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">y'</span> is in the range <span class="eq">[<code>imageOffset.y</code> - 
<code>imageExtent.width</code>, <code>imageOffset.y</code>)</span></p>
</dd>
</dl>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Buffer addressing calculations are unaffected by this rotation.</p>
</div>
<div id="copies-buffers-images-depth-stencil" class="paragraph">
<p>When copying between a buffer and the depth or stencil aspect of an image,
data in the buffer is assumed to be laid out as separate planes rather than
interleaved.
Addressing calculations are thus performed for a different format than the
base image, according to the aspect, as described in the following table:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 95%;">
<caption class="title">Table 29. Depth/Stencil Aspect Copy Table</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Base Format</th>
<th class="tableblock halign-center valign-top">Depth Aspect Format</th>
<th class="tableblock halign-center valign-top">Stencil Aspect Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D16_UNORM</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D16_UNORM</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_X8_D24_UNORM_PACK32</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_X8_D24_UNORM_PACK32</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D32_SFLOAT</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D32_SFLOAT</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_S8_UINT</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_S8_UINT</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D16_UNORM_S8_UINT</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D16_UNORM</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_S8_UINT</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D24_UNORM_S8_UINT</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_X8_D24_UNORM_PACK32</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_S8_UINT</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D32_SFLOAT_S8_UINT</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D32_SFLOAT</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_S8_UINT</code></p></td>
</tr>
</tbody>
</table>
<div id="copies-buffers-images-multi-planar" class="paragraph">
<p>When copying between a buffer and any plane of a <a href="chap53.html#formats-multiplanar">multi-planar image</a>, addressing calculations are performed using the
<a href="chap53.html#formats-compatible-planes">compatible format for that plane</a>, rather than
the format of the multi-planar image.</p>
</div>
<div class="paragraph">
<p>Each texel block is copied from one resource to the other according to the
above addressing equations.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from a buffer object to an image object, call:</p>
</div>
<div id="vkCmdCopyBufferToImage" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyBufferToImage</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkBuffer</span>                                    <span class="n">srcBuffer</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">dstImage</span><span class="p">,</span>
    <span class="n">VkImageLayout</span>                               <span class="n">dstImageLayout</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">regionCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkBufferImageCopy</span><span class="o">*</span>                    <span class="n">pRegions</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>srcBuffer</code> is the source buffer.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the copy.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap22.html#VkBufferImageCopy">VkBufferImageCopy</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each source region specified by <code>pRegions</code> is copied from the source
buffer to the destination region of the destination image according to the
<a href="chap22.html#copies-buffers-images-addressing">addressing calculations</a> for each
resource.
If any of the specified regions in <code>srcBuffer</code> overlaps in memory with
any of the specified regions in <code>dstImage</code>, values read from those
overlapping regions are undefined.
If any region accesses a depth aspect in <code>dstImage</code>
and the <code><a href="chap60.html#VK_EXT_depth_range_unrestricted">VK_EXT_depth_range_unrestricted</a></code> extension is not enabled,
values copied from <code>srcBuffer</code> outside of the range <span class="eq">[0,1]</span> will be
written as undefined values to the destination image.</p>
</div>
<div class="paragraph">
<p>Copy regions for the image <strong class="purple">must</strong> be aligned to a multiple of the texel block
extent in each dimension, except at the edges of the image, where region
extents <strong class="purple">must</strong> match the edge of the image.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07966" href="chap22.html#VUID-vkCmdCopyBufferToImage-dstImage-07966"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07966</span><br>

If <code>dstImage</code> is non-sparse then the image
or the specified <em>disjoint</em> plane
<strong class="purple">must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageSubresource-07967" href="chap22.html#VUID-vkCmdCopyBufferToImage-imageSubresource-07967"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageSubresource-07967</span><br>

The <code>imageSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageSubresource-07968" href="chap22.html#VUID-vkCmdCopyBufferToImage-imageSubresource-07968"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageSubresource-07968</span><br>

If <code>imageSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>,
<span class="eq"><code>imageSubresource.baseArrayLayer</code> + 
<code>imageSubresource.layerCount</code></span> of each element of <code>pRegions</code>
<strong class="purple">must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07969" href="chap22.html#VUID-vkCmdCopyBufferToImage-dstImage-07969"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07969</span><br>

<code>dstImage</code> <strong class="purple">must</strong> not have been created with <code>flags</code>
containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageSubresource-07971" href="chap22.html#VUID-vkCmdCopyBufferToImage-imageSubresource-07971"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageSubresource-07971</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.x</code> and
<span class="eq">(<code>imageExtent.width</code> +  <code>imageOffset.x</code>)</span> <strong class="purple">must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the width
of the specified <code>imageSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageSubresource-07972" href="chap22.html#VUID-vkCmdCopyBufferToImage-imageSubresource-07972"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageSubresource-07972</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.y</code> and
<span class="eq">(<code>imageExtent.height</code> +  <code>imageOffset.y</code>)</span> <strong class="purple">must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the
height of the specified <code>imageSubresource</code> of <code>dstImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07973" href="chap22.html#VUID-vkCmdCopyBufferToImage-dstImage-07973"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07973</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-01828" href="chap22.html#VUID-vkCmdCopyBufferToImage-commandBuffer-01828"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-01828</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>srcBuffer</code> <strong class="purple">must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-01829" href="chap22.html#VUID-vkCmdCopyBufferToImage-commandBuffer-01829"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-01829</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-01830" href="chap22.html#VUID-vkCmdCopyBufferToImage-commandBuffer-01830"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-01830</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong class="purple">must</strong> not be an unprotected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-07737" href="chap22.html#VUID-vkCmdCopyBufferToImage-commandBuffer-07737"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-07737</span><br>

If the queue family used to create the <a href="chap6.html#VkCommandPool">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code> or <code>VK_QUEUE_COMPUTE_BIT</code>, the
<code>bufferOffset</code> member of any element of <code>pRegions</code> <strong class="purple">must</strong> be a
multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageOffset-07738" href="chap22.html#VUID-vkCmdCopyBufferToImage-imageOffset-07738"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageOffset-07738</span><br>

The <code>imageOffset</code> and <code>imageExtent</code> members of each element of
<code>pRegions</code> <strong class="purple">must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>’s command pool’s queue family, as described in
<a href="chap5.html#VkQueueFamilyProperties">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-07739" href="chap22.html#VUID-vkCmdCopyBufferToImage-commandBuffer-07739"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-07739</span><br>

If the queue family used to create the <a href="chap6.html#VkCommandPool">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code>, for each element of <code>pRegions</code>, the
<code>aspectMask</code> member of <code>imageSubresource</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or <code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-pRegions-00171" href="chap22.html#VUID-vkCmdCopyBufferToImage-pRegions-00171"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-pRegions-00171</span><br>

<code>srcBuffer</code> <strong class="purple">must</strong> be large enough to contain all buffer locations
that are accessed according to <a href="chap22.html#copies-buffers-images-addressing">Buffer
and Image Addressing</a>, for each element of <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-pRegions-00173" href="chap22.html#VUID-vkCmdCopyBufferToImage-pRegions-00173"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-pRegions-00173</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong class="purple">must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-srcBuffer-00174" href="chap22.html#VUID-vkCmdCopyBufferToImage-srcBuffer-00174"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-srcBuffer-00174</span><br>

<code>srcBuffer</code> <strong class="purple">must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-01997" href="chap22.html#VUID-vkCmdCopyBufferToImage-dstImage-01997"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-01997</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>dstImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-srcBuffer-00176" href="chap22.html#VUID-vkCmdCopyBufferToImage-srcBuffer-00176"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-srcBuffer-00176</span><br>

If <code>srcBuffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-00177" href="chap22.html#VUID-vkCmdCopyBufferToImage-dstImage-00177"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-00177</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImageLayout-00180" href="chap22.html#VUID-vkCmdCopyBufferToImage-dstImageLayout-00180"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImageLayout-00180</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImageLayout-01396" href="chap22.html#VUID-vkCmdCopyBufferToImage-dstImageLayout-01396"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImageLayout-01396</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-pRegions-07931" href="chap22.html#VUID-vkCmdCopyBufferToImage-pRegions-07931"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-pRegions-07931</span><br>

If <a href="chap60.html#VK_EXT_depth_range_unrestricted">VK_EXT_depth_range_unrestricted</a> is not enabled, for
each element of <code>pRegions</code> whose <code>imageSubresource</code> contains a
depth aspect, the data in <code>srcBuffer</code> <strong class="purple">must</strong> be in the range
<span class="eq">[0,1]</span></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07979" href="chap22.html#VUID-vkCmdCopyBufferToImage-dstImage-07979"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07979</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>imageOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>imageExtent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageOffset-09104" href="chap22.html#VUID-vkCmdCopyBufferToImage-imageOffset-09104"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageOffset-09104</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> and
<span class="eq">(<code>imageExtent.depth</code> +  <code>imageOffset.z</code>)</span> <strong class="purple">must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the depth
of the specified <code>imageSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07980" href="chap22.html#VUID-vkCmdCopyBufferToImage-dstImage-07980"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07980</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>imageOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and <code>imageExtent.depth</code> <strong class="purple">must</strong>
be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07274" href="chap22.html#VUID-vkCmdCopyBufferToImage-dstImage-07274"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07274</span><br>

For each element of <code>pRegions</code>,
if <a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code>,
<code>imageOffset.x</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageOffset-10051" href="chap22.html#VUID-vkCmdCopyBufferToImage-imageOffset-10051"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageOffset-10051</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>, and <code>imageOffset.x</code>
does not equal the width of the subresource specified by
<code>imageSubresource</code>, <code>imageOffset.x</code> <strong class="purple">must</strong> be a multiple of
the <a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07275" href="chap22.html#VUID-vkCmdCopyBufferToImage-dstImage-07275"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07275</span><br>

For each element of <code>pRegions</code>,
if <a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>,
<code>imageOffset.y</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageOffset-10052" href="chap22.html#VUID-vkCmdCopyBufferToImage-imageOffset-10052"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageOffset-10052</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, and <code>imageOffset.y</code>
does not equal the height of the subresource specified by
<code>imageSubresource</code>, <code>imageOffset.y</code> <strong class="purple">must</strong> be a multiple of
the <a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07276" href="chap22.html#VUID-vkCmdCopyBufferToImage-dstImage-07276"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07276</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
depth</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-00207" href="chap22.html#VUID-vkCmdCopyBufferToImage-dstImage-00207"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-00207</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code>,
the sum of <code>imageOffset.x</code> and <code>extent.width</code> does not equal
the width of the subresource specified by <code>imageSubresource</code>,
<code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageOffset-10053" href="chap22.html#VUID-vkCmdCopyBufferToImage-imageOffset-10053"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageOffset-10053</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>, the difference of
<code>imageOffset.x</code> and <code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageOffset-10054" href="chap22.html#VUID-vkCmdCopyBufferToImage-imageOffset-10054"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageOffset-10054</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, the difference of
<code>imageOffset.x</code> and <code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageOffset-10055" href="chap22.html#VUID-vkCmdCopyBufferToImage-imageOffset-10055"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageOffset-10055</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code>, the sum of
<code>imageOffset.x</code> and <code>extent.height</code> does not equal the width
of the subresource specified by <code>imageSubresource</code>,
<code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-00208" href="chap22.html#VUID-vkCmdCopyBufferToImage-dstImage-00208"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-00208</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code>, and
the sum of <code>imageOffset.y</code> and <code>extent.height</code> does not equal
the height of the subresource specified by <code>imageSubresource</code>,
<code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageOffset-10056" href="chap22.html#VUID-vkCmdCopyBufferToImage-imageOffset-10056"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageOffset-10056</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>, the sum of
<code>imageOffset.y</code> and <code>extent.width</code> does not equal the height
of the subresource specified by <code>imageSubresource</code>,
<code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageOffset-10057" href="chap22.html#VUID-vkCmdCopyBufferToImage-imageOffset-10057"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageOffset-10057</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, the difference of
<code>imageOffset.y</code> and <code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageOffset-10058" href="chap22.html#VUID-vkCmdCopyBufferToImage-imageOffset-10058"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageOffset-10058</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code>, the difference of
<code>imageOffset.y</code> and <code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-00209" href="chap22.html#VUID-vkCmdCopyBufferToImage-dstImage-00209"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-00209</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.z</code>
and <code>extent.depth</code> does not equal the depth of the subresource
specified by <code>srcSubresource</code>, <code>extent.depth</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
depth</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageSubresource-09105" href="chap22.html#VUID-vkCmdCopyBufferToImage-imageSubresource-09105"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageSubresource-09105</span><br>

For each element of <code>pRegions</code>, <code>imageSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07981" href="chap22.html#VUID-vkCmdCopyBufferToImage-dstImage-07981"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07981</span><br>

If <code>dstImage</code> has a <a href="chap53.html#formats-multiplanar">multi-planar
format</a>, then for each element of <code>pRegions</code>,
<code>imageSubresource.aspectMask</code> <strong class="purple">must</strong> be a single valid
<a href="chap53.html#formats-multiplanar-image-aspect">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07983" href="chap22.html#VUID-vkCmdCopyBufferToImage-dstImage-07983"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07983</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each
element of <code>pRegions</code>, <code>imageSubresource.baseArrayLayer</code> <strong class="purple">must</strong>
be <code>0</code> and <code>imageSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-bufferRowLength-09106" href="chap22.html#VUID-vkCmdCopyBufferToImage-bufferRowLength-09106"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-bufferRowLength-09106</span><br>

For each element of <code>pRegions</code>, <code>bufferRowLength</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
width</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-bufferImageHeight-09107" href="chap22.html#VUID-vkCmdCopyBufferToImage-bufferImageHeight-09107"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-bufferImageHeight-09107</span><br>

For each element of <code>pRegions</code>, <code>bufferImageHeight</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
height</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-bufferRowLength-09108" href="chap22.html#VUID-vkCmdCopyBufferToImage-bufferRowLength-09108"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-bufferRowLength-09108</span><br>

For each element of <code>pRegions</code>, <code>bufferRowLength</code> divided by
the <a href="chap53.html#formats-compatibility-classes">texel block extent width</a> and then
multiplied by the texel block size of <code>dstImage</code> <strong class="purple">must</strong> be less
than or equal to <span class="eq">2<sup>31</sup>-1</span></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07975" href="chap22.html#VUID-vkCmdCopyBufferToImage-dstImage-07975"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07975</span><br>

If <code>dstImage</code> does not have either a depth/stencil format
or a <a href="chap53.html#formats-multiplanar">multi-planar format</a>,
then for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block size</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07976" href="chap22.html#VUID-vkCmdCopyBufferToImage-dstImage-07976"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07976</span><br>

If <code>dstImage</code> has a <a href="chap53.html#formats-multiplanar">multi-planar
format</a>, then for each element of <code>pRegions</code>, <code>bufferOffset</code>
<strong class="purple">must</strong> be a multiple of the element size of the compatible format for the
format and the <code>aspectMask</code> of the <code>imageSubresource</code> as defined
in <a href="chap53.html#formats-compatible-planes">Compatible Formats of Planes of Multi-Planar Formats</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07978" href="chap22.html#VUID-vkCmdCopyBufferToImage-dstImage-07978"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07978</span><br>

If <code>dstImage</code> has a depth/stencil format, the <code>bufferOffset</code>
member of any element of <code>pRegions</code> <strong class="purple">must</strong> be a multiple of <code>4</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-parameter" href="chap22.html#VUID-vkCmdCopyBufferToImage-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-srcBuffer-parameter" href="chap22.html#VUID-vkCmdCopyBufferToImage-srcBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-srcBuffer-parameter</span><br>
 <code>srcBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-parameter" href="chap22.html#VUID-vkCmdCopyBufferToImage-dstImage-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-parameter</span><br>
 <code>dstImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImageLayout-parameter" href="chap22.html#VUID-vkCmdCopyBufferToImage-dstImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-pRegions-parameter" href="chap22.html#VUID-vkCmdCopyBufferToImage-pRegions-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap22.html#VkBufferImageCopy">VkBufferImageCopy</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-recording" href="chap22.html#VUID-vkCmdCopyBufferToImage-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-cmdpool" href="chap22.html#VUID-vkCmdCopyBufferToImage-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support VK_QUEUE_COMPUTE_BIT, VK_QUEUE_GRAPHICS_BIT, or VK_QUEUE_TRANSFER_BIT operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-renderpass" href="chap22.html#VUID-vkCmdCopyBufferToImage-renderpass"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-videocoding" href="chap22.html#VUID-vkCmdCopyBufferToImage-videocoding"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-regionCount-arraylength" href="chap22.html#VUID-vkCmdCopyBufferToImage-regionCount-arraylength"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commonparent" href="chap22.html#VUID-vkCmdCopyBufferToImage-commonparent"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commonparent</span><br>
 Each of <code>commandBuffer</code>, <code>dstImage</code>, and <code>srcBuffer</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap45.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VK_QUEUE_COMPUTE_BIT<br>
VK_QUEUE_GRAPHICS_BIT<br>
VK_QUEUE_TRANSFER_BIT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Conditional Rendering</div>
<div class="paragraph">
<p>vkCmdCopyBufferToImage is not affected by <a href="chap23.html#drawing-conditional-rendering">conditional rendering</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from an image object to a buffer object, call:</p>
</div>
<div id="vkCmdCopyImageToBuffer" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyImageToBuffer</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">srcImage</span><span class="p">,</span>
    <span class="n">VkImageLayout</span>                               <span class="n">srcImageLayout</span><span class="p">,</span>
    <span class="n">VkBuffer</span>                                    <span class="n">dstBuffer</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">regionCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkBufferImageCopy</span><span class="o">*</span>                    <span class="n">pRegions</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the copy.</p>
</li>
<li>
<p><code>dstBuffer</code> is the destination buffer.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap22.html#VkBufferImageCopy">VkBufferImageCopy</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each source region specified by <code>pRegions</code> is copied from the source
image to the destination region of the destination buffer according to the
<a href="chap22.html#copies-buffers-images-addressing">addressing calculations</a> for each
resource.
If any of the specified regions in <code>srcImage</code> overlaps in memory with
any of the specified regions in <code>dstBuffer</code>, values read from those
overlapping regions are undefined.</p>
</div>
<div class="paragraph">
<p>Copy regions for the image <strong class="purple">must</strong> be aligned to a multiple of the texel block
extent in each dimension, except at the edges of the image, where region
extents <strong class="purple">must</strong> match the edge of the image.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07966" href="chap22.html#VUID-vkCmdCopyImageToBuffer-srcImage-07966"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07966</span><br>

If <code>srcImage</code> is non-sparse then the image
or the specified <em>disjoint</em> plane
<strong class="purple">must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageSubresource-07967" href="chap22.html#VUID-vkCmdCopyImageToBuffer-imageSubresource-07967"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageSubresource-07967</span><br>

The <code>imageSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageSubresource-07968" href="chap22.html#VUID-vkCmdCopyImageToBuffer-imageSubresource-07968"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageSubresource-07968</span><br>

If <code>imageSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>,
<span class="eq"><code>imageSubresource.baseArrayLayer</code> + 
<code>imageSubresource.layerCount</code></span> of each element of <code>pRegions</code>
<strong class="purple">must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07969" href="chap22.html#VUID-vkCmdCopyImageToBuffer-srcImage-07969"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07969</span><br>

<code>srcImage</code> <strong class="purple">must</strong> not have been created with <code>flags</code>
containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageSubresource-07971" href="chap22.html#VUID-vkCmdCopyImageToBuffer-imageSubresource-07971"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageSubresource-07971</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.x</code> and
<span class="eq">(<code>imageExtent.width</code> +  <code>imageOffset.x</code>)</span> <strong class="purple">must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the width
of the specified <code>imageSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageSubresource-07972" href="chap22.html#VUID-vkCmdCopyImageToBuffer-imageSubresource-07972"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageSubresource-07972</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.y</code> and
<span class="eq">(<code>imageExtent.height</code> +  <code>imageOffset.y</code>)</span> <strong class="purple">must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the
height of the specified <code>imageSubresource</code> of <code>srcImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07973" href="chap22.html#VUID-vkCmdCopyImageToBuffer-srcImage-07973"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07973</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-01831" href="chap22.html#VUID-vkCmdCopyImageToBuffer-commandBuffer-01831"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-01831</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>srcImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-01832" href="chap22.html#VUID-vkCmdCopyImageToBuffer-commandBuffer-01832"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-01832</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong class="purple">must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-01833" href="chap22.html#VUID-vkCmdCopyImageToBuffer-commandBuffer-01833"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-01833</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong class="purple">must</strong> not be an unprotected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-07746" href="chap22.html#VUID-vkCmdCopyImageToBuffer-commandBuffer-07746"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-07746</span><br>

If the queue family used to create the <a href="chap6.html#VkCommandPool">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code> or <code>VK_QUEUE_COMPUTE_BIT</code>, the
<code>bufferOffset</code> member of any element of <code>pRegions</code> <strong class="purple">must</strong> be a
multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageOffset-07747" href="chap22.html#VUID-vkCmdCopyImageToBuffer-imageOffset-07747"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageOffset-07747</span><br>

The <code>imageOffset</code> and <code>imageExtent</code> members of each element of
<code>pRegions</code> <strong class="purple">must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>’s command pool’s queue family, as described in
<a href="chap5.html#VkQueueFamilyProperties">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-10216" href="chap22.html#VUID-vkCmdCopyImageToBuffer-commandBuffer-10216"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-10216</span><br>

If the queue family used to create the <a href="chap6.html#VkCommandPool">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code>, for each element of <code>pRegions</code>, the
<code>aspectMask</code> member of <code>imageSubresource</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or <code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-pRegions-00183" href="chap22.html#VUID-vkCmdCopyImageToBuffer-pRegions-00183"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-pRegions-00183</span><br>

<code>dstBuffer</code> <strong class="purple">must</strong> be large enough to contain all buffer locations
that are accessed according to <a href="chap22.html#copies-buffers-images-addressing">Buffer
and Image Addressing</a>, for each element of <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-pRegions-00184" href="chap22.html#VUID-vkCmdCopyImageToBuffer-pRegions-00184"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-pRegions-00184</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong class="purple">must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-00186" href="chap22.html#VUID-vkCmdCopyImageToBuffer-srcImage-00186"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-00186</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-01998" href="chap22.html#VUID-vkCmdCopyImageToBuffer-srcImage-01998"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-01998</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>srcImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-dstBuffer-00191" href="chap22.html#VUID-vkCmdCopyImageToBuffer-dstBuffer-00191"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-dstBuffer-00191</span><br>

<code>dstBuffer</code> <strong class="purple">must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-dstBuffer-00192" href="chap22.html#VUID-vkCmdCopyImageToBuffer-dstBuffer-00192"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-dstBuffer-00192</span><br>

If <code>dstBuffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImageLayout-00189" href="chap22.html#VUID-vkCmdCopyImageToBuffer-srcImageLayout-00189"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImageLayout-00189</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImageLayout-01397" href="chap22.html#VUID-vkCmdCopyImageToBuffer-srcImageLayout-01397"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImageLayout-01397</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07979" href="chap22.html#VUID-vkCmdCopyImageToBuffer-srcImage-07979"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07979</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>imageOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>imageExtent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageOffset-09104" href="chap22.html#VUID-vkCmdCopyImageToBuffer-imageOffset-09104"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageOffset-09104</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> and
<span class="eq">(<code>imageExtent.depth</code> +  <code>imageOffset.z</code>)</span> <strong class="purple">must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the depth
of the specified <code>imageSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07980" href="chap22.html#VUID-vkCmdCopyImageToBuffer-srcImage-07980"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07980</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>imageOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and <code>imageExtent.depth</code> <strong class="purple">must</strong>
be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07274" href="chap22.html#VUID-vkCmdCopyImageToBuffer-srcImage-07274"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07274</span><br>

For each element of <code>pRegions</code>,
if <a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code>,
<code>imageOffset.x</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageOffset-10051" href="chap22.html#VUID-vkCmdCopyImageToBuffer-imageOffset-10051"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageOffset-10051</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>, and <code>imageOffset.x</code>
does not equal the width of the subresource specified by
<code>imageSubresource</code>, <code>imageOffset.x</code> <strong class="purple">must</strong> be a multiple of
the <a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07275" href="chap22.html#VUID-vkCmdCopyImageToBuffer-srcImage-07275"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07275</span><br>

For each element of <code>pRegions</code>,
if <a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>,
<code>imageOffset.y</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageOffset-10052" href="chap22.html#VUID-vkCmdCopyImageToBuffer-imageOffset-10052"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageOffset-10052</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, and <code>imageOffset.y</code>
does not equal the height of the subresource specified by
<code>imageSubresource</code>, <code>imageOffset.y</code> <strong class="purple">must</strong> be a multiple of
the <a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07276" href="chap22.html#VUID-vkCmdCopyImageToBuffer-srcImage-07276"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07276</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
depth</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-00207" href="chap22.html#VUID-vkCmdCopyImageToBuffer-srcImage-00207"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-00207</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code>,
the sum of <code>imageOffset.x</code> and <code>extent.width</code> does not equal
the width of the subresource specified by <code>imageSubresource</code>,
<code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageOffset-10053" href="chap22.html#VUID-vkCmdCopyImageToBuffer-imageOffset-10053"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageOffset-10053</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>, the difference of
<code>imageOffset.x</code> and <code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageOffset-10054" href="chap22.html#VUID-vkCmdCopyImageToBuffer-imageOffset-10054"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageOffset-10054</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, the difference of
<code>imageOffset.x</code> and <code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageOffset-10055" href="chap22.html#VUID-vkCmdCopyImageToBuffer-imageOffset-10055"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageOffset-10055</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code>, the sum of
<code>imageOffset.x</code> and <code>extent.height</code> does not equal the width
of the subresource specified by <code>imageSubresource</code>,
<code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-00208" href="chap22.html#VUID-vkCmdCopyImageToBuffer-srcImage-00208"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-00208</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code>, and
the sum of <code>imageOffset.y</code> and <code>extent.height</code> does not equal
the height of the subresource specified by <code>imageSubresource</code>,
<code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageOffset-10056" href="chap22.html#VUID-vkCmdCopyImageToBuffer-imageOffset-10056"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageOffset-10056</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>, the sum of
<code>imageOffset.y</code> and <code>extent.width</code> does not equal the height
of the subresource specified by <code>imageSubresource</code>,
<code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageOffset-10057" href="chap22.html#VUID-vkCmdCopyImageToBuffer-imageOffset-10057"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageOffset-10057</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, the difference of
<code>imageOffset.y</code> and <code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageOffset-10058" href="chap22.html#VUID-vkCmdCopyImageToBuffer-imageOffset-10058"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageOffset-10058</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code>, the difference of
<code>imageOffset.y</code> and <code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-00209" href="chap22.html#VUID-vkCmdCopyImageToBuffer-srcImage-00209"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-00209</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.z</code>
and <code>extent.depth</code> does not equal the depth of the subresource
specified by <code>srcSubresource</code>, <code>extent.depth</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
depth</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageSubresource-09105" href="chap22.html#VUID-vkCmdCopyImageToBuffer-imageSubresource-09105"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageSubresource-09105</span><br>

For each element of <code>pRegions</code>, <code>imageSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07981" href="chap22.html#VUID-vkCmdCopyImageToBuffer-srcImage-07981"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07981</span><br>

If <code>srcImage</code> has a <a href="chap53.html#formats-multiplanar">multi-planar
format</a>, then for each element of <code>pRegions</code>,
<code>imageSubresource.aspectMask</code> <strong class="purple">must</strong> be a single valid
<a href="chap53.html#formats-multiplanar-image-aspect">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07983" href="chap22.html#VUID-vkCmdCopyImageToBuffer-srcImage-07983"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07983</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each
element of <code>pRegions</code>, <code>imageSubresource.baseArrayLayer</code> <strong class="purple">must</strong>
be <code>0</code> and <code>imageSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-bufferRowLength-09106" href="chap22.html#VUID-vkCmdCopyImageToBuffer-bufferRowLength-09106"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-bufferRowLength-09106</span><br>

For each element of <code>pRegions</code>, <code>bufferRowLength</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
width</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-bufferImageHeight-09107" href="chap22.html#VUID-vkCmdCopyImageToBuffer-bufferImageHeight-09107"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-bufferImageHeight-09107</span><br>

For each element of <code>pRegions</code>, <code>bufferImageHeight</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
height</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-bufferRowLength-09108" href="chap22.html#VUID-vkCmdCopyImageToBuffer-bufferRowLength-09108"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-bufferRowLength-09108</span><br>

For each element of <code>pRegions</code>, <code>bufferRowLength</code> divided by
the <a href="chap53.html#formats-compatibility-classes">texel block extent width</a> and then
multiplied by the texel block size of <code>srcImage</code> <strong class="purple">must</strong> be less
than or equal to <span class="eq">2<sup>31</sup>-1</span></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07975" href="chap22.html#VUID-vkCmdCopyImageToBuffer-srcImage-07975"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07975</span><br>

If <code>srcImage</code> does not have either a depth/stencil format
or a <a href="chap53.html#formats-multiplanar">multi-planar format</a>,
then for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block size</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07976" href="chap22.html#VUID-vkCmdCopyImageToBuffer-srcImage-07976"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07976</span><br>

If <code>srcImage</code> has a <a href="chap53.html#formats-multiplanar">multi-planar
format</a>, then for each element of <code>pRegions</code>, <code>bufferOffset</code>
<strong class="purple">must</strong> be a multiple of the element size of the compatible format for the
format and the <code>aspectMask</code> of the <code>imageSubresource</code> as defined
in <a href="chap53.html#formats-compatible-planes">Compatible Formats of Planes of Multi-Planar Formats</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07978" href="chap22.html#VUID-vkCmdCopyImageToBuffer-srcImage-07978"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07978</span><br>

If <code>srcImage</code> has a depth/stencil format, the <code>bufferOffset</code>
member of any element of <code>pRegions</code> <strong class="purple">must</strong> be a multiple of <code>4</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-parameter" href="chap22.html#VUID-vkCmdCopyImageToBuffer-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-parameter" href="chap22.html#VUID-vkCmdCopyImageToBuffer-srcImage-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-parameter</span><br>
 <code>srcImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImageLayout-parameter" href="chap22.html#VUID-vkCmdCopyImageToBuffer-srcImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-dstBuffer-parameter" href="chap22.html#VUID-vkCmdCopyImageToBuffer-dstBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-pRegions-parameter" href="chap22.html#VUID-vkCmdCopyImageToBuffer-pRegions-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap22.html#VkBufferImageCopy">VkBufferImageCopy</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-recording" href="chap22.html#VUID-vkCmdCopyImageToBuffer-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-cmdpool" href="chap22.html#VUID-vkCmdCopyImageToBuffer-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support VK_QUEUE_COMPUTE_BIT, VK_QUEUE_GRAPHICS_BIT, or VK_QUEUE_TRANSFER_BIT operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-renderpass" href="chap22.html#VUID-vkCmdCopyImageToBuffer-renderpass"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-videocoding" href="chap22.html#VUID-vkCmdCopyImageToBuffer-videocoding"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-regionCount-arraylength" href="chap22.html#VUID-vkCmdCopyImageToBuffer-regionCount-arraylength"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commonparent" href="chap22.html#VUID-vkCmdCopyImageToBuffer-commonparent"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commonparent</span><br>
 Each of <code>commandBuffer</code>, <code>dstBuffer</code>, and <code>srcImage</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap45.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VK_QUEUE_COMPUTE_BIT<br>
VK_QUEUE_GRAPHICS_BIT<br>
VK_QUEUE_TRANSFER_BIT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Conditional Rendering</div>
<div class="paragraph">
<p>vkCmdCopyImageToBuffer is not affected by <a href="chap23.html#drawing-conditional-rendering">conditional rendering</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>For both <a href="chap22.html#vkCmdCopyBufferToImage">vkCmdCopyBufferToImage</a> and <a href="chap22.html#vkCmdCopyImageToBuffer">vkCmdCopyImageToBuffer</a>, each
element of <code>pRegions</code> is a structure defined as:</p>
</div>
<div id="VkBufferImageCopy" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBufferImageCopy</span> <span class="p">{</span>
    <span class="n">VkDeviceSize</span>                <span class="n">bufferOffset</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                    <span class="n">bufferRowLength</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                    <span class="n">bufferImageHeight</span><span class="p">;</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">imageSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">imageOffset</span><span class="p">;</span>
    <span class="n">VkExtent3D</span>                  <span class="n">imageExtent</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBufferImageCopy</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>bufferOffset</code> is the offset in bytes from the start of the buffer
object where the image data is copied from or to.</p>
</li>
<li>
<p><code>bufferRowLength</code> and <code>bufferImageHeight</code> specify in texels a
subregion of a larger two- or three-dimensional image in buffer memory,
and control the addressing calculations.
If either of these values is zero, that aspect of the buffer memory is
considered to be tightly packed according to the <code>imageExtent</code>.</p>
</li>
<li>
<p><code>imageSubresource</code> is a <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> used to
specify the specific image subresources of the image used for the source
or destination image data.</p>
</li>
<li>
<p><code>imageOffset</code> selects the initial <code>x</code>, <code>y</code>, <code>z</code> offsets
in texels of the sub-region of the source or destination image data.</p>
</li>
<li>
<p><code>imageExtent</code> is the size in texels of the image to copy in
<code>width</code>, <code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferImageCopy-bufferRowLength-09101" href="chap22.html#VUID-VkBufferImageCopy-bufferRowLength-09101"></a> <span class="vuid">VUID-VkBufferImageCopy-bufferRowLength-09101</span><br>

<code>bufferRowLength</code> <strong class="purple">must</strong> be <code>0</code>, or greater than or equal to the
<code>width</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy-bufferImageHeight-09102" href="chap22.html#VUID-VkBufferImageCopy-bufferImageHeight-09102"></a> <span class="vuid">VUID-VkBufferImageCopy-bufferImageHeight-09102</span><br>

<code>bufferImageHeight</code> <strong class="purple">must</strong> be <code>0</code>, or greater than or equal to the
<code>height</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy-aspectMask-09103" href="chap22.html#VUID-VkBufferImageCopy-aspectMask-09103"></a> <span class="vuid">VUID-VkBufferImageCopy-aspectMask-09103</span><br>

The <code>aspectMask</code> member of <code>imageSubresource</code> <strong class="purple">must</strong> only have a
single bit set</p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy-imageExtent-06659" href="chap22.html#VUID-VkBufferImageCopy-imageExtent-06659"></a> <span class="vuid">VUID-VkBufferImageCopy-imageExtent-06659</span><br>

<code>imageExtent.width</code> <strong class="purple">must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy-imageExtent-06660" href="chap22.html#VUID-VkBufferImageCopy-imageExtent-06660"></a> <span class="vuid">VUID-VkBufferImageCopy-imageExtent-06660</span><br>

<code>imageExtent.height</code> <strong class="purple">must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy-imageExtent-06661" href="chap22.html#VUID-VkBufferImageCopy-imageExtent-06661"></a> <span class="vuid">VUID-VkBufferImageCopy-imageExtent-06661</span><br>

<code>imageExtent.depth</code> <strong class="purple">must</strong> not be 0</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferImageCopy-imageSubresource-parameter" href="chap22.html#VUID-VkBufferImageCopy-imageSubresource-parameter"></a> <span class="vuid">VUID-VkBufferImageCopy-imageSubresource-parameter</span><br>
 <code>imageSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>More extensible versions of the commands to copy between buffers and images
are defined below.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from a buffer object to an image object, call:</p>
</div>
<div id="vkCmdCopyBufferToImage2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyBufferToImage2</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCopyBufferToImageInfo2</span><span class="o">*</span>             <span class="n">pCopyBufferToImageInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkCmdCopyBufferToImage2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyBufferToImage2KHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCopyBufferToImageInfo2</span><span class="o">*</span>             <span class="n">pCopyBufferToImageInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pCopyBufferToImageInfo</code> is a pointer to a
<a href="chap22.html#VkCopyBufferToImageInfo2">VkCopyBufferToImageInfo2</a> structure describing the copy parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally identical to <a href="chap22.html#vkCmdCopyBufferToImage">vkCmdCopyBufferToImage</a>, but
includes extensible sub-structures that include <code>sType</code> and <code>pNext</code>
parameters, allowing them to be more easily extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-commandBuffer-01828" href="chap22.html#VUID-vkCmdCopyBufferToImage2-commandBuffer-01828"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-commandBuffer-01828</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>srcBuffer</code> <strong class="purple">must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-commandBuffer-01829" href="chap22.html#VUID-vkCmdCopyBufferToImage2-commandBuffer-01829"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-commandBuffer-01829</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-commandBuffer-01830" href="chap22.html#VUID-vkCmdCopyBufferToImage2-commandBuffer-01830"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-commandBuffer-01830</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong class="purple">must</strong> not be an unprotected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-commandBuffer-07737" href="chap22.html#VUID-vkCmdCopyBufferToImage2-commandBuffer-07737"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-commandBuffer-07737</span><br>

If the queue family used to create the <a href="chap6.html#VkCommandPool">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code> or <code>VK_QUEUE_COMPUTE_BIT</code>, the
<code>bufferOffset</code> member of any element of <code>pCopyBufferToImageInfo-&gt;pRegions</code> <strong class="purple">must</strong> be a
multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-imageOffset-07738" href="chap22.html#VUID-vkCmdCopyBufferToImage2-imageOffset-07738"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-imageOffset-07738</span><br>

The <code>imageOffset</code> and <code>imageExtent</code> members of each element of
<code>pCopyBufferToImageInfo-&gt;pRegions</code> <strong class="purple">must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>’s command pool’s queue family, as described in
<a href="chap5.html#VkQueueFamilyProperties">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-commandBuffer-07739" href="chap22.html#VUID-vkCmdCopyBufferToImage2-commandBuffer-07739"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-commandBuffer-07739</span><br>

If the queue family used to create the <a href="chap6.html#VkCommandPool">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code>, for each element of <code>pCopyBufferToImageInfo-&gt;pRegions</code>, the
<code>aspectMask</code> member of <code>imageSubresource</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or <code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-commandBuffer-parameter" href="chap22.html#VUID-vkCmdCopyBufferToImage2-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-pCopyBufferToImageInfo-parameter" href="chap22.html#VUID-vkCmdCopyBufferToImage2-pCopyBufferToImageInfo-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-pCopyBufferToImageInfo-parameter</span><br>
 <code>pCopyBufferToImageInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap22.html#VkCopyBufferToImageInfo2">VkCopyBufferToImageInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-commandBuffer-recording" href="chap22.html#VUID-vkCmdCopyBufferToImage2-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-commandBuffer-cmdpool" href="chap22.html#VUID-vkCmdCopyBufferToImage2-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support VK_QUEUE_COMPUTE_BIT, VK_QUEUE_GRAPHICS_BIT, or VK_QUEUE_TRANSFER_BIT operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-renderpass" href="chap22.html#VUID-vkCmdCopyBufferToImage2-renderpass"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-videocoding" href="chap22.html#VUID-vkCmdCopyBufferToImage2-videocoding"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap45.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VK_QUEUE_COMPUTE_BIT<br>
VK_QUEUE_GRAPHICS_BIT<br>
VK_QUEUE_TRANSFER_BIT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Conditional Rendering</div>
<div class="paragraph">
<p>vkCmdCopyBufferToImage2 is not affected by <a href="chap23.html#drawing-conditional-rendering">conditional rendering</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyBufferToImageInfo2</code> structure is defined as:</p>
</div>
<div id="VkCopyBufferToImageInfo2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkCopyBufferToImageInfo2</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>              <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                  <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkBuffer</span>                     <span class="n">srcBuffer</span><span class="p">;</span>
    <span class="n">VkImage</span>                      <span class="n">dstImage</span><span class="p">;</span>
    <span class="n">VkImageLayout</span>                <span class="n">dstImageLayout</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                     <span class="n">regionCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkBufferImageCopy2</span><span class="o">*</span>    <span class="n">pRegions</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkCopyBufferToImageInfo2</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkCopyBufferToImageInfo2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="k">typedef</span> <span class="n">VkCopyBufferToImageInfo2</span> <span class="n">VkCopyBufferToImageInfo2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="chap3.html#VkStructureType">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcBuffer</code> is the source buffer.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the copy.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap22.html#VkBufferImageCopy2">VkBufferImageCopy2</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-pRegions-04565" href="chap22.html#VUID-VkCopyBufferToImageInfo2-pRegions-04565"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-pRegions-04565</span><br>

The image region specified by each element of <code>pRegions</code>
that does not contain <a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its
<code>pNext</code> chain
<strong class="purple">must</strong> be contained within the specified <code>imageSubresource</code> of
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-pRegions-04554" href="chap22.html#VUID-VkCopyBufferToImageInfo2KHR-pRegions-04554"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-pRegions-04554</span><br>

If the image region specified by each element of <code>pRegions</code> contains
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, the
<a href="chap22.html#copies-buffers-images-rotation-addressing">rotated destination
region</a> <strong class="purple">must</strong> be contained within <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-pRegions-04555" href="chap22.html#VUID-VkCopyBufferToImageInfo2KHR-pRegions-04555"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-pRegions-04555</span><br>

If any element of <code>pRegions</code> contains
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>dstImage</code> <strong class="purple">must</strong> have a 1x1x1 <a href="chap53.html#formats-compatibility-classes">texel
block extent</a></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-pRegions-06203" href="chap22.html#VUID-VkCopyBufferToImageInfo2KHR-pRegions-06203"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-pRegions-06203</span><br>

If any element of <code>pRegions</code> contains
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>dstImage</code> <strong class="purple">must</strong> be of type <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-pRegions-06204" href="chap22.html#VUID-VkCopyBufferToImageInfo2KHR-pRegions-06204"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-pRegions-06204</span><br>

If any element of <code>pRegions</code> contains
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>dstImage</code> <strong class="purple">must</strong> not have a <a href="chap53.html#formats-multiplanar">multi-planar
format</a></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-pRegions-00171" href="chap22.html#VUID-VkCopyBufferToImageInfo2-pRegions-00171"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-pRegions-00171</span><br>

<code>srcBuffer</code> <strong class="purple">must</strong> be large enough to contain all buffer locations
that are accessed according to <a href="chap22.html#copies-buffers-images-addressing">Buffer
and Image Addressing</a>, for each element of <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-pRegions-00173" href="chap22.html#VUID-VkCopyBufferToImageInfo2-pRegions-00173"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-pRegions-00173</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong class="purple">must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-srcBuffer-00174" href="chap22.html#VUID-VkCopyBufferToImageInfo2-srcBuffer-00174"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-srcBuffer-00174</span><br>

<code>srcBuffer</code> <strong class="purple">must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-01997" href="chap22.html#VUID-VkCopyBufferToImageInfo2-dstImage-01997"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-01997</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>dstImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-srcBuffer-00176" href="chap22.html#VUID-VkCopyBufferToImageInfo2-srcBuffer-00176"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-srcBuffer-00176</span><br>

If <code>srcBuffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-00177" href="chap22.html#VUID-VkCopyBufferToImageInfo2-dstImage-00177"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-00177</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImageLayout-00180" href="chap22.html#VUID-VkCopyBufferToImageInfo2-dstImageLayout-00180"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImageLayout-00180</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImageLayout-01396" href="chap22.html#VUID-VkCopyBufferToImageInfo2-dstImageLayout-01396"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImageLayout-01396</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-pRegions-07931" href="chap22.html#VUID-VkCopyBufferToImageInfo2-pRegions-07931"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-pRegions-07931</span><br>

If <a href="chap60.html#VK_EXT_depth_range_unrestricted">VK_EXT_depth_range_unrestricted</a> is not enabled, for
each element of <code>pRegions</code> whose <code>imageSubresource</code> contains a
depth aspect, the data in <code>srcBuffer</code> <strong class="purple">must</strong> be in the range
<span class="eq">[0,1]</span></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07966" href="chap22.html#VUID-VkCopyBufferToImageInfo2-dstImage-07966"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07966</span><br>

If <code>dstImage</code> is non-sparse then the image
or the specified <em>disjoint</em> plane
<strong class="purple">must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-imageSubresource-07967" href="chap22.html#VUID-VkCopyBufferToImageInfo2-imageSubresource-07967"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-imageSubresource-07967</span><br>

The <code>imageSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-imageSubresource-07968" href="chap22.html#VUID-VkCopyBufferToImageInfo2-imageSubresource-07968"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-imageSubresource-07968</span><br>

If <code>imageSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>,
<span class="eq"><code>imageSubresource.baseArrayLayer</code> + 
<code>imageSubresource.layerCount</code></span> of each element of <code>pRegions</code>
<strong class="purple">must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07969" href="chap22.html#VUID-VkCopyBufferToImageInfo2-dstImage-07969"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07969</span><br>

<code>dstImage</code> <strong class="purple">must</strong> not have been created with <code>flags</code>
containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07973" href="chap22.html#VUID-VkCopyBufferToImageInfo2-dstImage-07973"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07973</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07979" href="chap22.html#VUID-VkCopyBufferToImageInfo2-dstImage-07979"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07979</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>imageOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>imageExtent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-imageOffset-09104" href="chap22.html#VUID-VkCopyBufferToImageInfo2-imageOffset-09104"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-imageOffset-09104</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> and
<span class="eq">(<code>imageExtent.depth</code> +  <code>imageOffset.z</code>)</span> <strong class="purple">must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the depth
of the specified <code>imageSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07980" href="chap22.html#VUID-VkCopyBufferToImageInfo2-dstImage-07980"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07980</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>imageOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and <code>imageExtent.depth</code> <strong class="purple">must</strong>
be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07274" href="chap22.html#VUID-VkCopyBufferToImageInfo2-dstImage-07274"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07274</span><br>

For each element of <code>pRegions</code>,
if <a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code>,
<code>imageOffset.x</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-imageOffset-10051" href="chap22.html#VUID-VkCopyBufferToImageInfo2-imageOffset-10051"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-imageOffset-10051</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>, and <code>imageOffset.x</code>
does not equal the width of the subresource specified by
<code>imageSubresource</code>, <code>imageOffset.x</code> <strong class="purple">must</strong> be a multiple of
the <a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07275" href="chap22.html#VUID-VkCopyBufferToImageInfo2-dstImage-07275"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07275</span><br>

For each element of <code>pRegions</code>,
if <a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>,
<code>imageOffset.y</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-imageOffset-10052" href="chap22.html#VUID-VkCopyBufferToImageInfo2-imageOffset-10052"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-imageOffset-10052</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, and <code>imageOffset.y</code>
does not equal the height of the subresource specified by
<code>imageSubresource</code>, <code>imageOffset.y</code> <strong class="purple">must</strong> be a multiple of
the <a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07276" href="chap22.html#VUID-VkCopyBufferToImageInfo2-dstImage-07276"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07276</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
depth</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-00207" href="chap22.html#VUID-VkCopyBufferToImageInfo2-dstImage-00207"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-00207</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code>,
the sum of <code>imageOffset.x</code> and <code>extent.width</code> does not equal
the width of the subresource specified by <code>imageSubresource</code>,
<code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-imageOffset-10053" href="chap22.html#VUID-VkCopyBufferToImageInfo2-imageOffset-10053"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-imageOffset-10053</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>, the difference of
<code>imageOffset.x</code> and <code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-imageOffset-10054" href="chap22.html#VUID-VkCopyBufferToImageInfo2-imageOffset-10054"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-imageOffset-10054</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, the difference of
<code>imageOffset.x</code> and <code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-imageOffset-10055" href="chap22.html#VUID-VkCopyBufferToImageInfo2-imageOffset-10055"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-imageOffset-10055</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code>, the sum of
<code>imageOffset.x</code> and <code>extent.height</code> does not equal the width
of the subresource specified by <code>imageSubresource</code>,
<code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-00208" href="chap22.html#VUID-VkCopyBufferToImageInfo2-dstImage-00208"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-00208</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code>, and
the sum of <code>imageOffset.y</code> and <code>extent.height</code> does not equal
the height of the subresource specified by <code>imageSubresource</code>,
<code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-imageOffset-10056" href="chap22.html#VUID-VkCopyBufferToImageInfo2-imageOffset-10056"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-imageOffset-10056</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>, the sum of
<code>imageOffset.y</code> and <code>extent.width</code> does not equal the height
of the subresource specified by <code>imageSubresource</code>,
<code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-imageOffset-10057" href="chap22.html#VUID-VkCopyBufferToImageInfo2-imageOffset-10057"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-imageOffset-10057</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, the difference of
<code>imageOffset.y</code> and <code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-imageOffset-10058" href="chap22.html#VUID-VkCopyBufferToImageInfo2-imageOffset-10058"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-imageOffset-10058</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code>, the difference of
<code>imageOffset.y</code> and <code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-00209" href="chap22.html#VUID-VkCopyBufferToImageInfo2-dstImage-00209"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-00209</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.z</code>
and <code>extent.depth</code> does not equal the depth of the subresource
specified by <code>srcSubresource</code>, <code>extent.depth</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
depth</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-imageSubresource-09105" href="chap22.html#VUID-VkCopyBufferToImageInfo2-imageSubresource-09105"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-imageSubresource-09105</span><br>

For each element of <code>pRegions</code>, <code>imageSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07981" href="chap22.html#VUID-VkCopyBufferToImageInfo2-dstImage-07981"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07981</span><br>

If <code>dstImage</code> has a <a href="chap53.html#formats-multiplanar">multi-planar
format</a>, then for each element of <code>pRegions</code>,
<code>imageSubresource.aspectMask</code> <strong class="purple">must</strong> be a single valid
<a href="chap53.html#formats-multiplanar-image-aspect">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07983" href="chap22.html#VUID-VkCopyBufferToImageInfo2-dstImage-07983"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07983</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each
element of <code>pRegions</code>, <code>imageSubresource.baseArrayLayer</code> <strong class="purple">must</strong>
be <code>0</code> and <code>imageSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-bufferRowLength-09106" href="chap22.html#VUID-VkCopyBufferToImageInfo2-bufferRowLength-09106"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-bufferRowLength-09106</span><br>

For each element of <code>pRegions</code>, <code>bufferRowLength</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
width</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-bufferImageHeight-09107" href="chap22.html#VUID-VkCopyBufferToImageInfo2-bufferImageHeight-09107"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-bufferImageHeight-09107</span><br>

For each element of <code>pRegions</code>, <code>bufferImageHeight</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
height</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-bufferRowLength-09108" href="chap22.html#VUID-VkCopyBufferToImageInfo2-bufferRowLength-09108"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-bufferRowLength-09108</span><br>

For each element of <code>pRegions</code>, <code>bufferRowLength</code> divided by
the <a href="chap53.html#formats-compatibility-classes">texel block extent width</a> and then
multiplied by the texel block size of <code>dstImage</code> <strong class="purple">must</strong> be less
than or equal to <span class="eq">2<sup>31</sup>-1</span></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07975" href="chap22.html#VUID-VkCopyBufferToImageInfo2-dstImage-07975"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07975</span><br>

If <code>dstImage</code> does not have either a depth/stencil format
or a <a href="chap53.html#formats-multiplanar">multi-planar format</a>,
then for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block size</a></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07976" href="chap22.html#VUID-VkCopyBufferToImageInfo2-dstImage-07976"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07976</span><br>

If <code>dstImage</code> has a <a href="chap53.html#formats-multiplanar">multi-planar
format</a>, then for each element of <code>pRegions</code>, <code>bufferOffset</code>
<strong class="purple">must</strong> be a multiple of the element size of the compatible format for the
format and the <code>aspectMask</code> of the <code>imageSubresource</code> as defined
in <a href="chap53.html#formats-compatible-planes">Compatible Formats of Planes of Multi-Planar Formats</a></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07978" href="chap22.html#VUID-VkCopyBufferToImageInfo2-dstImage-07978"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07978</span><br>

If <code>dstImage</code> has a depth/stencil format, the <code>bufferOffset</code>
member of any element of <code>pRegions</code> <strong class="purple">must</strong> be a multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-pRegions-06223" href="chap22.html#VUID-VkCopyBufferToImageInfo2-pRegions-06223"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-pRegions-06223</span><br>

For each element of <code>pRegions</code> not containing
<code>VkCopyCommandTransformInfoQCOM</code> in its <code>pNext</code> chain,
<code>imageOffset.x</code> and <span class="eq">(<code>imageExtent.width</code> + 
<code>imageOffset.x</code>)</span> <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the width of the specified <code>imageSubresource</code>
of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-pRegions-06224" href="chap22.html#VUID-VkCopyBufferToImageInfo2-pRegions-06224"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-pRegions-06224</span><br>

For each element of <code>pRegions</code> not containing
<code>VkCopyCommandTransformInfoQCOM</code> in its <code>pNext</code> chain,
<code>imageOffset.y</code> and <span class="eq">(<code>imageExtent.height</code> + 
<code>imageOffset.y</code>)</span> <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the height of the specified <code>imageSubresource</code>
of <code>dstImage</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-sType-sType" href="chap22.html#VUID-VkCopyBufferToImageInfo2-sType-sType"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_COPY_BUFFER_TO_IMAGE_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-pNext-pNext" href="chap22.html#VUID-VkCopyBufferToImageInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-srcBuffer-parameter" href="chap22.html#VUID-VkCopyBufferToImageInfo2-srcBuffer-parameter"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-srcBuffer-parameter</span><br>
 <code>srcBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-parameter" href="chap22.html#VUID-VkCopyBufferToImageInfo2-dstImage-parameter"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-parameter</span><br>
 <code>dstImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImageLayout-parameter" href="chap22.html#VUID-VkCopyBufferToImageInfo2-dstImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-pRegions-parameter" href="chap22.html#VUID-VkCopyBufferToImageInfo2-pRegions-parameter"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap22.html#VkBufferImageCopy2">VkBufferImageCopy2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-regionCount-arraylength" href="chap22.html#VUID-VkCopyBufferToImageInfo2-regionCount-arraylength"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-commonparent" href="chap22.html#VUID-VkCopyBufferToImageInfo2-commonparent"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-commonparent</span><br>
 Both of <code>dstImage</code>, and <code>srcBuffer</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from an image object to a buffer object, call:</p>
</div>
<div id="vkCmdCopyImageToBuffer2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyImageToBuffer2</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCopyImageToBufferInfo2</span><span class="o">*</span>             <span class="n">pCopyImageToBufferInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkCmdCopyImageToBuffer2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyImageToBuffer2KHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCopyImageToBufferInfo2</span><span class="o">*</span>             <span class="n">pCopyImageToBufferInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pCopyImageToBufferInfo</code> is a pointer to a
<a href="chap22.html#VkCopyImageToBufferInfo2">VkCopyImageToBufferInfo2</a> structure describing the copy parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally identical to <a href="chap22.html#vkCmdCopyImageToBuffer">vkCmdCopyImageToBuffer</a>, but
includes extensible sub-structures that include <code>sType</code> and <code>pNext</code>
parameters, allowing them to be more easily extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-commandBuffer-01831" href="chap22.html#VUID-vkCmdCopyImageToBuffer2-commandBuffer-01831"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-commandBuffer-01831</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>srcImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-commandBuffer-01832" href="chap22.html#VUID-vkCmdCopyImageToBuffer2-commandBuffer-01832"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-commandBuffer-01832</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong class="purple">must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-commandBuffer-01833" href="chap22.html#VUID-vkCmdCopyImageToBuffer2-commandBuffer-01833"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-commandBuffer-01833</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong class="purple">must</strong> not be an unprotected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-commandBuffer-07746" href="chap22.html#VUID-vkCmdCopyImageToBuffer2-commandBuffer-07746"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-commandBuffer-07746</span><br>

If the queue family used to create the <a href="chap6.html#VkCommandPool">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code> or <code>VK_QUEUE_COMPUTE_BIT</code>, the
<code>bufferOffset</code> member of any element of <code>pCopyImageToBufferInfo-&gt;pRegions</code> <strong class="purple">must</strong> be a
multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-imageOffset-07747" href="chap22.html#VUID-vkCmdCopyImageToBuffer2-imageOffset-07747"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-imageOffset-07747</span><br>

The <code>imageOffset</code> and <code>imageExtent</code> members of each element of
<code>pCopyImageToBufferInfo-&gt;pRegions</code> <strong class="purple">must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>’s command pool’s queue family, as described in
<a href="chap5.html#VkQueueFamilyProperties">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-commandBuffer-10216" href="chap22.html#VUID-vkCmdCopyImageToBuffer2-commandBuffer-10216"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-commandBuffer-10216</span><br>

If the queue family used to create the <a href="chap6.html#VkCommandPool">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code>, for each element of <code>pCopyImageToBufferInfo-&gt;pRegions</code>, the
<code>aspectMask</code> member of <code>imageSubresource</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or <code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-commandBuffer-parameter" href="chap22.html#VUID-vkCmdCopyImageToBuffer2-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-pCopyImageToBufferInfo-parameter" href="chap22.html#VUID-vkCmdCopyImageToBuffer2-pCopyImageToBufferInfo-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-pCopyImageToBufferInfo-parameter</span><br>
 <code>pCopyImageToBufferInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap22.html#VkCopyImageToBufferInfo2">VkCopyImageToBufferInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-commandBuffer-recording" href="chap22.html#VUID-vkCmdCopyImageToBuffer2-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-commandBuffer-cmdpool" href="chap22.html#VUID-vkCmdCopyImageToBuffer2-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support VK_QUEUE_COMPUTE_BIT, VK_QUEUE_GRAPHICS_BIT, or VK_QUEUE_TRANSFER_BIT operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-renderpass" href="chap22.html#VUID-vkCmdCopyImageToBuffer2-renderpass"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-videocoding" href="chap22.html#VUID-vkCmdCopyImageToBuffer2-videocoding"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap45.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VK_QUEUE_COMPUTE_BIT<br>
VK_QUEUE_GRAPHICS_BIT<br>
VK_QUEUE_TRANSFER_BIT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Conditional Rendering</div>
<div class="paragraph">
<p>vkCmdCopyImageToBuffer2 is not affected by <a href="chap23.html#drawing-conditional-rendering">conditional rendering</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyImageToBufferInfo2</code> structure is defined as:</p>
</div>
<div id="VkCopyImageToBufferInfo2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkCopyImageToBufferInfo2</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>              <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                  <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImage</span>                      <span class="n">srcImage</span><span class="p">;</span>
    <span class="n">VkImageLayout</span>                <span class="n">srcImageLayout</span><span class="p">;</span>
    <span class="n">VkBuffer</span>                     <span class="n">dstBuffer</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                     <span class="n">regionCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkBufferImageCopy2</span><span class="o">*</span>    <span class="n">pRegions</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkCopyImageToBufferInfo2</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkCopyImageToBufferInfo2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="k">typedef</span> <span class="n">VkCopyImageToBufferInfo2</span> <span class="n">VkCopyImageToBufferInfo2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="chap3.html#VkStructureType">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the copy.</p>
</li>
<li>
<p><code>dstBuffer</code> is the destination buffer.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap22.html#VkBufferImageCopy2">VkBufferImageCopy2</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-pRegions-04566" href="chap22.html#VUID-VkCopyImageToBufferInfo2-pRegions-04566"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-pRegions-04566</span><br>

The image region specified by each element of <code>pRegions</code>
that does not contain <a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its
<code>pNext</code> chain
<strong class="purple">must</strong> be contained within the specified <code>imageSubresource</code> of
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-pRegions-04557" href="chap22.html#VUID-VkCopyImageToBufferInfo2KHR-pRegions-04557"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-pRegions-04557</span><br>

If the image region specified by each element of <code>pRegions</code> contains
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, the
<a href="chap22.html#copies-buffers-images-rotation-addressing">rotated source region</a>
<strong class="purple">must</strong> be contained within <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-pRegions-04558" href="chap22.html#VUID-VkCopyImageToBufferInfo2KHR-pRegions-04558"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-pRegions-04558</span><br>

If any element of <code>pRegions</code> contains
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>srcImage</code> <strong class="purple">must</strong> have a 1x1x1 <a href="chap53.html#formats-compatibility-classes">texel
block extent</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-pRegions-06205" href="chap22.html#VUID-VkCopyImageToBufferInfo2KHR-pRegions-06205"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-pRegions-06205</span><br>

If any element of <code>pRegions</code> contains
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>srcImage</code> <strong class="purple">must</strong> be of type <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-pRegions-06206" href="chap22.html#VUID-VkCopyImageToBufferInfo2KHR-pRegions-06206"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-pRegions-06206</span><br>

If any element of <code>pRegions</code> contains
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>srcImage</code> <strong class="purple">must</strong> not have a <a href="chap53.html#formats-multiplanar">multi-planar
format</a></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-pRegions-00183" href="chap22.html#VUID-VkCopyImageToBufferInfo2-pRegions-00183"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-pRegions-00183</span><br>

<code>dstBuffer</code> <strong class="purple">must</strong> be large enough to contain all buffer locations
that are accessed according to <a href="chap22.html#copies-buffers-images-addressing">Buffer
and Image Addressing</a>, for each element of <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-pRegions-00184" href="chap22.html#VUID-VkCopyImageToBufferInfo2-pRegions-00184"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-pRegions-00184</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong class="purple">must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-00186" href="chap22.html#VUID-VkCopyImageToBufferInfo2-srcImage-00186"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-00186</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-01998" href="chap22.html#VUID-VkCopyImageToBufferInfo2-srcImage-01998"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-01998</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>srcImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-dstBuffer-00191" href="chap22.html#VUID-VkCopyImageToBufferInfo2-dstBuffer-00191"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-dstBuffer-00191</span><br>

<code>dstBuffer</code> <strong class="purple">must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-dstBuffer-00192" href="chap22.html#VUID-VkCopyImageToBufferInfo2-dstBuffer-00192"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-dstBuffer-00192</span><br>

If <code>dstBuffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImageLayout-00189" href="chap22.html#VUID-VkCopyImageToBufferInfo2-srcImageLayout-00189"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImageLayout-00189</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImageLayout-01397" href="chap22.html#VUID-VkCopyImageToBufferInfo2-srcImageLayout-01397"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImageLayout-01397</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07966" href="chap22.html#VUID-VkCopyImageToBufferInfo2-srcImage-07966"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07966</span><br>

If <code>srcImage</code> is non-sparse then the image
or the specified <em>disjoint</em> plane
<strong class="purple">must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageSubresource-07967" href="chap22.html#VUID-VkCopyImageToBufferInfo2-imageSubresource-07967"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageSubresource-07967</span><br>

The <code>imageSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageSubresource-07968" href="chap22.html#VUID-VkCopyImageToBufferInfo2-imageSubresource-07968"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageSubresource-07968</span><br>

If <code>imageSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>,
<span class="eq"><code>imageSubresource.baseArrayLayer</code> + 
<code>imageSubresource.layerCount</code></span> of each element of <code>pRegions</code>
<strong class="purple">must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07969" href="chap22.html#VUID-VkCopyImageToBufferInfo2-srcImage-07969"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07969</span><br>

<code>srcImage</code> <strong class="purple">must</strong> not have been created with <code>flags</code>
containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07973" href="chap22.html#VUID-VkCopyImageToBufferInfo2-srcImage-07973"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07973</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07979" href="chap22.html#VUID-VkCopyImageToBufferInfo2-srcImage-07979"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07979</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>imageOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>imageExtent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageOffset-09104" href="chap22.html#VUID-VkCopyImageToBufferInfo2-imageOffset-09104"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageOffset-09104</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> and
<span class="eq">(<code>imageExtent.depth</code> +  <code>imageOffset.z</code>)</span> <strong class="purple">must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the depth
of the specified <code>imageSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07980" href="chap22.html#VUID-VkCopyImageToBufferInfo2-srcImage-07980"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07980</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>imageOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and <code>imageExtent.depth</code> <strong class="purple">must</strong>
be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07274" href="chap22.html#VUID-VkCopyImageToBufferInfo2-srcImage-07274"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07274</span><br>

For each element of <code>pRegions</code>,
if <a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code>,
<code>imageOffset.x</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageOffset-10051" href="chap22.html#VUID-VkCopyImageToBufferInfo2-imageOffset-10051"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageOffset-10051</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>, and <code>imageOffset.x</code>
does not equal the width of the subresource specified by
<code>imageSubresource</code>, <code>imageOffset.x</code> <strong class="purple">must</strong> be a multiple of
the <a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07275" href="chap22.html#VUID-VkCopyImageToBufferInfo2-srcImage-07275"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07275</span><br>

For each element of <code>pRegions</code>,
if <a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>,
<code>imageOffset.y</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageOffset-10052" href="chap22.html#VUID-VkCopyImageToBufferInfo2-imageOffset-10052"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageOffset-10052</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, and <code>imageOffset.y</code>
does not equal the height of the subresource specified by
<code>imageSubresource</code>, <code>imageOffset.y</code> <strong class="purple">must</strong> be a multiple of
the <a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07276" href="chap22.html#VUID-VkCopyImageToBufferInfo2-srcImage-07276"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07276</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
depth</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-00207" href="chap22.html#VUID-VkCopyImageToBufferInfo2-srcImage-00207"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-00207</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code>,
the sum of <code>imageOffset.x</code> and <code>extent.width</code> does not equal
the width of the subresource specified by <code>imageSubresource</code>,
<code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageOffset-10053" href="chap22.html#VUID-VkCopyImageToBufferInfo2-imageOffset-10053"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageOffset-10053</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>, the difference of
<code>imageOffset.x</code> and <code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageOffset-10054" href="chap22.html#VUID-VkCopyImageToBufferInfo2-imageOffset-10054"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageOffset-10054</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, the difference of
<code>imageOffset.x</code> and <code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageOffset-10055" href="chap22.html#VUID-VkCopyImageToBufferInfo2-imageOffset-10055"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageOffset-10055</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code>, the sum of
<code>imageOffset.x</code> and <code>extent.height</code> does not equal the width
of the subresource specified by <code>imageSubresource</code>,
<code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-00208" href="chap22.html#VUID-VkCopyImageToBufferInfo2-srcImage-00208"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-00208</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code>, and
the sum of <code>imageOffset.y</code> and <code>extent.height</code> does not equal
the height of the subresource specified by <code>imageSubresource</code>,
<code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageOffset-10056" href="chap22.html#VUID-VkCopyImageToBufferInfo2-imageOffset-10056"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageOffset-10056</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>, the sum of
<code>imageOffset.y</code> and <code>extent.width</code> does not equal the height
of the subresource specified by <code>imageSubresource</code>,
<code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageOffset-10057" href="chap22.html#VUID-VkCopyImageToBufferInfo2-imageOffset-10057"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageOffset-10057</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, the difference of
<code>imageOffset.y</code> and <code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageOffset-10058" href="chap22.html#VUID-VkCopyImageToBufferInfo2-imageOffset-10058"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageOffset-10058</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code>, the difference of
<code>imageOffset.y</code> and <code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-00209" href="chap22.html#VUID-VkCopyImageToBufferInfo2-srcImage-00209"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-00209</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.z</code>
and <code>extent.depth</code> does not equal the depth of the subresource
specified by <code>srcSubresource</code>, <code>extent.depth</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
depth</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageSubresource-09105" href="chap22.html#VUID-VkCopyImageToBufferInfo2-imageSubresource-09105"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageSubresource-09105</span><br>

For each element of <code>pRegions</code>, <code>imageSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07981" href="chap22.html#VUID-VkCopyImageToBufferInfo2-srcImage-07981"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07981</span><br>

If <code>srcImage</code> has a <a href="chap53.html#formats-multiplanar">multi-planar
format</a>, then for each element of <code>pRegions</code>,
<code>imageSubresource.aspectMask</code> <strong class="purple">must</strong> be a single valid
<a href="chap53.html#formats-multiplanar-image-aspect">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07983" href="chap22.html#VUID-VkCopyImageToBufferInfo2-srcImage-07983"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07983</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each
element of <code>pRegions</code>, <code>imageSubresource.baseArrayLayer</code> <strong class="purple">must</strong>
be <code>0</code> and <code>imageSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-bufferRowLength-09106" href="chap22.html#VUID-VkCopyImageToBufferInfo2-bufferRowLength-09106"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-bufferRowLength-09106</span><br>

For each element of <code>pRegions</code>, <code>bufferRowLength</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
width</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-bufferImageHeight-09107" href="chap22.html#VUID-VkCopyImageToBufferInfo2-bufferImageHeight-09107"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-bufferImageHeight-09107</span><br>

For each element of <code>pRegions</code>, <code>bufferImageHeight</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
height</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-bufferRowLength-09108" href="chap22.html#VUID-VkCopyImageToBufferInfo2-bufferRowLength-09108"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-bufferRowLength-09108</span><br>

For each element of <code>pRegions</code>, <code>bufferRowLength</code> divided by
the <a href="chap53.html#formats-compatibility-classes">texel block extent width</a> and then
multiplied by the texel block size of <code>srcImage</code> <strong class="purple">must</strong> be less
than or equal to <span class="eq">2<sup>31</sup>-1</span></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07975" href="chap22.html#VUID-VkCopyImageToBufferInfo2-srcImage-07975"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07975</span><br>

If <code>srcImage</code> does not have either a depth/stencil format
or a <a href="chap53.html#formats-multiplanar">multi-planar format</a>,
then for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block size</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07976" href="chap22.html#VUID-VkCopyImageToBufferInfo2-srcImage-07976"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07976</span><br>

If <code>srcImage</code> has a <a href="chap53.html#formats-multiplanar">multi-planar
format</a>, then for each element of <code>pRegions</code>, <code>bufferOffset</code>
<strong class="purple">must</strong> be a multiple of the element size of the compatible format for the
format and the <code>aspectMask</code> of the <code>imageSubresource</code> as defined
in <a href="chap53.html#formats-compatible-planes">Compatible Formats of Planes of Multi-Planar Formats</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07978" href="chap22.html#VUID-VkCopyImageToBufferInfo2-srcImage-07978"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07978</span><br>

If <code>srcImage</code> has a depth/stencil format, the <code>bufferOffset</code>
member of any element of <code>pRegions</code> <strong class="purple">must</strong> be a multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageOffset-00197" href="chap22.html#VUID-VkCopyImageToBufferInfo2-imageOffset-00197"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageOffset-00197</span><br>

For each element of <code>pRegions</code> not containing
<code>VkCopyCommandTransformInfoQCOM</code> in its <code>pNext</code> chain,
<code>imageOffset.x</code> and <span class="eq">(<code>imageExtent.width</code> + 
<code>imageOffset.x</code>)</span> <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the width of the specified <code>imageSubresource</code>
of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageOffset-00198" href="chap22.html#VUID-VkCopyImageToBufferInfo2-imageOffset-00198"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageOffset-00198</span><br>

For each element of <code>pRegions</code> not containing
<code>VkCopyCommandTransformInfoQCOM</code> in its <code>pNext</code> chain,
<code>imageOffset.y</code> and <span class="eq">(<code>imageExtent.height</code> + 
<code>imageOffset.y</code>)</span> <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the height of the specified <code>imageSubresource</code>
of <code>srcImage</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-sType-sType" href="chap22.html#VUID-VkCopyImageToBufferInfo2-sType-sType"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_COPY_IMAGE_TO_BUFFER_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-pNext-pNext" href="chap22.html#VUID-VkCopyImageToBufferInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-parameter" href="chap22.html#VUID-VkCopyImageToBufferInfo2-srcImage-parameter"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-parameter</span><br>
 <code>srcImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImageLayout-parameter" href="chap22.html#VUID-VkCopyImageToBufferInfo2-srcImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-dstBuffer-parameter" href="chap22.html#VUID-VkCopyImageToBufferInfo2-dstBuffer-parameter"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-pRegions-parameter" href="chap22.html#VUID-VkCopyImageToBufferInfo2-pRegions-parameter"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap22.html#VkBufferImageCopy2">VkBufferImageCopy2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-regionCount-arraylength" href="chap22.html#VUID-VkCopyImageToBufferInfo2-regionCount-arraylength"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-commonparent" href="chap22.html#VUID-VkCopyImageToBufferInfo2-commonparent"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-commonparent</span><br>
 Both of <code>dstBuffer</code>, and <code>srcImage</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>For both <a href="chap22.html#vkCmdCopyBufferToImage2">vkCmdCopyBufferToImage2</a> and <a href="chap22.html#vkCmdCopyImageToBuffer2">vkCmdCopyImageToBuffer2</a>,
each element of <code>pRegions</code> is a structure defined as:</p>
</div>
<div id="VkBufferImageCopy2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBufferImageCopy2</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>             <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                 <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>                <span class="n">bufferOffset</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                    <span class="n">bufferRowLength</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                    <span class="n">bufferImageHeight</span><span class="p">;</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">imageSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">imageOffset</span><span class="p">;</span>
    <span class="n">VkExtent3D</span>                  <span class="n">imageExtent</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBufferImageCopy2</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkBufferImageCopy2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="k">typedef</span> <span class="n">VkBufferImageCopy2</span> <span class="n">VkBufferImageCopy2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="chap3.html#VkStructureType">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>bufferOffset</code> is the offset in bytes from the start of the buffer
object where the image data is copied from or to.</p>
</li>
<li>
<p><code>bufferRowLength</code> and <code>bufferImageHeight</code> specify in texels a
subregion of a larger two- or three-dimensional image in buffer memory,
and control the addressing calculations.
If either of these values is zero, that aspect of the buffer memory is
considered to be tightly packed according to the <code>imageExtent</code>.</p>
</li>
<li>
<p><code>imageSubresource</code> is a <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> used to
specify the specific image subresources of the image used for the source
or destination image data.</p>
</li>
<li>
<p><code>imageOffset</code> selects the initial <code>x</code>, <code>y</code>, <code>z</code> offsets
in texels of the sub-region of the source or destination image data.</p>
</li>
<li>
<p><code>imageExtent</code> is the size in texels of the image to copy in
<code>width</code>, <code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This structure is functionally identical to <a href="chap22.html#VkBufferImageCopy">VkBufferImageCopy</a>, but
adds <code>sType</code> and <code>pNext</code> parameters, allowing it to be more easily
extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferImageCopy2-bufferRowLength-09101" href="chap22.html#VUID-VkBufferImageCopy2-bufferRowLength-09101"></a> <span class="vuid">VUID-VkBufferImageCopy2-bufferRowLength-09101</span><br>

<code>bufferRowLength</code> <strong class="purple">must</strong> be <code>0</code>, or greater than or equal to the
<code>width</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2-bufferImageHeight-09102" href="chap22.html#VUID-VkBufferImageCopy2-bufferImageHeight-09102"></a> <span class="vuid">VUID-VkBufferImageCopy2-bufferImageHeight-09102</span><br>

<code>bufferImageHeight</code> <strong class="purple">must</strong> be <code>0</code>, or greater than or equal to the
<code>height</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2-aspectMask-09103" href="chap22.html#VUID-VkBufferImageCopy2-aspectMask-09103"></a> <span class="vuid">VUID-VkBufferImageCopy2-aspectMask-09103</span><br>

The <code>aspectMask</code> member of <code>imageSubresource</code> <strong class="purple">must</strong> only have a
single bit set</p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2-imageExtent-06659" href="chap22.html#VUID-VkBufferImageCopy2-imageExtent-06659"></a> <span class="vuid">VUID-VkBufferImageCopy2-imageExtent-06659</span><br>

<code>imageExtent.width</code> <strong class="purple">must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2-imageExtent-06660" href="chap22.html#VUID-VkBufferImageCopy2-imageExtent-06660"></a> <span class="vuid">VUID-VkBufferImageCopy2-imageExtent-06660</span><br>

<code>imageExtent.height</code> <strong class="purple">must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2-imageExtent-06661" href="chap22.html#VUID-VkBufferImageCopy2-imageExtent-06661"></a> <span class="vuid">VUID-VkBufferImageCopy2-imageExtent-06661</span><br>

<code>imageExtent.depth</code> <strong class="purple">must</strong> not be 0</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferImageCopy2-sType-sType" href="chap22.html#VUID-VkBufferImageCopy2-sType-sType"></a> <span class="vuid">VUID-VkBufferImageCopy2-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_IMAGE_COPY_2</code></p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2-pNext-pNext" href="chap22.html#VUID-VkBufferImageCopy2-pNext-pNext"></a> <span class="vuid">VUID-VkBufferImageCopy2-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a></p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2-sType-unique" href="chap22.html#VUID-VkBufferImageCopy2-sType-unique"></a> <span class="vuid">VUID-VkBufferImageCopy2-sType-unique</span><br>
 The <code>sType</code> value of each structure in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2-imageSubresource-parameter" href="chap22.html#VUID-VkBufferImageCopy2-imageSubresource-parameter"></a> <span class="vuid">VUID-VkBufferImageCopy2-imageSubresource-parameter</span><br>
 <code>imageSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyCommandTransformInfoQCOM</code> structure is defined as:</p>
</div>
<div id="VkCopyCommandTransformInfoQCOM" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_QCOM_rotated_copy_commands</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkCopyCommandTransformInfoQCOM</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                  <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                      <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkSurfaceTransformFlagBitsKHR</span>    <span class="n">transform</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkCopyCommandTransformInfoQCOM</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="chap3.html#VkStructureType">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>transform</code> is a <a href="chap36.html#VkSurfaceTransformFlagBitsKHR">VkSurfaceTransformFlagBitsKHR</a> value
describing the transform to be applied.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Including this structure in the <code>pNext</code> chain of
<a href="chap22.html#VkBufferImageCopy2">VkBufferImageCopy2</a> defines a rotation to be performed when copying
between an image and a buffer.
Including this structure in the <code>pNext</code> chain of <a href="chap22.html#VkBlitImageInfo2">VkBlitImageInfo2</a>
defines a rotation to be performed when blitting between two images.
If this structure is not specified in either case, the implementation
behaves as if it was specified with a <code>transform</code> equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code>.</p>
</div>
<div class="paragraph">
<p>Specifying a transform for a copy between an image and a buffer
<a href="chap22.html#copies-buffers-images-rotation-addressing">rotates the region accessed in
the image around the offset</a>.
Specifying a transform for a blit performs a similar transform as described
in <a href="chap22.html#copies-images-scaling-rotation">Image Blits with Scaling and
Rotation</a>.</p>
</div>
<div class="paragraph">
<p>Rotations other than <code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code> <strong class="purple">can</strong> only
be specified for single-plane 2D images with a 1x1x1
<a href="chap53.html#formats-compatibility-classes">texel block extent</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyCommandTransformInfoQCOM-transform-04560" href="chap22.html#VUID-VkCopyCommandTransformInfoQCOM-transform-04560"></a> <span class="vuid">VUID-VkCopyCommandTransformInfoQCOM-transform-04560</span><br>

<code>transform</code> <strong class="purple">must</strong> be <code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code>,
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>,
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, or
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyCommandTransformInfoQCOM-sType-sType" href="chap22.html#VUID-VkCopyCommandTransformInfoQCOM-sType-sType"></a> <span class="vuid">VUID-VkCopyCommandTransformInfoQCOM-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_COPY_COMMAND_TRANSFORM_INFO_QCOM</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following commands can be used to copy between host memory and images.
Bytes in host memory and texels in images are accessed as specified in
<a href="chap22.html#copies-buffers-images">Copying Data Between Buffers and Images</a>, with
buffers replaced with host memory.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Copies to and from an image on the host are not internally synchronized.
Simultaneous access (involving writes) to overlapping image memory on the
host constitutes a <a href="chap57.html#memory-model-access-data-race">data race</a>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from host memory to an image object, call:</p>
</div>
<div id="vkCopyMemoryToImage" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_4</span>
<span class="n">VkResult</span> <span class="nf">vkCopyMemoryToImage</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCopyMemoryToImageInfo</span><span class="o">*</span>              <span class="n">pCopyMemoryToImageInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkCopyMemoryToImageEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_host_image_copy</span>
<span class="n">VkResult</span> <span class="nf">vkCopyMemoryToImageEXT</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCopyMemoryToImageInfo</span><span class="o">*</span>              <span class="n">pCopyMemoryToImageInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the device which owns
<code>pCopyMemoryToImageInfo-&gt;dstImage</code>.</p>
</li>
<li>
<p><code>pCopyMemoryToImageInfo</code> is a pointer to a
<a href="chap22.html#VkCopyMemoryToImageInfo">VkCopyMemoryToImageInfo</a> structure describing the copy parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally similar to <a href="chap22.html#vkCmdCopyBufferToImage2">vkCmdCopyBufferToImage2</a>,
except it is executed on the host and reads from host memory instead of a
buffer.
The memory of <code>pCopyMemoryToImageInfo-&gt;dstImage</code> is accessed by the host
as if <a href="chap11.html#memory-coherent">coherent</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Because queue submissions <a href="chap7.html#synchronization-submission-host-writes">automatically make host memory visible to the device</a>, there would not be a
need for a memory barrier before using the results of this copy operation on
the device.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCopyMemoryToImage-device-parameter" href="chap22.html#VUID-vkCopyMemoryToImage-device-parameter"></a> <span class="vuid">VUID-vkCopyMemoryToImage-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCopyMemoryToImage-pCopyMemoryToImageInfo-parameter" href="chap22.html#VUID-vkCopyMemoryToImage-pCopyMemoryToImageInfo-parameter"></a> <span class="vuid">VUID-vkCopyMemoryToImage-pCopyMemoryToImageInfo-parameter</span><br>
 <code>pCopyMemoryToImageInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap22.html#VkCopyMemoryToImageInfo">VkCopyMemoryToImageInfo</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
<li>
<p><code>VK_ERROR_MEMORY_MAP_FAILED</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_UNKNOWN</code></p>
</li>
<li>
<p><code>VK_ERROR_VALIDATION_FAILED</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyMemoryToImageInfo</code> structure is defined as:</p>
</div>
<div id="VkCopyMemoryToImageInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_4</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkCopyMemoryToImageInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>               <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                   <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkHostImageCopyFlags</span>          <span class="n">flags</span><span class="p">;</span>
    <span class="n">VkImage</span>                       <span class="n">dstImage</span><span class="p">;</span>
    <span class="n">VkImageLayout</span>                 <span class="n">dstImageLayout</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                      <span class="n">regionCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkMemoryToImageCopy</span><span class="o">*</span>    <span class="n">pRegions</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkCopyMemoryToImageInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkCopyMemoryToImageInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_host_image_copy</span>
<span class="k">typedef</span> <span class="n">VkCopyMemoryToImageInfo</span> <span class="n">VkCopyMemoryToImageInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="chap3.html#VkStructureType">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap22.html#VkHostImageCopyFlagBits">VkHostImageCopyFlagBits</a> values
describing additional copy parameters.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the copy.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap22.html#VkMemoryToImageCopy">VkMemoryToImageCopy</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkCopyMemoryToImage</code> does not check whether the device memory
associated with <code>dstImage</code> is currently in use before performing the
copy.
The application <strong class="purple">must</strong> guarantee that any previously submitted command that
reads from or writes to the copy regions has completed before the host
performs the copy.</p>
</div>
<div class="paragraph">
<p>Copy regions for the image <strong class="purple">must</strong> be aligned to a multiple of the texel block
extent in each dimension, except at the edges of the image, where region
extents <strong class="purple">must</strong> match the edge of the image.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-dstImage-09109" href="chap22.html#VUID-VkCopyMemoryToImageInfo-dstImage-09109"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-dstImage-09109</span><br>

If <code>dstImage</code> is sparse then all memory ranges accessed by the
copy command <strong class="purple">must</strong> be bound as described in
<a href="chap35.html#sparsememory-resource-binding">Binding Resource Memory</a></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-dstImage-09111" href="chap22.html#VUID-VkCopyMemoryToImageInfo-dstImage-09111"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-dstImage-09111</span><br>

If the stencil aspect of <code>dstImage</code> is accessed, and
<code>dstImage</code> was not created with
<a href="chap12.html#VkImageStencilUsageCreateInfo">separate stencil usage</a>,
<code>dstImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT</code> set in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-dstImage-09112" href="chap22.html#VUID-VkCopyMemoryToImageInfo-dstImage-09112"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-dstImage-09112</span><br>

If the stencil aspect of <code>dstImage</code> is accessed, and
<code>dstImage</code> was created with
<a href="chap12.html#VkImageStencilUsageCreateInfo">separate stencil usage</a>,
<code>dstImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT</code> set in
<a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-dstImage-09113" href="chap22.html#VUID-VkCopyMemoryToImageInfo-dstImage-09113"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-dstImage-09113</span><br>

If non-stencil aspects of <code>dstImage</code> are accessed,
<code>dstImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT</code> set in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-imageOffset-09114" href="chap22.html#VUID-VkCopyMemoryToImageInfo-imageOffset-09114"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-imageOffset-09114</span><br>

If <code>flags</code> contains <code>VK_HOST_IMAGE_COPY_MEMCPY_BIT</code>, the
<code>x</code>, <code>y</code>, and <code>z</code> members of the <code>imageOffset</code> member
of each element of <code>pRegions</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-dstImage-09115" href="chap22.html#VUID-VkCopyMemoryToImageInfo-dstImage-09115"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-dstImage-09115</span><br>

If <code>flags</code> contains <code>VK_HOST_IMAGE_COPY_MEMCPY_BIT</code>, the
<code>imageExtent</code> member of each element of <code>pRegions</code> <strong class="purple">must</strong> equal
the extents of <code>dstImage</code> identified by <code>imageSubresource</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-dstImage-07966" href="chap22.html#VUID-VkCopyMemoryToImageInfo-dstImage-07966"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-dstImage-07966</span><br>

If <code>dstImage</code> is non-sparse then the image
or the specified <em>disjoint</em> plane
<strong class="purple">must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-imageSubresource-07967" href="chap22.html#VUID-VkCopyMemoryToImageInfo-imageSubresource-07967"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-imageSubresource-07967</span><br>

The <code>imageSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-imageSubresource-07968" href="chap22.html#VUID-VkCopyMemoryToImageInfo-imageSubresource-07968"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-imageSubresource-07968</span><br>

If <code>imageSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>,
<span class="eq"><code>imageSubresource.baseArrayLayer</code> + 
<code>imageSubresource.layerCount</code></span> of each element of <code>pRegions</code>
<strong class="purple">must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-dstImage-07969" href="chap22.html#VUID-VkCopyMemoryToImageInfo-dstImage-07969"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-dstImage-07969</span><br>

<code>dstImage</code> <strong class="purple">must</strong> not have been created with <code>flags</code>
containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-imageSubresource-07971" href="chap22.html#VUID-VkCopyMemoryToImageInfo-imageSubresource-07971"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-imageSubresource-07971</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.x</code> and
<span class="eq">(<code>imageExtent.width</code> +  <code>imageOffset.x</code>)</span> <strong class="purple">must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the width
of the specified <code>imageSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-imageSubresource-07972" href="chap22.html#VUID-VkCopyMemoryToImageInfo-imageSubresource-07972"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-imageSubresource-07972</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.y</code> and
<span class="eq">(<code>imageExtent.height</code> +  <code>imageOffset.y</code>)</span> <strong class="purple">must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the
height of the specified <code>imageSubresource</code> of <code>dstImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-dstImage-07973" href="chap22.html#VUID-VkCopyMemoryToImageInfo-dstImage-07973"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-dstImage-07973</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-dstImage-07979" href="chap22.html#VUID-VkCopyMemoryToImageInfo-dstImage-07979"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-dstImage-07979</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>imageOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>imageExtent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-imageOffset-09104" href="chap22.html#VUID-VkCopyMemoryToImageInfo-imageOffset-09104"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-imageOffset-09104</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> and
<span class="eq">(<code>imageExtent.depth</code> +  <code>imageOffset.z</code>)</span> <strong class="purple">must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the depth
of the specified <code>imageSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-dstImage-07980" href="chap22.html#VUID-VkCopyMemoryToImageInfo-dstImage-07980"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-dstImage-07980</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>imageOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and <code>imageExtent.depth</code> <strong class="purple">must</strong>
be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-dstImage-07274" href="chap22.html#VUID-VkCopyMemoryToImageInfo-dstImage-07274"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-dstImage-07274</span><br>

For each element of <code>pRegions</code>,
if <a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code>,
<code>imageOffset.x</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-imageOffset-10051" href="chap22.html#VUID-VkCopyMemoryToImageInfo-imageOffset-10051"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-imageOffset-10051</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>, and <code>imageOffset.x</code>
does not equal the width of the subresource specified by
<code>imageSubresource</code>, <code>imageOffset.x</code> <strong class="purple">must</strong> be a multiple of
the <a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-dstImage-07275" href="chap22.html#VUID-VkCopyMemoryToImageInfo-dstImage-07275"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-dstImage-07275</span><br>

For each element of <code>pRegions</code>,
if <a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>,
<code>imageOffset.y</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-imageOffset-10052" href="chap22.html#VUID-VkCopyMemoryToImageInfo-imageOffset-10052"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-imageOffset-10052</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, and <code>imageOffset.y</code>
does not equal the height of the subresource specified by
<code>imageSubresource</code>, <code>imageOffset.y</code> <strong class="purple">must</strong> be a multiple of
the <a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-dstImage-07276" href="chap22.html#VUID-VkCopyMemoryToImageInfo-dstImage-07276"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-dstImage-07276</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
depth</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-dstImage-00207" href="chap22.html#VUID-VkCopyMemoryToImageInfo-dstImage-00207"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-dstImage-00207</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code>,
the sum of <code>imageOffset.x</code> and <code>extent.width</code> does not equal
the width of the subresource specified by <code>imageSubresource</code>,
<code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-imageOffset-10053" href="chap22.html#VUID-VkCopyMemoryToImageInfo-imageOffset-10053"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-imageOffset-10053</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>, the difference of
<code>imageOffset.x</code> and <code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-imageOffset-10054" href="chap22.html#VUID-VkCopyMemoryToImageInfo-imageOffset-10054"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-imageOffset-10054</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, the difference of
<code>imageOffset.x</code> and <code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-imageOffset-10055" href="chap22.html#VUID-VkCopyMemoryToImageInfo-imageOffset-10055"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-imageOffset-10055</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code>, the sum of
<code>imageOffset.x</code> and <code>extent.height</code> does not equal the width
of the subresource specified by <code>imageSubresource</code>,
<code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-dstImage-00208" href="chap22.html#VUID-VkCopyMemoryToImageInfo-dstImage-00208"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-dstImage-00208</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code>, and
the sum of <code>imageOffset.y</code> and <code>extent.height</code> does not equal
the height of the subresource specified by <code>imageSubresource</code>,
<code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-imageOffset-10056" href="chap22.html#VUID-VkCopyMemoryToImageInfo-imageOffset-10056"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-imageOffset-10056</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>, the sum of
<code>imageOffset.y</code> and <code>extent.width</code> does not equal the height
of the subresource specified by <code>imageSubresource</code>,
<code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-imageOffset-10057" href="chap22.html#VUID-VkCopyMemoryToImageInfo-imageOffset-10057"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-imageOffset-10057</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, the difference of
<code>imageOffset.y</code> and <code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-imageOffset-10058" href="chap22.html#VUID-VkCopyMemoryToImageInfo-imageOffset-10058"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-imageOffset-10058</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code>, the difference of
<code>imageOffset.y</code> and <code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-dstImage-00209" href="chap22.html#VUID-VkCopyMemoryToImageInfo-dstImage-00209"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-dstImage-00209</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.z</code>
and <code>extent.depth</code> does not equal the depth of the subresource
specified by <code>srcSubresource</code>, <code>extent.depth</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
depth</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-imageSubresource-09105" href="chap22.html#VUID-VkCopyMemoryToImageInfo-imageSubresource-09105"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-imageSubresource-09105</span><br>

For each element of <code>pRegions</code>, <code>imageSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-dstImage-07981" href="chap22.html#VUID-VkCopyMemoryToImageInfo-dstImage-07981"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-dstImage-07981</span><br>

If <code>dstImage</code> has a <a href="chap53.html#formats-multiplanar">multi-planar
format</a>, then for each element of <code>pRegions</code>,
<code>imageSubresource.aspectMask</code> <strong class="purple">must</strong> be a single valid
<a href="chap53.html#formats-multiplanar-image-aspect">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-dstImage-07983" href="chap22.html#VUID-VkCopyMemoryToImageInfo-dstImage-07983"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-dstImage-07983</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each
element of <code>pRegions</code>, <code>imageSubresource.baseArrayLayer</code> <strong class="purple">must</strong>
be <code>0</code> and <code>imageSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-memoryRowLength-09106" href="chap22.html#VUID-VkCopyMemoryToImageInfo-memoryRowLength-09106"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-memoryRowLength-09106</span><br>

For each element of <code>pRegions</code>, <code>memoryRowLength</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
width</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-memoryImageHeight-09107" href="chap22.html#VUID-VkCopyMemoryToImageInfo-memoryImageHeight-09107"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-memoryImageHeight-09107</span><br>

For each element of <code>pRegions</code>, <code>memoryImageHeight</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
height</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-memoryRowLength-09108" href="chap22.html#VUID-VkCopyMemoryToImageInfo-memoryRowLength-09108"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-memoryRowLength-09108</span><br>

For each element of <code>pRegions</code>, <code>memoryRowLength</code> divided by
the <a href="chap53.html#formats-compatibility-classes">texel block extent width</a> and then
multiplied by the texel block size of <code>dstImage</code> <strong class="purple">must</strong> be less
than or equal to <span class="eq">2<sup>31</sup>-1</span></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-dstImageLayout-09059" href="chap22.html#VUID-VkCopyMemoryToImageInfo-dstImageLayout-09059"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-dstImageLayout-09059</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> specify the current layout of the image
subresources of <code>dstImage</code> specified in <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-dstImageLayout-09060" href="chap22.html#VUID-VkCopyMemoryToImageInfo-dstImageLayout-09060"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-dstImageLayout-09060</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> be one of the image layouts returned in
<a href="chap52.html#VkPhysicalDeviceHostImageCopyProperties">VkPhysicalDeviceHostImageCopyProperties</a>::<code>pCopyDstLayouts</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-flags-09393" href="chap22.html#VUID-VkCopyMemoryToImageInfo-flags-09393"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-flags-09393</span><br>

If <code>flags</code> includes <code>VK_HOST_IMAGE_COPY_MEMCPY_BIT</code>, for each
region in <code>pRegions</code>, <code>memoryRowLength</code> and
<code>memoryImageHeight</code> <strong class="purple">must</strong> both be 0</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-sType-sType" href="chap22.html#VUID-VkCopyMemoryToImageInfo-sType-sType"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_COPY_MEMORY_TO_IMAGE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-pNext-pNext" href="chap22.html#VUID-VkCopyMemoryToImageInfo-pNext-pNext"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-flags-parameter" href="chap22.html#VUID-VkCopyMemoryToImageInfo-flags-parameter"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap22.html#VkHostImageCopyFlagBits">VkHostImageCopyFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-dstImage-parameter" href="chap22.html#VUID-VkCopyMemoryToImageInfo-dstImage-parameter"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-dstImage-parameter</span><br>
 <code>dstImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-dstImageLayout-parameter" href="chap22.html#VUID-VkCopyMemoryToImageInfo-dstImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-pRegions-parameter" href="chap22.html#VUID-VkCopyMemoryToImageInfo-pRegions-parameter"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap22.html#VkMemoryToImageCopy">VkMemoryToImageCopy</a> structures</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfo-regionCount-arraylength" href="chap22.html#VUID-VkCopyMemoryToImageInfo-regionCount-arraylength"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfo-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Each element of <a href="chap22.html#VkCopyMemoryToImageInfo">VkCopyMemoryToImageInfo</a>::<code>pRegions</code> is a structure
defined as:</p>
</div>
<div id="VkMemoryToImageCopy" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_4</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkMemoryToImageCopy</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>             <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                 <span class="n">pNext</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                 <span class="n">pHostPointer</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                    <span class="n">memoryRowLength</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                    <span class="n">memoryImageHeight</span><span class="p">;</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">imageSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">imageOffset</span><span class="p">;</span>
    <span class="n">VkExtent3D</span>                  <span class="n">imageExtent</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkMemoryToImageCopy</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkMemoryToImageCopyEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_host_image_copy</span>
<span class="k">typedef</span> <span class="n">VkMemoryToImageCopy</span> <span class="n">VkMemoryToImageCopyEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="chap3.html#VkStructureType">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pHostPointer</code> is the host memory address which is the source of the
copy.</p>
</li>
<li>
<p><code>memoryRowLength</code> and <code>memoryImageHeight</code> specify in texels a
subregion of a larger two- or three-dimensional image in host memory,
and control the addressing calculations.
If either of these values is zero, that aspect of the host memory is
considered to be tightly packed according to the <code>imageExtent</code>.</p>
</li>
<li>
<p><code>imageSubresource</code> is a <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> used to
specify the specific image subresources of the image used for the source
or destination image data.</p>
</li>
<li>
<p><code>imageOffset</code> selects the initial <code>x</code>, <code>y</code>, <code>z</code> offsets
in texels of the sub-region of the destination image data.</p>
</li>
<li>
<p><code>imageExtent</code> is the size in texels of the image to copy in
<code>width</code>, <code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This structure is functionally similar to <a href="chap22.html#VkBufferImageCopy2">VkBufferImageCopy2</a>, except
it defines host memory as the source of copy instead of a buffer.
In particular, the same data packing rules and restrictions as that
structure apply here as well.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkMemoryToImageCopy-pHostPointer-09061" href="chap22.html#VUID-VkMemoryToImageCopy-pHostPointer-09061"></a> <span class="vuid">VUID-VkMemoryToImageCopy-pHostPointer-09061</span><br>

<code>pHostPointer</code> <strong class="purple">must</strong> point to memory that is large enough to contain
all memory locations that are accessed according to
<a href="chap22.html#copies-buffers-images-addressing">Buffer and Image Addressing</a>, for
each element of <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-VkMemoryToImageCopy-pRegions-09062" href="chap22.html#VUID-VkMemoryToImageCopy-pRegions-09062"></a> <span class="vuid">VUID-VkMemoryToImageCopy-pRegions-09062</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong class="purple">must</strong> not overlap
in memory</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkMemoryToImageCopy-memoryRowLength-09101" href="chap22.html#VUID-VkMemoryToImageCopy-memoryRowLength-09101"></a> <span class="vuid">VUID-VkMemoryToImageCopy-memoryRowLength-09101</span><br>

<code>memoryRowLength</code> <strong class="purple">must</strong> be <code>0</code>, or greater than or equal to the
<code>width</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkMemoryToImageCopy-memoryImageHeight-09102" href="chap22.html#VUID-VkMemoryToImageCopy-memoryImageHeight-09102"></a> <span class="vuid">VUID-VkMemoryToImageCopy-memoryImageHeight-09102</span><br>

<code>memoryImageHeight</code> <strong class="purple">must</strong> be <code>0</code>, or greater than or equal to the
<code>height</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkMemoryToImageCopy-aspectMask-09103" href="chap22.html#VUID-VkMemoryToImageCopy-aspectMask-09103"></a> <span class="vuid">VUID-VkMemoryToImageCopy-aspectMask-09103</span><br>

The <code>aspectMask</code> member of <code>imageSubresource</code> <strong class="purple">must</strong> only have a
single bit set</p>
</li>
<li>
<p><a id="VUID-VkMemoryToImageCopy-imageExtent-06659" href="chap22.html#VUID-VkMemoryToImageCopy-imageExtent-06659"></a> <span class="vuid">VUID-VkMemoryToImageCopy-imageExtent-06659</span><br>

<code>imageExtent.width</code> <strong class="purple">must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkMemoryToImageCopy-imageExtent-06660" href="chap22.html#VUID-VkMemoryToImageCopy-imageExtent-06660"></a> <span class="vuid">VUID-VkMemoryToImageCopy-imageExtent-06660</span><br>

<code>imageExtent.height</code> <strong class="purple">must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkMemoryToImageCopy-imageExtent-06661" href="chap22.html#VUID-VkMemoryToImageCopy-imageExtent-06661"></a> <span class="vuid">VUID-VkMemoryToImageCopy-imageExtent-06661</span><br>

<code>imageExtent.depth</code> <strong class="purple">must</strong> not be 0</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkMemoryToImageCopy-sType-sType" href="chap22.html#VUID-VkMemoryToImageCopy-sType-sType"></a> <span class="vuid">VUID-VkMemoryToImageCopy-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_MEMORY_TO_IMAGE_COPY</code></p>
</li>
<li>
<p><a id="VUID-VkMemoryToImageCopy-pNext-pNext" href="chap22.html#VUID-VkMemoryToImageCopy-pNext-pNext"></a> <span class="vuid">VUID-VkMemoryToImageCopy-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkMemoryToImageCopy-pHostPointer-parameter" href="chap22.html#VUID-VkMemoryToImageCopy-pHostPointer-parameter"></a> <span class="vuid">VUID-VkMemoryToImageCopy-pHostPointer-parameter</span><br>
 <code>pHostPointer</code> <strong class="purple">must</strong> be a pointer value</p>
</li>
<li>
<p><a id="VUID-VkMemoryToImageCopy-imageSubresource-parameter" href="chap22.html#VUID-VkMemoryToImageCopy-imageSubresource-parameter"></a> <span class="vuid">VUID-VkMemoryToImageCopy-imageSubresource-parameter</span><br>
 <code>imageSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from an image object to host memory, call:</p>
</div>
<div id="vkCopyImageToMemory" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_4</span>
<span class="n">VkResult</span> <span class="nf">vkCopyImageToMemory</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCopyImageToMemoryInfo</span><span class="o">*</span>              <span class="n">pCopyImageToMemoryInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkCopyImageToMemoryEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_host_image_copy</span>
<span class="n">VkResult</span> <span class="nf">vkCopyImageToMemoryEXT</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCopyImageToMemoryInfo</span><span class="o">*</span>              <span class="n">pCopyImageToMemoryInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the device which owns
<code>pCopyImageToMemoryInfo-&gt;srcImage</code>.</p>
</li>
<li>
<p><code>pCopyImageToMemoryInfo</code> is a pointer to a
<a href="chap22.html#VkCopyImageToMemoryInfo">VkCopyImageToMemoryInfo</a> structure describing the copy parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally similar to <a href="chap22.html#vkCmdCopyImageToBuffer2">vkCmdCopyImageToBuffer2</a>,
except it is executed on the host and writes to host memory instead of a
buffer.
The memory of <code>pCopyImageToMemoryInfo-&gt;srcImage</code> is accessed by the host
as if <a href="chap11.html#memory-coherent">coherent</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If the device has written to the image memory, it is not automatically made
available to the host.
Before this copy command can be called, a memory barrier for this image
<strong class="purple">must</strong> have been issued on the device with the second
<a href="chap7.html#synchronization-dependencies-scopes">synchronization scope</a> including
<code>VK_PIPELINE_STAGE_HOST_BIT</code> and <code>VK_ACCESS_HOST_READ_BIT</code>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCopyImageToMemory-device-parameter" href="chap22.html#VUID-vkCopyImageToMemory-device-parameter"></a> <span class="vuid">VUID-vkCopyImageToMemory-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCopyImageToMemory-pCopyImageToMemoryInfo-parameter" href="chap22.html#VUID-vkCopyImageToMemory-pCopyImageToMemoryInfo-parameter"></a> <span class="vuid">VUID-vkCopyImageToMemory-pCopyImageToMemoryInfo-parameter</span><br>
 <code>pCopyImageToMemoryInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap22.html#VkCopyImageToMemoryInfo">VkCopyImageToMemoryInfo</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
<li>
<p><code>VK_ERROR_MEMORY_MAP_FAILED</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_UNKNOWN</code></p>
</li>
<li>
<p><code>VK_ERROR_VALIDATION_FAILED</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyImageToMemoryInfo</code> structure is defined as:</p>
</div>
<div id="VkCopyImageToMemoryInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_4</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkCopyImageToMemoryInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>               <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                   <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkHostImageCopyFlags</span>          <span class="n">flags</span><span class="p">;</span>
    <span class="n">VkImage</span>                       <span class="n">srcImage</span><span class="p">;</span>
    <span class="n">VkImageLayout</span>                 <span class="n">srcImageLayout</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                      <span class="n">regionCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkImageToMemoryCopy</span><span class="o">*</span>    <span class="n">pRegions</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkCopyImageToMemoryInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkCopyImageToMemoryInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_host_image_copy</span>
<span class="k">typedef</span> <span class="n">VkCopyImageToMemoryInfo</span> <span class="n">VkCopyImageToMemoryInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="chap3.html#VkStructureType">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap22.html#VkHostImageCopyFlagBits">VkHostImageCopyFlagBits</a> values
describing additional copy parameters.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the copy.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap22.html#VkImageToMemoryCopy">VkImageToMemoryCopy</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkCopyImageToMemory</code> does not check whether the device memory
associated with <code>srcImage</code> is currently in use before performing the
copy.
The application <strong class="purple">must</strong> guarantee that any previously submitted command that
writes to the copy regions has completed before the host performs the copy.</p>
</div>
<div class="paragraph">
<p>Copy regions for the image <strong class="purple">must</strong> be aligned to a multiple of the texel block
extent in each dimension, except at the edges of the image, where region
extents <strong class="purple">must</strong> match the edge of the image.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-srcImage-09109" href="chap22.html#VUID-VkCopyImageToMemoryInfo-srcImage-09109"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-srcImage-09109</span><br>

If <code>srcImage</code> is sparse then all memory ranges accessed by the
copy command <strong class="purple">must</strong> be bound as described in
<a href="chap35.html#sparsememory-resource-binding">Binding Resource Memory</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-srcImage-09111" href="chap22.html#VUID-VkCopyImageToMemoryInfo-srcImage-09111"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-srcImage-09111</span><br>

If the stencil aspect of <code>srcImage</code> is accessed, and
<code>srcImage</code> was not created with
<a href="chap12.html#VkImageStencilUsageCreateInfo">separate stencil usage</a>,
<code>srcImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT</code> set in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-srcImage-09112" href="chap22.html#VUID-VkCopyImageToMemoryInfo-srcImage-09112"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-srcImage-09112</span><br>

If the stencil aspect of <code>srcImage</code> is accessed, and
<code>srcImage</code> was created with
<a href="chap12.html#VkImageStencilUsageCreateInfo">separate stencil usage</a>,
<code>srcImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT</code> set in
<a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-srcImage-09113" href="chap22.html#VUID-VkCopyImageToMemoryInfo-srcImage-09113"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-srcImage-09113</span><br>

If non-stencil aspects of <code>srcImage</code> are accessed,
<code>srcImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT</code> set in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-imageOffset-09114" href="chap22.html#VUID-VkCopyImageToMemoryInfo-imageOffset-09114"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-imageOffset-09114</span><br>

If <code>flags</code> contains <code>VK_HOST_IMAGE_COPY_MEMCPY_BIT</code>, the
<code>x</code>, <code>y</code>, and <code>z</code> members of the <code>imageOffset</code> member
of each element of <code>pRegions</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-srcImage-09115" href="chap22.html#VUID-VkCopyImageToMemoryInfo-srcImage-09115"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-srcImage-09115</span><br>

If <code>flags</code> contains <code>VK_HOST_IMAGE_COPY_MEMCPY_BIT</code>, the
<code>imageExtent</code> member of each element of <code>pRegions</code> <strong class="purple">must</strong> equal
the extents of <code>srcImage</code> identified by <code>imageSubresource</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-srcImage-07966" href="chap22.html#VUID-VkCopyImageToMemoryInfo-srcImage-07966"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-srcImage-07966</span><br>

If <code>srcImage</code> is non-sparse then the image
or the specified <em>disjoint</em> plane
<strong class="purple">must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-imageSubresource-07967" href="chap22.html#VUID-VkCopyImageToMemoryInfo-imageSubresource-07967"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-imageSubresource-07967</span><br>

The <code>imageSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-imageSubresource-07968" href="chap22.html#VUID-VkCopyImageToMemoryInfo-imageSubresource-07968"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-imageSubresource-07968</span><br>

If <code>imageSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>,
<span class="eq"><code>imageSubresource.baseArrayLayer</code> + 
<code>imageSubresource.layerCount</code></span> of each element of <code>pRegions</code>
<strong class="purple">must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-srcImage-07969" href="chap22.html#VUID-VkCopyImageToMemoryInfo-srcImage-07969"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-srcImage-07969</span><br>

<code>srcImage</code> <strong class="purple">must</strong> not have been created with <code>flags</code>
containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-imageSubresource-07971" href="chap22.html#VUID-VkCopyImageToMemoryInfo-imageSubresource-07971"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-imageSubresource-07971</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.x</code> and
<span class="eq">(<code>imageExtent.width</code> +  <code>imageOffset.x</code>)</span> <strong class="purple">must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the width
of the specified <code>imageSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-imageSubresource-07972" href="chap22.html#VUID-VkCopyImageToMemoryInfo-imageSubresource-07972"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-imageSubresource-07972</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.y</code> and
<span class="eq">(<code>imageExtent.height</code> +  <code>imageOffset.y</code>)</span> <strong class="purple">must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the
height of the specified <code>imageSubresource</code> of <code>srcImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-srcImage-07973" href="chap22.html#VUID-VkCopyImageToMemoryInfo-srcImage-07973"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-srcImage-07973</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-srcImage-07979" href="chap22.html#VUID-VkCopyImageToMemoryInfo-srcImage-07979"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-srcImage-07979</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>imageOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>imageExtent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-imageOffset-09104" href="chap22.html#VUID-VkCopyImageToMemoryInfo-imageOffset-09104"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-imageOffset-09104</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> and
<span class="eq">(<code>imageExtent.depth</code> +  <code>imageOffset.z</code>)</span> <strong class="purple">must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the depth
of the specified <code>imageSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-srcImage-07980" href="chap22.html#VUID-VkCopyImageToMemoryInfo-srcImage-07980"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-srcImage-07980</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>imageOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and <code>imageExtent.depth</code> <strong class="purple">must</strong>
be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-srcImage-07274" href="chap22.html#VUID-VkCopyImageToMemoryInfo-srcImage-07274"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-srcImage-07274</span><br>

For each element of <code>pRegions</code>,
if <a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code>,
<code>imageOffset.x</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-imageOffset-10051" href="chap22.html#VUID-VkCopyImageToMemoryInfo-imageOffset-10051"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-imageOffset-10051</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>, and <code>imageOffset.x</code>
does not equal the width of the subresource specified by
<code>imageSubresource</code>, <code>imageOffset.x</code> <strong class="purple">must</strong> be a multiple of
the <a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-srcImage-07275" href="chap22.html#VUID-VkCopyImageToMemoryInfo-srcImage-07275"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-srcImage-07275</span><br>

For each element of <code>pRegions</code>,
if <a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>,
<code>imageOffset.y</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-imageOffset-10052" href="chap22.html#VUID-VkCopyImageToMemoryInfo-imageOffset-10052"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-imageOffset-10052</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, and <code>imageOffset.y</code>
does not equal the height of the subresource specified by
<code>imageSubresource</code>, <code>imageOffset.y</code> <strong class="purple">must</strong> be a multiple of
the <a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-srcImage-07276" href="chap22.html#VUID-VkCopyImageToMemoryInfo-srcImage-07276"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-srcImage-07276</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
depth</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-srcImage-00207" href="chap22.html#VUID-VkCopyImageToMemoryInfo-srcImage-00207"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-srcImage-00207</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code>,
the sum of <code>imageOffset.x</code> and <code>extent.width</code> does not equal
the width of the subresource specified by <code>imageSubresource</code>,
<code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-imageOffset-10053" href="chap22.html#VUID-VkCopyImageToMemoryInfo-imageOffset-10053"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-imageOffset-10053</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>, the difference of
<code>imageOffset.x</code> and <code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-imageOffset-10054" href="chap22.html#VUID-VkCopyImageToMemoryInfo-imageOffset-10054"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-imageOffset-10054</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, the difference of
<code>imageOffset.x</code> and <code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-imageOffset-10055" href="chap22.html#VUID-VkCopyImageToMemoryInfo-imageOffset-10055"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-imageOffset-10055</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code>, the sum of
<code>imageOffset.x</code> and <code>extent.height</code> does not equal the width
of the subresource specified by <code>imageSubresource</code>,
<code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-srcImage-00208" href="chap22.html#VUID-VkCopyImageToMemoryInfo-srcImage-00208"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-srcImage-00208</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code>, and
the sum of <code>imageOffset.y</code> and <code>extent.height</code> does not equal
the height of the subresource specified by <code>imageSubresource</code>,
<code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-imageOffset-10056" href="chap22.html#VUID-VkCopyImageToMemoryInfo-imageOffset-10056"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-imageOffset-10056</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>, the sum of
<code>imageOffset.y</code> and <code>extent.width</code> does not equal the height
of the subresource specified by <code>imageSubresource</code>,
<code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-imageOffset-10057" href="chap22.html#VUID-VkCopyImageToMemoryInfo-imageOffset-10057"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-imageOffset-10057</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, the difference of
<code>imageOffset.y</code> and <code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-imageOffset-10058" href="chap22.html#VUID-VkCopyImageToMemoryInfo-imageOffset-10058"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-imageOffset-10058</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code>, the difference of
<code>imageOffset.y</code> and <code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-srcImage-00209" href="chap22.html#VUID-VkCopyImageToMemoryInfo-srcImage-00209"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-srcImage-00209</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.z</code>
and <code>extent.depth</code> does not equal the depth of the subresource
specified by <code>srcSubresource</code>, <code>extent.depth</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
depth</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-imageSubresource-09105" href="chap22.html#VUID-VkCopyImageToMemoryInfo-imageSubresource-09105"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-imageSubresource-09105</span><br>

For each element of <code>pRegions</code>, <code>imageSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-srcImage-07981" href="chap22.html#VUID-VkCopyImageToMemoryInfo-srcImage-07981"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-srcImage-07981</span><br>

If <code>srcImage</code> has a <a href="chap53.html#formats-multiplanar">multi-planar
format</a>, then for each element of <code>pRegions</code>,
<code>imageSubresource.aspectMask</code> <strong class="purple">must</strong> be a single valid
<a href="chap53.html#formats-multiplanar-image-aspect">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-srcImage-07983" href="chap22.html#VUID-VkCopyImageToMemoryInfo-srcImage-07983"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-srcImage-07983</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each
element of <code>pRegions</code>, <code>imageSubresource.baseArrayLayer</code> <strong class="purple">must</strong>
be <code>0</code> and <code>imageSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-memoryRowLength-09106" href="chap22.html#VUID-VkCopyImageToMemoryInfo-memoryRowLength-09106"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-memoryRowLength-09106</span><br>

For each element of <code>pRegions</code>, <code>memoryRowLength</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
width</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-memoryImageHeight-09107" href="chap22.html#VUID-VkCopyImageToMemoryInfo-memoryImageHeight-09107"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-memoryImageHeight-09107</span><br>

For each element of <code>pRegions</code>, <code>memoryImageHeight</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
height</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-memoryRowLength-09108" href="chap22.html#VUID-VkCopyImageToMemoryInfo-memoryRowLength-09108"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-memoryRowLength-09108</span><br>

For each element of <code>pRegions</code>, <code>memoryRowLength</code> divided by
the <a href="chap53.html#formats-compatibility-classes">texel block extent width</a> and then
multiplied by the texel block size of <code>srcImage</code> <strong class="purple">must</strong> be less
than or equal to <span class="eq">2<sup>31</sup>-1</span></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-srcImageLayout-09064" href="chap22.html#VUID-VkCopyImageToMemoryInfo-srcImageLayout-09064"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-srcImageLayout-09064</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> specify the current layout of the image
subresources of <code>srcImage</code> specified in <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-srcImageLayout-09065" href="chap22.html#VUID-VkCopyImageToMemoryInfo-srcImageLayout-09065"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-srcImageLayout-09065</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> be one of the image layouts returned in
<a href="chap52.html#VkPhysicalDeviceHostImageCopyProperties">VkPhysicalDeviceHostImageCopyProperties</a>::<code>pCopySrcLayouts</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-flags-09394" href="chap22.html#VUID-VkCopyImageToMemoryInfo-flags-09394"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-flags-09394</span><br>

If <code>flags</code> includes <code>VK_HOST_IMAGE_COPY_MEMCPY_BIT</code>, for each
region in <code>pRegions</code>, <code>memoryRowLength</code> and
<code>memoryImageHeight</code> <strong class="purple">must</strong> both be 0</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-sType-sType" href="chap22.html#VUID-VkCopyImageToMemoryInfo-sType-sType"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_COPY_IMAGE_TO_MEMORY_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-pNext-pNext" href="chap22.html#VUID-VkCopyImageToMemoryInfo-pNext-pNext"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-flags-parameter" href="chap22.html#VUID-VkCopyImageToMemoryInfo-flags-parameter"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap22.html#VkHostImageCopyFlagBits">VkHostImageCopyFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-srcImage-parameter" href="chap22.html#VUID-VkCopyImageToMemoryInfo-srcImage-parameter"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-srcImage-parameter</span><br>
 <code>srcImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-srcImageLayout-parameter" href="chap22.html#VUID-VkCopyImageToMemoryInfo-srcImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-pRegions-parameter" href="chap22.html#VUID-VkCopyImageToMemoryInfo-pRegions-parameter"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap22.html#VkImageToMemoryCopy">VkImageToMemoryCopy</a> structures</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfo-regionCount-arraylength" href="chap22.html#VUID-VkCopyImageToMemoryInfo-regionCount-arraylength"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfo-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Each element of <a href="chap22.html#VkCopyImageToMemoryInfo">VkCopyImageToMemoryInfo</a>::<code>pRegions</code> is a structure
defined as:</p>
</div>
<div id="VkImageToMemoryCopy" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_4</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageToMemoryCopy</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>             <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                 <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                       <span class="n">pHostPointer</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                    <span class="n">memoryRowLength</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                    <span class="n">memoryImageHeight</span><span class="p">;</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">imageSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">imageOffset</span><span class="p">;</span>
    <span class="n">VkExtent3D</span>                  <span class="n">imageExtent</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageToMemoryCopy</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkImageToMemoryCopyEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_host_image_copy</span>
<span class="k">typedef</span> <span class="n">VkImageToMemoryCopy</span> <span class="n">VkImageToMemoryCopyEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="chap3.html#VkStructureType">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pHostPointer</code> is the host memory address which is the destination
of the copy.</p>
</li>
<li>
<p><code>memoryRowLength</code> and <code>memoryImageHeight</code> specify in texels a
subregion of a larger two- or three-dimensional image in host memory,
and control the addressing calculations.
If either of these values is zero, that aspect of the host memory is
considered to be tightly packed according to the <code>imageExtent</code>.</p>
</li>
<li>
<p><code>imageSubresource</code> is a <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> used to
specify the specific image subresources of the image used for the source
or destination image data.</p>
</li>
<li>
<p><code>imageOffset</code> selects the initial <code>x</code>, <code>y</code>, <code>z</code> offsets
in texels of the sub-region of the source image data.</p>
</li>
<li>
<p><code>imageExtent</code> is the size in texels of the image to copy in
<code>width</code>, <code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This structure is functionally similar to <a href="chap22.html#VkBufferImageCopy2">VkBufferImageCopy2</a>, except
it defines host memory as the target of copy instead of a buffer.
In particular, the same data packing rules and restrictions as that
structure apply here as well.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageToMemoryCopy-pHostPointer-09066" href="chap22.html#VUID-VkImageToMemoryCopy-pHostPointer-09066"></a> <span class="vuid">VUID-VkImageToMemoryCopy-pHostPointer-09066</span><br>

<code>pHostPointer</code> <strong class="purple">must</strong> point to memory that is large enough to contain
all memory locations that are accessed according to
<a href="chap22.html#copies-buffers-images-addressing">Buffer and Image Addressing</a>, for
each element of <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-VkImageToMemoryCopy-pRegions-09067" href="chap22.html#VUID-VkImageToMemoryCopy-pRegions-09067"></a> <span class="vuid">VUID-VkImageToMemoryCopy-pRegions-09067</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong class="purple">must</strong> not overlap
in memory</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageToMemoryCopy-memoryRowLength-09101" href="chap22.html#VUID-VkImageToMemoryCopy-memoryRowLength-09101"></a> <span class="vuid">VUID-VkImageToMemoryCopy-memoryRowLength-09101</span><br>

<code>memoryRowLength</code> <strong class="purple">must</strong> be <code>0</code>, or greater than or equal to the
<code>width</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkImageToMemoryCopy-memoryImageHeight-09102" href="chap22.html#VUID-VkImageToMemoryCopy-memoryImageHeight-09102"></a> <span class="vuid">VUID-VkImageToMemoryCopy-memoryImageHeight-09102</span><br>

<code>memoryImageHeight</code> <strong class="purple">must</strong> be <code>0</code>, or greater than or equal to the
<code>height</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkImageToMemoryCopy-aspectMask-09103" href="chap22.html#VUID-VkImageToMemoryCopy-aspectMask-09103"></a> <span class="vuid">VUID-VkImageToMemoryCopy-aspectMask-09103</span><br>

The <code>aspectMask</code> member of <code>imageSubresource</code> <strong class="purple">must</strong> only have a
single bit set</p>
</li>
<li>
<p><a id="VUID-VkImageToMemoryCopy-imageExtent-06659" href="chap22.html#VUID-VkImageToMemoryCopy-imageExtent-06659"></a> <span class="vuid">VUID-VkImageToMemoryCopy-imageExtent-06659</span><br>

<code>imageExtent.width</code> <strong class="purple">must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkImageToMemoryCopy-imageExtent-06660" href="chap22.html#VUID-VkImageToMemoryCopy-imageExtent-06660"></a> <span class="vuid">VUID-VkImageToMemoryCopy-imageExtent-06660</span><br>

<code>imageExtent.height</code> <strong class="purple">must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkImageToMemoryCopy-imageExtent-06661" href="chap22.html#VUID-VkImageToMemoryCopy-imageExtent-06661"></a> <span class="vuid">VUID-VkImageToMemoryCopy-imageExtent-06661</span><br>

<code>imageExtent.depth</code> <strong class="purple">must</strong> not be 0</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageToMemoryCopy-sType-sType" href="chap22.html#VUID-VkImageToMemoryCopy-sType-sType"></a> <span class="vuid">VUID-VkImageToMemoryCopy-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_TO_MEMORY_COPY</code></p>
</li>
<li>
<p><a id="VUID-VkImageToMemoryCopy-pNext-pNext" href="chap22.html#VUID-VkImageToMemoryCopy-pNext-pNext"></a> <span class="vuid">VUID-VkImageToMemoryCopy-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkImageToMemoryCopy-pHostPointer-parameter" href="chap22.html#VUID-VkImageToMemoryCopy-pHostPointer-parameter"></a> <span class="vuid">VUID-VkImageToMemoryCopy-pHostPointer-parameter</span><br>
 <code>pHostPointer</code> <strong class="purple">must</strong> be a pointer value</p>
</li>
<li>
<p><a id="VUID-VkImageToMemoryCopy-imageSubresource-parameter" href="chap22.html#VUID-VkImageToMemoryCopy-imageSubresource-parameter"></a> <span class="vuid">VUID-VkImageToMemoryCopy-imageSubresource-parameter</span><br>
 <code>imageSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in <a href="chap22.html#VkCopyMemoryToImageInfo">VkCopyMemoryToImageInfo</a>::<code>flags</code>,
<a href="chap22.html#VkCopyImageToMemoryInfo">VkCopyImageToMemoryInfo</a>::<code>flags</code>, and
<a href="chap22.html#VkCopyImageToImageInfo">VkCopyImageToImageInfo</a>::<code>flags</code>, specifying additional copy
parameters are:</p>
</div>
<div id="VkHostImageCopyFlagBits" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_4</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkHostImageCopyFlagBits</span> <span class="p">{</span>
    <span class="n">VK_HOST_IMAGE_COPY_MEMCPY_BIT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
  <span class="c1">// VK_HOST_IMAGE_COPY_MEMCPY is a deprecated alias</span>
    <span class="n">VK_HOST_IMAGE_COPY_MEMCPY</span> <span class="o">=</span> <span class="n">VK_HOST_IMAGE_COPY_MEMCPY_BIT</span><span class="p">,</span>
  <span class="c1">// Provided by VK_EXT_host_image_copy</span>
    <span class="n">VK_HOST_IMAGE_COPY_MEMCPY_BIT_EXT</span> <span class="o">=</span> <span class="n">VK_HOST_IMAGE_COPY_MEMCPY_BIT</span><span class="p">,</span>
  <span class="c1">// Provided by VK_EXT_host_image_copy</span>
  <span class="c1">// VK_HOST_IMAGE_COPY_MEMCPY_EXT is a deprecated alias</span>
    <span class="n">VK_HOST_IMAGE_COPY_MEMCPY_EXT</span> <span class="o">=</span> <span class="n">VK_HOST_IMAGE_COPY_MEMCPY_BIT</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkHostImageCopyFlagBits</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkHostImageCopyFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_host_image_copy</span>
<span class="k">typedef</span> <span class="n">VkHostImageCopyFlagBits</span> <span class="n">VkHostImageCopyFlagBitsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_HOST_IMAGE_COPY_MEMCPY_BIT</code> specifies that no memory layout
swizzling is to be applied during data copy.
For copies between memory and images, this flag indicates that image
data in host memory is swizzled in exactly the same way as the image
data on the device.
Using this flag indicates that the implementations <strong class="purple">may</strong> use a simple
memory copy to transfer the data between the host memory and the device
memory.
The format of the swizzled data in host memory is platform dependent and
is not defined in this specification.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkHostImageCopyFlags" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_4</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkHostImageCopyFlags</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkHostImageCopyFlagsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_host_image_copy</span>
<span class="k">typedef</span> <span class="n">VkHostImageCopyFlags</span> <span class="n">VkHostImageCopyFlagsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkHostImageCopyFlags</code> is a bitmask type for setting a mask of zero or
more <a href="chap22.html#VkHostImageCopyFlagBits">VkHostImageCopyFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from an image object to another image object using the host,
call:</p>
</div>
<div id="vkCopyImageToImage" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_4</span>
<span class="n">VkResult</span> <span class="nf">vkCopyImageToImage</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCopyImageToImageInfo</span><span class="o">*</span>               <span class="n">pCopyImageToImageInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkCopyImageToImageEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_host_image_copy</span>
<span class="n">VkResult</span> <span class="nf">vkCopyImageToImageEXT</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCopyImageToImageInfo</span><span class="o">*</span>               <span class="n">pCopyImageToImageInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the device which owns
<code>pCopyImageToImageInfo-&gt;srcImage</code> and
<code>pCopyImageToImageInfo-&gt;dstImage</code>.</p>
</li>
<li>
<p><code>pCopyImageToImageInfo</code> is a pointer to a
<a href="chap22.html#VkCopyImageToImageInfo">VkCopyImageToImageInfo</a> structure describing the copy parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally similar to <a href="chap22.html#vkCmdCopyImage2">vkCmdCopyImage2</a>, except it is
executed on the host.
The memory of <code>pCopyImageToImageInfo-&gt;srcImage</code> and
<code>pCopyImageToImageInfo-&gt;dstImage</code> is accessed by the host as if
<a href="chap11.html#memory-coherent">coherent</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If the device has written to the memory of
<code>pCopyImageToImageInfo-&gt;srcImage</code>, it is not automatically made
available to the host.
Before this copy command can be called, a memory barrier for this image
<strong class="purple">must</strong> have been issued on the device with the second
<a href="chap7.html#synchronization-dependencies-scopes">synchronization scope</a> including
<code>VK_PIPELINE_STAGE_HOST_BIT</code> and <code>VK_ACCESS_HOST_READ_BIT</code>.</p>
</div>
<div class="paragraph">
<p>Because queue submissions <a href="chap7.html#synchronization-submission-host-writes">automatically make host memory visible to the device</a>, there would not be a
need for a memory barrier before using the results of this copy operation in
<code>pCopyMemoryToImageInfo-&gt;dstImage</code> on the device.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCopyImageToImage-device-parameter" href="chap22.html#VUID-vkCopyImageToImage-device-parameter"></a> <span class="vuid">VUID-vkCopyImageToImage-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCopyImageToImage-pCopyImageToImageInfo-parameter" href="chap22.html#VUID-vkCopyImageToImage-pCopyImageToImageInfo-parameter"></a> <span class="vuid">VUID-vkCopyImageToImage-pCopyImageToImageInfo-parameter</span><br>
 <code>pCopyImageToImageInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap22.html#VkCopyImageToImageInfo">VkCopyImageToImageInfo</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
<li>
<p><code>VK_ERROR_MEMORY_MAP_FAILED</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_UNKNOWN</code></p>
</li>
<li>
<p><code>VK_ERROR_VALIDATION_FAILED</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyImageToImageInfo</code> structure is defined as:</p>
</div>
<div id="VkCopyImageToImageInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_4</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkCopyImageToImageInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>         <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>             <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkHostImageCopyFlags</span>    <span class="n">flags</span><span class="p">;</span>
    <span class="n">VkImage</span>                 <span class="n">srcImage</span><span class="p">;</span>
    <span class="n">VkImageLayout</span>           <span class="n">srcImageLayout</span><span class="p">;</span>
    <span class="n">VkImage</span>                 <span class="n">dstImage</span><span class="p">;</span>
    <span class="n">VkImageLayout</span>           <span class="n">dstImageLayout</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                <span class="n">regionCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkImageCopy2</span><span class="o">*</span>     <span class="n">pRegions</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkCopyImageToImageInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkCopyImageToImageInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_host_image_copy</span>
<span class="k">typedef</span> <span class="n">VkCopyImageToImageInfo</span> <span class="n">VkCopyImageToImageInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="chap3.html#VkStructureType">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap22.html#VkHostImageCopyFlagBits">VkHostImageCopyFlagBits</a> values
describing additional copy parameters.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the copy.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the copy.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap22.html#VkImageCopy2">VkImageCopy2</a> structures
specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkCopyImageToImage</code> does not check whether the device memory associated
with <code>srcImage</code> or <code>dstImage</code> is currently in use before performing
the copy.
The application <strong class="purple">must</strong> guarantee that any previously submitted command that
writes to the copy regions has completed before the host performs the copy.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcImage-09069" href="chap22.html#VUID-VkCopyImageToImageInfo-srcImage-09069"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcImage-09069</span><br>

<code>srcImage</code> and <code>dstImage</code> <strong class="purple">must</strong> have been created with identical
image creation parameters</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcImage-09109" href="chap22.html#VUID-VkCopyImageToImageInfo-srcImage-09109"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcImage-09109</span><br>

If <code>srcImage</code> is sparse then all memory ranges accessed by the
copy command <strong class="purple">must</strong> be bound as described in
<a href="chap35.html#sparsememory-resource-binding">Binding Resource Memory</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcImage-09111" href="chap22.html#VUID-VkCopyImageToImageInfo-srcImage-09111"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcImage-09111</span><br>

If the stencil aspect of <code>srcImage</code> is accessed, and
<code>srcImage</code> was not created with
<a href="chap12.html#VkImageStencilUsageCreateInfo">separate stencil usage</a>,
<code>srcImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT</code> set in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcImage-09112" href="chap22.html#VUID-VkCopyImageToImageInfo-srcImage-09112"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcImage-09112</span><br>

If the stencil aspect of <code>srcImage</code> is accessed, and
<code>srcImage</code> was created with
<a href="chap12.html#VkImageStencilUsageCreateInfo">separate stencil usage</a>,
<code>srcImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT</code> set in
<a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcImage-09113" href="chap22.html#VUID-VkCopyImageToImageInfo-srcImage-09113"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcImage-09113</span><br>

If non-stencil aspects of <code>srcImage</code> are accessed,
<code>srcImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT</code> set in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcOffset-09114" href="chap22.html#VUID-VkCopyImageToImageInfo-srcOffset-09114"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcOffset-09114</span><br>

If <code>flags</code> contains <code>VK_HOST_IMAGE_COPY_MEMCPY_BIT</code>, the
<code>x</code>, <code>y</code>, and <code>z</code> members of the <code>srcOffset</code> member
of each element of <code>pRegions</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcImage-09115" href="chap22.html#VUID-VkCopyImageToImageInfo-srcImage-09115"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcImage-09115</span><br>

If <code>flags</code> contains <code>VK_HOST_IMAGE_COPY_MEMCPY_BIT</code>, the
<code>extent</code> member of each element of <code>pRegions</code> <strong class="purple">must</strong> equal
the extents of <code>srcImage</code> identified by <code>srcSubresource</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcImage-07966" href="chap22.html#VUID-VkCopyImageToImageInfo-srcImage-07966"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcImage-07966</span><br>

If <code>srcImage</code> is non-sparse then the image
or the specified <em>disjoint</em> plane
<strong class="purple">must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcSubresource-07967" href="chap22.html#VUID-VkCopyImageToImageInfo-srcSubresource-07967"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcSubresource-07967</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcSubresource-07968" href="chap22.html#VUID-VkCopyImageToImageInfo-srcSubresource-07968"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcSubresource-07968</span><br>

If <code>srcSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>,
<span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code>
<strong class="purple">must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcImage-07969" href="chap22.html#VUID-VkCopyImageToImageInfo-srcImage-07969"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcImage-07969</span><br>

<code>srcImage</code> <strong class="purple">must</strong> not have been created with <code>flags</code>
containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcSubresource-07971" href="chap22.html#VUID-VkCopyImageToImageInfo-srcSubresource-07971"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcSubresource-07971</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>srcOffset.x</code>)</span> <strong class="purple">must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the width
of the specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcSubresource-07972" href="chap22.html#VUID-VkCopyImageToImageInfo-srcSubresource-07972"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcSubresource-07972</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>srcOffset.y</code>)</span> <strong class="purple">must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the
height of the specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcImage-07979" href="chap22.html#VUID-VkCopyImageToImageInfo-srcImage-07979"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcImage-07979</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>extent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcOffset-09104" href="chap22.html#VUID-VkCopyImageToImageInfo-srcOffset-09104"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcOffset-09104</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>srcOffset.z</code>)</span> <strong class="purple">must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the depth
of the specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcImage-07980" href="chap22.html#VUID-VkCopyImageToImageInfo-srcImage-07980"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcImage-07980</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>srcOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and <code>extent.depth</code> <strong class="purple">must</strong>
be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcImage-07274" href="chap22.html#VUID-VkCopyImageToImageInfo-srcImage-07274"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcImage-07274</span><br>

For each element of <code>pRegions</code>,
if <a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code>,
<code>srcOffset.x</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcOffset-10051" href="chap22.html#VUID-VkCopyImageToImageInfo-srcOffset-10051"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcOffset-10051</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>, and <code>srcOffset.x</code>
does not equal the width of the subresource specified by
<code>srcSubresource</code>, <code>srcOffset.x</code> <strong class="purple">must</strong> be a multiple of
the <a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcImage-07275" href="chap22.html#VUID-VkCopyImageToImageInfo-srcImage-07275"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcImage-07275</span><br>

For each element of <code>pRegions</code>,
if <a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>,
<code>srcOffset.y</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcOffset-10052" href="chap22.html#VUID-VkCopyImageToImageInfo-srcOffset-10052"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcOffset-10052</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, and <code>srcOffset.y</code>
does not equal the height of the subresource specified by
<code>srcSubresource</code>, <code>srcOffset.y</code> <strong class="purple">must</strong> be a multiple of
the <a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcImage-07276" href="chap22.html#VUID-VkCopyImageToImageInfo-srcImage-07276"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcImage-07276</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.z</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
depth</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcImage-00207" href="chap22.html#VUID-VkCopyImageToImageInfo-srcImage-00207"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcImage-00207</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code>,
the sum of <code>srcOffset.x</code> and <code>extent.width</code> does not equal
the width of the subresource specified by <code>srcSubresource</code>,
<code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcOffset-10053" href="chap22.html#VUID-VkCopyImageToImageInfo-srcOffset-10053"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcOffset-10053</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>, the difference of
<code>srcOffset.x</code> and <code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcOffset-10054" href="chap22.html#VUID-VkCopyImageToImageInfo-srcOffset-10054"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcOffset-10054</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, the difference of
<code>srcOffset.x</code> and <code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcOffset-10055" href="chap22.html#VUID-VkCopyImageToImageInfo-srcOffset-10055"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcOffset-10055</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code>, the sum of
<code>srcOffset.x</code> and <code>extent.height</code> does not equal the width
of the subresource specified by <code>srcSubresource</code>,
<code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcImage-00208" href="chap22.html#VUID-VkCopyImageToImageInfo-srcImage-00208"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcImage-00208</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code>, and
the sum of <code>srcOffset.y</code> and <code>extent.height</code> does not equal
the height of the subresource specified by <code>srcSubresource</code>,
<code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcOffset-10056" href="chap22.html#VUID-VkCopyImageToImageInfo-srcOffset-10056"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcOffset-10056</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>, the sum of
<code>srcOffset.y</code> and <code>extent.width</code> does not equal the height
of the subresource specified by <code>srcSubresource</code>,
<code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcOffset-10057" href="chap22.html#VUID-VkCopyImageToImageInfo-srcOffset-10057"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcOffset-10057</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, the difference of
<code>srcOffset.y</code> and <code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcOffset-10058" href="chap22.html#VUID-VkCopyImageToImageInfo-srcOffset-10058"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcOffset-10058</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code>, the difference of
<code>srcOffset.y</code> and <code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcImage-00209" href="chap22.html#VUID-VkCopyImageToImageInfo-srcImage-00209"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcImage-00209</span><br>

For each element of <code>pRegions</code>, if the sum of <code>srcOffset.z</code>
and <code>extent.depth</code> does not equal the depth of the subresource
specified by <code>srcSubresource</code>, <code>extent.depth</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
depth</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcSubresource-09105" href="chap22.html#VUID-VkCopyImageToImageInfo-srcSubresource-09105"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcSubresource-09105</span><br>

For each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcImage-07981" href="chap22.html#VUID-VkCopyImageToImageInfo-srcImage-07981"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcImage-07981</span><br>

If <code>srcImage</code> has a <a href="chap53.html#formats-multiplanar">multi-planar
format</a>, then for each element of <code>pRegions</code>,
<code>srcSubresource.aspectMask</code> <strong class="purple">must</strong> be a single valid
<a href="chap53.html#formats-multiplanar-image-aspect">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcImage-07983" href="chap22.html#VUID-VkCopyImageToImageInfo-srcImage-07983"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcImage-07983</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each
element of <code>pRegions</code>, <code>srcSubresource.baseArrayLayer</code> <strong class="purple">must</strong>
be <code>0</code> and <code>srcSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstImage-09109" href="chap22.html#VUID-VkCopyImageToImageInfo-dstImage-09109"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstImage-09109</span><br>

If <code>dstImage</code> is sparse then all memory ranges accessed by the
copy command <strong class="purple">must</strong> be bound as described in
<a href="chap35.html#sparsememory-resource-binding">Binding Resource Memory</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstImage-09111" href="chap22.html#VUID-VkCopyImageToImageInfo-dstImage-09111"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstImage-09111</span><br>

If the stencil aspect of <code>dstImage</code> is accessed, and
<code>dstImage</code> was not created with
<a href="chap12.html#VkImageStencilUsageCreateInfo">separate stencil usage</a>,
<code>dstImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT</code> set in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstImage-09112" href="chap22.html#VUID-VkCopyImageToImageInfo-dstImage-09112"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstImage-09112</span><br>

If the stencil aspect of <code>dstImage</code> is accessed, and
<code>dstImage</code> was created with
<a href="chap12.html#VkImageStencilUsageCreateInfo">separate stencil usage</a>,
<code>dstImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT</code> set in
<a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstImage-09113" href="chap22.html#VUID-VkCopyImageToImageInfo-dstImage-09113"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstImage-09113</span><br>

If non-stencil aspects of <code>dstImage</code> are accessed,
<code>dstImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT</code> set in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstOffset-09114" href="chap22.html#VUID-VkCopyImageToImageInfo-dstOffset-09114"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstOffset-09114</span><br>

If <code>flags</code> contains <code>VK_HOST_IMAGE_COPY_MEMCPY_BIT</code>, the
<code>x</code>, <code>y</code>, and <code>z</code> members of the <code>dstOffset</code> member
of each element of <code>pRegions</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstImage-09115" href="chap22.html#VUID-VkCopyImageToImageInfo-dstImage-09115"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstImage-09115</span><br>

If <code>flags</code> contains <code>VK_HOST_IMAGE_COPY_MEMCPY_BIT</code>, the
<code>extent</code> member of each element of <code>pRegions</code> <strong class="purple">must</strong> equal
the extents of <code>dstImage</code> identified by <code>dstSubresource</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstImage-07966" href="chap22.html#VUID-VkCopyImageToImageInfo-dstImage-07966"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstImage-07966</span><br>

If <code>dstImage</code> is non-sparse then the image
or the specified <em>disjoint</em> plane
<strong class="purple">must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstSubresource-07967" href="chap22.html#VUID-VkCopyImageToImageInfo-dstSubresource-07967"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstSubresource-07967</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstSubresource-07968" href="chap22.html#VUID-VkCopyImageToImageInfo-dstSubresource-07968"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstSubresource-07968</span><br>

If <code>dstSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>,
<span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code>
<strong class="purple">must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstImage-07969" href="chap22.html#VUID-VkCopyImageToImageInfo-dstImage-07969"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstImage-07969</span><br>

<code>dstImage</code> <strong class="purple">must</strong> not have been created with <code>flags</code>
containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstSubresource-07971" href="chap22.html#VUID-VkCopyImageToImageInfo-dstSubresource-07971"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstSubresource-07971</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>dstOffset.x</code>)</span> <strong class="purple">must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the width
of the specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstSubresource-07972" href="chap22.html#VUID-VkCopyImageToImageInfo-dstSubresource-07972"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstSubresource-07972</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>dstOffset.y</code>)</span> <strong class="purple">must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the
height of the specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstImage-07979" href="chap22.html#VUID-VkCopyImageToImageInfo-dstImage-07979"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstImage-07979</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>extent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstOffset-09104" href="chap22.html#VUID-VkCopyImageToImageInfo-dstOffset-09104"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstOffset-09104</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>dstOffset.z</code>)</span> <strong class="purple">must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the depth
of the specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstImage-07980" href="chap22.html#VUID-VkCopyImageToImageInfo-dstImage-07980"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstImage-07980</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>dstOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and <code>extent.depth</code> <strong class="purple">must</strong>
be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstImage-07274" href="chap22.html#VUID-VkCopyImageToImageInfo-dstImage-07274"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstImage-07274</span><br>

For each element of <code>pRegions</code>,
if <a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code>,
<code>dstOffset.x</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstOffset-10051" href="chap22.html#VUID-VkCopyImageToImageInfo-dstOffset-10051"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstOffset-10051</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>, and <code>dstOffset.x</code>
does not equal the width of the subresource specified by
<code>dstSubresource</code>, <code>dstOffset.x</code> <strong class="purple">must</strong> be a multiple of
the <a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstImage-07275" href="chap22.html#VUID-VkCopyImageToImageInfo-dstImage-07275"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstImage-07275</span><br>

For each element of <code>pRegions</code>,
if <a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>,
<code>dstOffset.y</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstOffset-10052" href="chap22.html#VUID-VkCopyImageToImageInfo-dstOffset-10052"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstOffset-10052</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code> or
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, and <code>dstOffset.y</code>
does not equal the height of the subresource specified by
<code>dstSubresource</code>, <code>dstOffset.y</code> <strong class="purple">must</strong> be a multiple of
the <a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstImage-07276" href="chap22.html#VUID-VkCopyImageToImageInfo-dstImage-07276"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstImage-07276</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.z</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
depth</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstImage-00207" href="chap22.html#VUID-VkCopyImageToImageInfo-dstImage-00207"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstImage-00207</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code>,
the sum of <code>dstOffset.x</code> and <code>extent.width</code> does not equal
the width of the subresource specified by <code>dstSubresource</code>,
<code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstOffset-10053" href="chap22.html#VUID-VkCopyImageToImageInfo-dstOffset-10053"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstOffset-10053</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>, the difference of
<code>dstOffset.x</code> and <code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstOffset-10054" href="chap22.html#VUID-VkCopyImageToImageInfo-dstOffset-10054"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstOffset-10054</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, the difference of
<code>dstOffset.x</code> and <code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstOffset-10055" href="chap22.html#VUID-VkCopyImageToImageInfo-dstOffset-10055"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstOffset-10055</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code>, the sum of
<code>dstOffset.x</code> and <code>extent.height</code> does not equal the width
of the subresource specified by <code>dstSubresource</code>,
<code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent width</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstImage-00208" href="chap22.html#VUID-VkCopyImageToImageInfo-dstImage-00208"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstImage-00208</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code>, and
the sum of <code>dstOffset.y</code> and <code>extent.height</code> does not equal
the height of the subresource specified by <code>dstSubresource</code>,
<code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstOffset-10056" href="chap22.html#VUID-VkCopyImageToImageInfo-dstOffset-10056"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstOffset-10056</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>, the sum of
<code>dstOffset.y</code> and <code>extent.width</code> does not equal the height
of the subresource specified by <code>dstSubresource</code>,
<code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstOffset-10057" href="chap22.html#VUID-VkCopyImageToImageInfo-dstOffset-10057"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstOffset-10057</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, the difference of
<code>dstOffset.y</code> and <code>extent.height</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstOffset-10058" href="chap22.html#VUID-VkCopyImageToImageInfo-dstOffset-10058"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstOffset-10058</span><br>

For each element of <code>pRegions</code>, if
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>::<code>transform</code> is equal to
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code>, the difference of
<code>dstOffset.y</code> and <code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
<a href="chap53.html#formats-compatibility-classes">texel block extent height</a> of the
<a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstImage-00209" href="chap22.html#VUID-VkCopyImageToImageInfo-dstImage-00209"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstImage-00209</span><br>

For each element of <code>pRegions</code>, if the sum of <code>dstOffset.z</code>
and <code>extent.depth</code> does not equal the depth of the subresource
specified by <code>srcSubresource</code>, <code>extent.depth</code> <strong class="purple">must</strong> be a
multiple of the <a href="chap53.html#formats-compatibility-classes">texel block extent
depth</a> of the <a href="chap53.html#VkFormat">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstSubresource-09105" href="chap22.html#VUID-VkCopyImageToImageInfo-dstSubresource-09105"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstSubresource-09105</span><br>

For each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstImage-07981" href="chap22.html#VUID-VkCopyImageToImageInfo-dstImage-07981"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstImage-07981</span><br>

If <code>dstImage</code> has a <a href="chap53.html#formats-multiplanar">multi-planar
format</a>, then for each element of <code>pRegions</code>,
<code>dstSubresource.aspectMask</code> <strong class="purple">must</strong> be a single valid
<a href="chap53.html#formats-multiplanar-image-aspect">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstImage-07983" href="chap22.html#VUID-VkCopyImageToImageInfo-dstImage-07983"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstImage-07983</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each
element of <code>pRegions</code>, <code>dstSubresource.baseArrayLayer</code> <strong class="purple">must</strong>
be <code>0</code> and <code>dstSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcImageLayout-09070" href="chap22.html#VUID-VkCopyImageToImageInfo-srcImageLayout-09070"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcImageLayout-09070</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> specify the current layout of the image
subresources of <code>srcImage</code> specified in <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstImageLayout-09071" href="chap22.html#VUID-VkCopyImageToImageInfo-dstImageLayout-09071"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstImageLayout-09071</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> specify the current layout of the image
subresources of <code>dstImage</code> specified in <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcImageLayout-09072" href="chap22.html#VUID-VkCopyImageToImageInfo-srcImageLayout-09072"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcImageLayout-09072</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> be one of the image layouts returned in
<a href="chap52.html#VkPhysicalDeviceHostImageCopyProperties">VkPhysicalDeviceHostImageCopyProperties</a>::<code>pCopySrcLayouts</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstImageLayout-09073" href="chap22.html#VUID-VkCopyImageToImageInfo-dstImageLayout-09073"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstImageLayout-09073</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> be one of the image layouts returned in
<a href="chap52.html#VkPhysicalDeviceHostImageCopyProperties">VkPhysicalDeviceHostImageCopyProperties</a>::<code>pCopyDstLayouts</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-sType-sType" href="chap22.html#VUID-VkCopyImageToImageInfo-sType-sType"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_COPY_IMAGE_TO_IMAGE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-pNext-pNext" href="chap22.html#VUID-VkCopyImageToImageInfo-pNext-pNext"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-flags-parameter" href="chap22.html#VUID-VkCopyImageToImageInfo-flags-parameter"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap22.html#VkHostImageCopyFlagBits">VkHostImageCopyFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcImage-parameter" href="chap22.html#VUID-VkCopyImageToImageInfo-srcImage-parameter"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcImage-parameter</span><br>
 <code>srcImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-srcImageLayout-parameter" href="chap22.html#VUID-VkCopyImageToImageInfo-srcImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstImage-parameter" href="chap22.html#VUID-VkCopyImageToImageInfo-dstImage-parameter"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstImage-parameter</span><br>
 <code>dstImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-dstImageLayout-parameter" href="chap22.html#VUID-VkCopyImageToImageInfo-dstImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-pRegions-parameter" href="chap22.html#VUID-VkCopyImageToImageInfo-pRegions-parameter"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap22.html#VkImageCopy2">VkImageCopy2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-regionCount-arraylength" href="chap22.html#VUID-VkCopyImageToImageInfo-regionCount-arraylength"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfo-commonparent" href="chap22.html#VUID-VkCopyImageToImageInfo-commonparent"></a> <span class="vuid">VUID-VkCopyImageToImageInfo-commonparent</span><br>
 Both of <code>dstImage</code>, and <code>srcImage</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indirect-copies"><a class="anchor" href="chap22.html#indirect-copies"></a>22.4. Indirect Copies</h3>
<div class="paragraph">
<p>An application can use indirect copies when the copy parameters are not
known during the command buffer creation time.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data between two memory regions by specifying copy parameters
indirectly in memory, call:</p>
</div>
<div id="vkCmdCopyMemoryIndirectKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_memory_indirect</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyMemoryIndirectKHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCopyMemoryIndirectInfoKHR</span><span class="o">*</span>          <span class="n">pCopyMemoryIndirectInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pCopyMemoryIndirectInfo</code> is a pointer to a
<a href="chap22.html#VkCopyMemoryIndirectInfoKHR">VkCopyMemoryIndirectInfoKHR</a> structure containing the copy
parameters, including the number of copies to execute and a strided
array of <a href="chap22.html#VkCopyMemoryIndirectCommandKHR">VkCopyMemoryIndirectCommandKHR</a> structures.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each region specified in the memory referenced by
<code>pCopyMemoryIndirectInfo-&gt;copyAddressRange</code> is copied from the source
region to the specified destination region.
The results are undefined if any of the source and destination regions
overlap in memory.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectKHR-indirectMemoryCopy-10935" href="chap22.html#VUID-vkCmdCopyMemoryIndirectKHR-indirectMemoryCopy-10935"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectKHR-indirectMemoryCopy-10935</span><br>

The <a href="chap51.html#features-indirectMemoryCopy"><code>indirectMemoryCopy</code></a> feature
<strong class="purple">must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectKHR-commandBuffer-10936" href="chap22.html#VUID-vkCmdCopyMemoryIndirectKHR-commandBuffer-10936"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectKHR-commandBuffer-10936</span><br>

The <a href="chap6.html#VkCommandPool">VkCommandPool</a> that <code>commandBuffer</code> was allocated from
<strong class="purple">must</strong> support at least one of the queue types specified in
<a href="chap52.html#VkPhysicalDeviceCopyMemoryIndirectPropertiesKHR">VkPhysicalDeviceCopyMemoryIndirectPropertiesKHR</a>::<code>supportedQueues</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectKHR-commandBuffer-10937" href="chap22.html#VUID-vkCmdCopyMemoryIndirectKHR-commandBuffer-10937"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectKHR-commandBuffer-10937</span><br>

<code>commandBuffer</code> must not be a protected command buffer</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectKHR-commandBuffer-parameter" href="chap22.html#VUID-vkCmdCopyMemoryIndirectKHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectKHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectKHR-pCopyMemoryIndirectInfo-parameter" href="chap22.html#VUID-vkCmdCopyMemoryIndirectKHR-pCopyMemoryIndirectInfo-parameter"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectKHR-pCopyMemoryIndirectInfo-parameter</span><br>
 <code>pCopyMemoryIndirectInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap22.html#VkCopyMemoryIndirectInfoKHR">VkCopyMemoryIndirectInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectKHR-commandBuffer-recording" href="chap22.html#VUID-vkCmdCopyMemoryIndirectKHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectKHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectKHR-commandBuffer-cmdpool" href="chap22.html#VUID-vkCmdCopyMemoryIndirectKHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectKHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support VK_QUEUE_COMPUTE_BIT, VK_QUEUE_GRAPHICS_BIT, or VK_QUEUE_TRANSFER_BIT operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectKHR-renderpass" href="chap22.html#VUID-vkCmdCopyMemoryIndirectKHR-renderpass"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectKHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectKHR-videocoding" href="chap22.html#VUID-vkCmdCopyMemoryIndirectKHR-videocoding"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectKHR-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap45.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VK_QUEUE_COMPUTE_BIT<br>
VK_QUEUE_GRAPHICS_BIT<br>
VK_QUEUE_TRANSFER_BIT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Conditional Rendering</div>
<div class="paragraph">
<p>vkCmdCopyMemoryIndirectKHR is not affected by <a href="chap23.html#drawing-conditional-rendering">conditional rendering</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap22.html#VkCopyMemoryIndirectInfoKHR">VkCopyMemoryIndirectInfoKHR</a> structure is defined as:</p>
</div>
<div id="VkCopyMemoryIndirectInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_memory_indirect</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkCopyMemoryIndirectInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                   <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                       <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkAddressCopyFlagsKHR</span>             <span class="n">srcCopyFlags</span><span class="p">;</span>
    <span class="n">VkAddressCopyFlagsKHR</span>             <span class="n">dstCopyFlags</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                          <span class="n">copyCount</span><span class="p">;</span>
    <span class="n">VkStridedDeviceAddressRangeKHR</span>    <span class="n">copyAddressRange</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkCopyMemoryIndirectInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="chap3.html#VkStructureType">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcCopyFlags</code> is a <a href="chap22.html#VkAddressCopyFlagsKHR">VkAddressCopyFlagsKHR</a> value defining the
copy flags for the source address range.</p>
</li>
<li>
<p><code>dstCopyFlags</code> is a <a href="chap22.html#VkAddressCopyFlagsKHR">VkAddressCopyFlagsKHR</a> value defining the
copy flags for the destination address range.</p>
</li>
<li>
<p><code>copyCount</code> is the number of copies to execute, and <strong class="purple">can</strong> be zero.</p>
</li>
<li>
<p><code>copyAddressRange</code> is a memory region specifying the copy
parameters.
It is laid out as an array of <a href="chap22.html#VkCopyMemoryIndirectCommandKHR">VkCopyMemoryIndirectCommandKHR</a>
structures.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryIndirectInfoKHR-srcCopyFlags-10938" href="chap22.html#VUID-VkCopyMemoryIndirectInfoKHR-srcCopyFlags-10938"></a> <span class="vuid">VUID-VkCopyMemoryIndirectInfoKHR-srcCopyFlags-10938</span><br>

If <code>srcCopyFlags</code> contains <code>VK_ADDRESS_COPY_SPARSE_BIT_KHR</code>, the
source memory regions accessed <strong class="purple">must</strong> be fully-resident</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryIndirectInfoKHR-dstCopyFlags-10939" href="chap22.html#VUID-VkCopyMemoryIndirectInfoKHR-dstCopyFlags-10939"></a> <span class="vuid">VUID-VkCopyMemoryIndirectInfoKHR-dstCopyFlags-10939</span><br>

If <code>dstCopyFlags</code> contains <code>VK_ADDRESS_COPY_SPARSE_BIT_KHR</code>, the
destination memory regions accessed <strong class="purple">must</strong> be fully-resident</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryIndirectInfoKHR-srcCopyFlags-10940" href="chap22.html#VUID-VkCopyMemoryIndirectInfoKHR-srcCopyFlags-10940"></a> <span class="vuid">VUID-VkCopyMemoryIndirectInfoKHR-srcCopyFlags-10940</span><br>

<code>srcCopyFlags</code> <strong class="purple">must</strong> not contain
<code>VK_ADDRESS_COPY_PROTECTED_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryIndirectInfoKHR-dstCopyFlags-10941" href="chap22.html#VUID-VkCopyMemoryIndirectInfoKHR-dstCopyFlags-10941"></a> <span class="vuid">VUID-VkCopyMemoryIndirectInfoKHR-dstCopyFlags-10941</span><br>

<code>dstCopyFlags</code> <strong class="purple">must</strong> not contain
<code>VK_ADDRESS_COPY_PROTECTED_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryIndirectInfoKHR-copyAddressRange-10942" href="chap22.html#VUID-VkCopyMemoryIndirectInfoKHR-copyAddressRange-10942"></a> <span class="vuid">VUID-VkCopyMemoryIndirectInfoKHR-copyAddressRange-10942</span><br>

<code>copyAddressRange.pname</code>:address <strong class="purple">must</strong> be 4 byte aligned</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryIndirectInfoKHR-copyAddressRange-10943" href="chap22.html#VUID-VkCopyMemoryIndirectInfoKHR-copyAddressRange-10943"></a> <span class="vuid">VUID-VkCopyMemoryIndirectInfoKHR-copyAddressRange-10943</span><br>

<code>copyAddressRange.pname</code>:stride <strong class="purple">must</strong> be a multiple of <code>4</code> and <strong class="purple">must</strong>
be greater than or equal to sizeof(<a href="chap22.html#VkCopyMemoryIndirectCommandKHR">VkCopyMemoryIndirectCommandKHR</a>)</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryIndirectInfoKHR-copyCount-10944" href="chap22.html#VUID-VkCopyMemoryIndirectInfoKHR-copyCount-10944"></a> <span class="vuid">VUID-VkCopyMemoryIndirectInfoKHR-copyCount-10944</span><br>

<code>copyCount</code> <strong class="purple">must</strong> be less than or equal to
<span class="eq"><code>copyAddressRange.pname</code>:size /
<code>copyAddressRange.pname</code>:stride</span></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryIndirectInfoKHR-copyAddressRange-10945" href="chap22.html#VUID-VkCopyMemoryIndirectInfoKHR-copyAddressRange-10945"></a> <span class="vuid">VUID-VkCopyMemoryIndirectInfoKHR-copyAddressRange-10945</span><br>

Any of the source or destination memory regions specified in
<code>copyAddressRange</code> <strong class="purple">must</strong> not overlap with any of the specified
destination memory regions</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryIndirectInfoKHR-sType-sType" href="chap22.html#VUID-VkCopyMemoryIndirectInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkCopyMemoryIndirectInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_COPY_MEMORY_INDIRECT_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryIndirectInfoKHR-pNext-pNext" href="chap22.html#VUID-VkCopyMemoryIndirectInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkCopyMemoryIndirectInfoKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryIndirectInfoKHR-srcCopyFlags-parameter" href="chap22.html#VUID-VkCopyMemoryIndirectInfoKHR-srcCopyFlags-parameter"></a> <span class="vuid">VUID-VkCopyMemoryIndirectInfoKHR-srcCopyFlags-parameter</span><br>
 <code>srcCopyFlags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap22.html#VkAddressCopyFlagBitsKHR">VkAddressCopyFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryIndirectInfoKHR-srcCopyFlags-requiredbitmask" href="chap22.html#VUID-VkCopyMemoryIndirectInfoKHR-srcCopyFlags-requiredbitmask"></a> <span class="vuid">VUID-VkCopyMemoryIndirectInfoKHR-srcCopyFlags-requiredbitmask</span><br>
 <code>srcCopyFlags</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryIndirectInfoKHR-dstCopyFlags-parameter" href="chap22.html#VUID-VkCopyMemoryIndirectInfoKHR-dstCopyFlags-parameter"></a> <span class="vuid">VUID-VkCopyMemoryIndirectInfoKHR-dstCopyFlags-parameter</span><br>
 <code>dstCopyFlags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap22.html#VkAddressCopyFlagBitsKHR">VkAddressCopyFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryIndirectInfoKHR-dstCopyFlags-requiredbitmask" href="chap22.html#VUID-VkCopyMemoryIndirectInfoKHR-dstCopyFlags-requiredbitmask"></a> <span class="vuid">VUID-VkCopyMemoryIndirectInfoKHR-dstCopyFlags-requiredbitmask</span><br>
 <code>dstCopyFlags</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The structure describing source and destination memory regions,
<code>VkCopyMemoryIndirectCommandKHR</code> is defined as:</p>
</div>
<div id="VkCopyMemoryIndirectCommandKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_memory_indirect</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkCopyMemoryIndirectCommandKHR</span> <span class="p">{</span>
    <span class="n">VkDeviceAddress</span>    <span class="n">srcAddress</span><span class="p">;</span>
    <span class="n">VkDeviceAddress</span>    <span class="n">dstAddress</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">size</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkCopyMemoryIndirectCommandKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkCopyMemoryIndirectCommandNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_copy_memory_indirect</span>
<span class="k">typedef</span> <span class="n">VkCopyMemoryIndirectCommandKHR</span> <span class="n">VkCopyMemoryIndirectCommandNV</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>srcAddress</code> is the starting address of the source device memory to
copy from.</p>
</li>
<li>
<p><code>dstAddress</code> is the starting address of the destination device
memory to copy to.</p>
</li>
<li>
<p><code>size</code> is the size of the copy in bytes.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryIndirectCommandKHR-srcAddress-10958" href="chap22.html#VUID-VkCopyMemoryIndirectCommandKHR-srcAddress-10958"></a> <span class="vuid">VUID-VkCopyMemoryIndirectCommandKHR-srcAddress-10958</span><br>

The <code>srcAddress</code> <strong class="purple">must</strong> be 4 byte aligned</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryIndirectCommandKHR-dstAddress-10959" href="chap22.html#VUID-VkCopyMemoryIndirectCommandKHR-dstAddress-10959"></a> <span class="vuid">VUID-VkCopyMemoryIndirectCommandKHR-dstAddress-10959</span><br>

The <code>dstAddress</code> <strong class="purple">must</strong> be 4 byte aligned</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryIndirectCommandKHR-size-10960" href="chap22.html#VUID-VkCopyMemoryIndirectCommandKHR-size-10960"></a> <span class="vuid">VUID-VkCopyMemoryIndirectCommandKHR-size-10960</span><br>

The <code>size</code> <strong class="purple">must</strong> be 4 byte aligned</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryIndirectCommandKHR-srcAddress-10961" href="chap22.html#VUID-VkCopyMemoryIndirectCommandKHR-srcAddress-10961"></a> <span class="vuid">VUID-VkCopyMemoryIndirectCommandKHR-srcAddress-10961</span><br>

The memory in range <span class="eq">[<code>srcAddress</code>, <code>srcAddress</code><br>
<code>size</code> - 1]</span> <strong class="purple">must</strong> be within the bounds of the memory allocation
backing <code>srcAddress</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryIndirectCommandKHR-dstAddress-10962" href="chap22.html#VUID-VkCopyMemoryIndirectCommandKHR-dstAddress-10962"></a> <span class="vuid">VUID-VkCopyMemoryIndirectCommandKHR-dstAddress-10962</span><br>

The memory in range <span class="eq">[<code>dstAddress</code>, <code>dstAddress</code><br>
<code>size</code> - 1]</span> <strong class="purple">must</strong> be within the bounds of the memory allocation
backing <code>dstAddress</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryIndirectCommandKHR-srcAddress-parameter" href="chap22.html#VUID-VkCopyMemoryIndirectCommandKHR-srcAddress-parameter"></a> <span class="vuid">VUID-VkCopyMemoryIndirectCommandKHR-srcAddress-parameter</span><br>
 <code>srcAddress</code> <strong class="purple">must</strong> be a valid <a href="chap3.html#VkDeviceAddress">VkDeviceAddress</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryIndirectCommandKHR-dstAddress-parameter" href="chap22.html#VUID-VkCopyMemoryIndirectCommandKHR-dstAddress-parameter"></a> <span class="vuid">VUID-VkCopyMemoryIndirectCommandKHR-dstAddress-parameter</span><br>
 <code>dstAddress</code> <strong class="purple">must</strong> be a valid <a href="chap3.html#VkDeviceAddress">VkDeviceAddress</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in a <a href="chap22.html#VkAddressCopyFlagsKHR">VkAddressCopyFlagsKHR</a> mask are:</p>
</div>
<div id="VkAddressCopyFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_memory_indirect</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkAddressCopyFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_ADDRESS_COPY_DEVICE_LOCAL_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_ADDRESS_COPY_SPARSE_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_ADDRESS_COPY_PROTECTED_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkAddressCopyFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_ADDRESS_COPY_DEVICE_LOCAL_BIT_KHR</code> specifies that the address
range is expected to be resident in device local memory.
Specifying this value is optional, but <strong class="purple">may</strong> lead to improved performance
if set accurately.</p>
</li>
<li>
<p><code>VK_ADDRESS_COPY_PROTECTED_BIT_KHR</code> specifies that the address range
is allocated from protected memory.</p>
</li>
<li>
<p><code>VK_ADDRESS_COPY_SPARSE_BIT_KHR</code> specifies that the address range
may not be fully bound to physical memory when accessed.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkAddressCopyFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_memory_indirect</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkAddressCopyFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkAddressCopyFlagsKHR</code> is a bitmask type for setting a mask of zero or
more <a href="chap22.html#VkAddressCopyFlagBitsKHR">VkAddressCopyFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data between two memory regions by specifying copy parameters
indirectly in memory, call:</p>
</div>
<div id="vkCmdCopyMemoryIndirectNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_copy_memory_indirect</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyMemoryIndirectNV</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkDeviceAddress</span>                             <span class="n">copyBufferAddress</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">copyCount</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">stride</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>copyBufferAddress</code> is the memory address specifying the copy
parameters.
It is laid out as an array of <a href="chap22.html#VkCopyMemoryIndirectCommandNV">VkCopyMemoryIndirectCommandNV</a>
structures.</p>
</li>
<li>
<p><code>copyCount</code> is the number of copies to execute, and <strong class="purple">can</strong> be zero.</p>
</li>
<li>
<p><code>stride</code> is the stride in bytes between successive sets of copy
parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each region read from <code>copyBufferAddress</code> is copied from the source
region to the specified destination region.
The results are undefined if any of the source and destination regions
overlap in memory.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectNV-None-07653" href="chap22.html#VUID-vkCmdCopyMemoryIndirectNV-None-07653"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectNV-None-07653</span><br>

The <a href="chap51.html#features-indirectCopy"><code>indirectCopy</code></a> feature <strong class="purple">must</strong> be
enabled</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectNV-copyBufferAddress-07654" href="chap22.html#VUID-vkCmdCopyMemoryIndirectNV-copyBufferAddress-07654"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectNV-copyBufferAddress-07654</span><br>

<code>copyBufferAddress</code> <strong class="purple">must</strong> be 4 byte aligned</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectNV-stride-07655" href="chap22.html#VUID-vkCmdCopyMemoryIndirectNV-stride-07655"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectNV-stride-07655</span><br>

<code>stride</code> <strong class="purple">must</strong> be a multiple of <code>4</code> and <strong class="purple">must</strong> be greater than or
equal to sizeof(<a href="chap22.html#VkCopyMemoryIndirectCommandNV">VkCopyMemoryIndirectCommandNV</a>)</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectNV-commandBuffer-07656" href="chap22.html#VUID-vkCmdCopyMemoryIndirectNV-commandBuffer-07656"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectNV-commandBuffer-07656</span><br>

The <a href="chap6.html#VkCommandPool">VkCommandPool</a> that <code>commandBuffer</code> was allocated from
<strong class="purple">must</strong> support at least one of the queue types specified in
<a href="chap52.html#VkPhysicalDeviceCopyMemoryIndirectPropertiesKHR">VkPhysicalDeviceCopyMemoryIndirectPropertiesKHR</a>::<code>supportedQueues</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectNV-copyBufferAddress-10946" href="chap22.html#VUID-vkCmdCopyMemoryIndirectNV-copyBufferAddress-10946"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectNV-copyBufferAddress-10946</span><br>

Any of the source or destination memory regions specified in
<code>copyBufferAddress</code> <strong class="purple">must</strong> not overlap with any of the specified
destination memory regions</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectNV-commandBuffer-parameter" href="chap22.html#VUID-vkCmdCopyMemoryIndirectNV-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectNV-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectNV-copyBufferAddress-parameter" href="chap22.html#VUID-vkCmdCopyMemoryIndirectNV-copyBufferAddress-parameter"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectNV-copyBufferAddress-parameter</span><br>
 <code>copyBufferAddress</code> <strong class="purple">must</strong> be a valid <a href="chap3.html#VkDeviceAddress">VkDeviceAddress</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectNV-commandBuffer-recording" href="chap22.html#VUID-vkCmdCopyMemoryIndirectNV-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectNV-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectNV-commandBuffer-cmdpool" href="chap22.html#VUID-vkCmdCopyMemoryIndirectNV-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectNV-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support VK_QUEUE_COMPUTE_BIT, VK_QUEUE_GRAPHICS_BIT, or VK_QUEUE_TRANSFER_BIT operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectNV-renderpass" href="chap22.html#VUID-vkCmdCopyMemoryIndirectNV-renderpass"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectNV-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectNV-videocoding" href="chap22.html#VUID-vkCmdCopyMemoryIndirectNV-videocoding"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectNV-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap45.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VK_QUEUE_COMPUTE_BIT<br>
VK_QUEUE_GRAPHICS_BIT<br>
VK_QUEUE_TRANSFER_BIT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Conditional Rendering</div>
<div class="paragraph">
<p>vkCmdCopyMemoryIndirectNV is not affected by <a href="chap23.html#drawing-conditional-rendering">conditional rendering</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from a memory region to an image object by specifying copy
parameters in memory, call:</p>
</div>
<div id="vkCmdCopyMemoryToImageIndirectKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_memory_indirect</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyMemoryToImageIndirectKHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCopyMemoryToImageIndirectInfoKHR</span><span class="o">*</span>   <span class="n">pCopyMemoryToImageIndirectInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pCopyMemoryToImageIndirectInfo</code> is a pointer to a
<a href="chap22.html#VkCopyMemoryToImageIndirectInfoKHR">VkCopyMemoryToImageIndirectInfoKHR</a> structure which contains the
copy parameters, including the number of copies to execute and a strided
array of <a href="chap22.html#VkCopyMemoryToImageIndirectCommandKHR">VkCopyMemoryToImageIndirectCommandKHR</a> structures.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each region specified in the memory referenced by
<code>pCopyMemoryToImageIndirectInfo-&gt;copyAddressRange</code> is copied from the
source region to an image region in the destination image.
If the destination image is of type <code>VK_IMAGE_TYPE_3D</code>, the starting
slice and number of slices to copy are specified in
<code>pImageSubresources-&gt;baseArrayLayer</code> and
<code>pImageSubresources-&gt;layerCount</code> respectively as <code>imageOffset</code> and
<code>imageExtent</code> from <a href="chap22.html#VkCopyMemoryToImageIndirectCommandKHR">VkCopyMemoryToImageIndirectCommandKHR</a> are only
available at device execution time.
The results are undefined if any of the source and destination regions
overlap in memory.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectKHR-indirectMemoryToImageCopy-10947" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectKHR-indirectMemoryToImageCopy-10947"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectKHR-indirectMemoryToImageCopy-10947</span><br>

The <a href="chap51.html#features-indirectMemoryToImageCopy"><code>indirectMemoryToImageCopy</code></a> feature <strong class="purple">must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectKHR-commandBuffer-10948" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectKHR-commandBuffer-10948"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectKHR-commandBuffer-10948</span><br>

The <a href="chap6.html#VkCommandPool">VkCommandPool</a> that <code>commandBuffer</code> was allocated from
<strong class="purple">must</strong> support at least one of the queue types specified in
<a href="chap52.html#VkPhysicalDeviceCopyMemoryIndirectPropertiesKHR">VkPhysicalDeviceCopyMemoryIndirectPropertiesKHR</a>::<code>supportedQueues</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectKHR-commandBuffer-10949" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectKHR-commandBuffer-10949"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectKHR-commandBuffer-10949</span><br>

<code>commandBuffer</code> must not be a protected command buffer</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectKHR-commandBuffer-parameter" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectKHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectKHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectKHR-pCopyMemoryToImageIndirectInfo-parameter" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectKHR-pCopyMemoryToImageIndirectInfo-parameter"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectKHR-pCopyMemoryToImageIndirectInfo-parameter</span><br>
 <code>pCopyMemoryToImageIndirectInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap22.html#VkCopyMemoryToImageIndirectInfoKHR">VkCopyMemoryToImageIndirectInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectKHR-commandBuffer-recording" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectKHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectKHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectKHR-commandBuffer-cmdpool" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectKHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectKHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support VK_QUEUE_COMPUTE_BIT, VK_QUEUE_GRAPHICS_BIT, or VK_QUEUE_TRANSFER_BIT operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectKHR-renderpass" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectKHR-renderpass"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectKHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectKHR-videocoding" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectKHR-videocoding"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectKHR-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap45.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VK_QUEUE_COMPUTE_BIT<br>
VK_QUEUE_GRAPHICS_BIT<br>
VK_QUEUE_TRANSFER_BIT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Conditional Rendering</div>
<div class="paragraph">
<p>vkCmdCopyMemoryToImageIndirectKHR is not affected by <a href="chap23.html#drawing-conditional-rendering">conditional rendering</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap22.html#VkCopyMemoryToImageIndirectInfoKHR">VkCopyMemoryToImageIndirectInfoKHR</a> structure is defined as:</p>
</div>
<div id="VkCopyMemoryToImageIndirectInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_memory_indirect</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkCopyMemoryToImageIndirectInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkAddressCopyFlagsKHR</span>              <span class="n">srcCopyFlags</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                           <span class="n">copyCount</span><span class="p">;</span>
    <span class="n">VkStridedDeviceAddressRangeKHR</span>     <span class="n">copyAddressRange</span><span class="p">;</span>
    <span class="n">VkImage</span>                            <span class="n">dstImage</span><span class="p">;</span>
    <span class="n">VkImageLayout</span>                      <span class="n">dstImageLayout</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkImageSubresourceLayers</span><span class="o">*</span>    <span class="n">pImageSubresources</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkCopyMemoryToImageIndirectInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="chap3.html#VkStructureType">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcCopyFlags</code> is a <a href="chap22.html#VkAddressCopyFlagsKHR">VkAddressCopyFlagsKHR</a> value defining the
copy flags for the source address range.</p>
</li>
<li>
<p><code>copyCount</code> is the number of copies to execute, and <strong class="purple">can</strong> be zero.</p>
</li>
<li>
<p><code>copyAddressRange</code> is a memory region specifying the copy
parameters.
It is laid out as an array of
<a href="chap22.html#VkCopyMemoryToImageIndirectCommandKHR">VkCopyMemoryToImageIndirectCommandKHR</a> structures.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the copy.</p>
</li>
<li>
<p><code>pImageSubresources</code> is a pointer to an array of <code>copyCount</code>
<a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structures, specifying the image
subresources of the destination image data for the copy operation.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-srcCopyFlags-10950" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-srcCopyFlags-10950"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-srcCopyFlags-10950</span><br>

If <code>srcCopyFlags</code> contains <code>VK_ADDRESS_COPY_SPARSE_BIT_KHR</code>, the
source memory regions accessed <strong class="purple">must</strong> be fully-resident</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-copyCount-10951" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-copyCount-10951"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-copyCount-10951</span><br>

<code>copyCount</code> <strong class="purple">must</strong> be less than or equal to
<span class="eq"><code>copyAddressRange.pname</code>:size /
<code>copyAddressRange.pname</code>:stride</span></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-copyAddressRange-10952" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-copyAddressRange-10952"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-copyAddressRange-10952</span><br>

<code>copyAddressRange.pname</code>:address <strong class="purple">must</strong> be 4 byte aligned</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-copyAddressRange-10953" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-copyAddressRange-10953"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-copyAddressRange-10953</span><br>

<code>copyAddressRange.pname</code>:stride <strong class="purple">must</strong> be a multiple of <code>4</code> and <strong class="purple">must</strong>
be greater than or equal to
sizeof(<a href="chap22.html#VkCopyMemoryToImageIndirectCommandKHR">VkCopyMemoryToImageIndirectCommandKHR</a>)</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-copyAddressRange-10954" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-copyAddressRange-10954"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-copyAddressRange-10954</span><br>

Any of the source or destination memory regions specified in
<code>copyAddressRange</code> <strong class="purple">must</strong> not overlap with any of the specified
destination memory regions</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-10955" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-10955"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-10955</span><br>

The format features of <code>dstImage</code> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_2_COPY_IMAGE_INDIRECT_DST_BIT_KHR</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-07661" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-07661"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-07661</span><br>

<code>dstImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-aspectMask-07662" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-aspectMask-07662"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-aspectMask-07662</span><br>

The <code>aspectMask</code> member for every subresource in
<code>pImageSubresources</code> <strong class="purple">must</strong> only have a single bit set</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-07663" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-07663"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-07663</span><br>

The image region specified by each element in <code>copyBufferAddress</code>
<strong class="purple">must</strong> be a region that is contained within <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-07664" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-07664"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-07664</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-07665" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-07665"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-07665</span><br>

If <code>dstImage</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-07973" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-07973"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-07973</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImageLayout-07667" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImageLayout-07667"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImageLayout-07667</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>dstImage</code> at the time this command is executed on a
<code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImageLayout-07669" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImageLayout-07669"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImageLayout-07669</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
or <code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-mipLevel-07670" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-mipLevel-07670"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-mipLevel-07670</span><br>

The specified <code>mipLevel</code> of each region in <code>pImageSubresources</code>
<strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-layerCount-08764" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-layerCount-08764"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-layerCount-08764</span><br>

If the specified <code>layerCount</code> of each region in
<code>pImageSubresources</code> is not <code>VK_REMAINING_ARRAY_LAYERS</code>, the
specified <code>baseArrayLayer</code> +  <code>layerCount</code> of each region in
<code>pImageSubresources</code> <strong class="purple">must</strong> be less than or equal to the
<code>arrayLayers</code> specified in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when
<code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-07673" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-07673"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-07673</span><br>

<code>dstImage</code> <strong class="purple">must</strong> not have been created with <code>flags</code> containing
<code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-commandBuffer-07674" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-commandBuffer-07674"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-commandBuffer-07674</span><br>

If the queue family used to create the <a href="chap6.html#VkCommandPool">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code>, for each region, the <code>aspectMask</code>
member of <code>pImageSubresources</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or <code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-10974" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-10974"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-10974</span><br>

The format features of <code>dstImage</code> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-copyBufferAddress-10975" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-copyBufferAddress-10975"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-copyBufferAddress-10975</span><br>

Any of the source or destination memory regions specified in
<code>copyBufferAddress</code> <strong class="purple">must</strong> not overlap with any of the specified
destination memory regions</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-sType-sType" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_COPY_MEMORY_TO_IMAGE_INDIRECT_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-pNext-pNext" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-srcCopyFlags-parameter" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-srcCopyFlags-parameter"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-srcCopyFlags-parameter</span><br>
 <code>srcCopyFlags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap22.html#VkAddressCopyFlagBitsKHR">VkAddressCopyFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-srcCopyFlags-requiredbitmask" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-srcCopyFlags-requiredbitmask"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-srcCopyFlags-requiredbitmask</span><br>
 <code>srcCopyFlags</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-parameter" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-parameter"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImage-parameter</span><br>
 <code>dstImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImageLayout-parameter" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-pImageSubresources-parameter" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-pImageSubresources-parameter"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-pImageSubresources-parameter</span><br>
 <code>pImageSubresources</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>copyCount</code> valid <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structures</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectInfoKHR-copyCount-arraylength" href="chap22.html#VUID-VkCopyMemoryToImageIndirectInfoKHR-copyCount-arraylength"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectInfoKHR-copyCount-arraylength</span><br>
 <code>copyCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The structure describing source and destination memory regions,
<code>VkCopyMemoryToImageIndirectCommandKHR</code> is defined as:</p>
</div>
<div id="VkCopyMemoryToImageIndirectCommandKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_memory_indirect</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkCopyMemoryToImageIndirectCommandKHR</span> <span class="p">{</span>
    <span class="n">VkDeviceAddress</span>             <span class="n">srcAddress</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                    <span class="n">bufferRowLength</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                    <span class="n">bufferImageHeight</span><span class="p">;</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">imageSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">imageOffset</span><span class="p">;</span>
    <span class="n">VkExtent3D</span>                  <span class="n">imageExtent</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkCopyMemoryToImageIndirectCommandKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkCopyMemoryToImageIndirectCommandNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_copy_memory_indirect</span>
<span class="k">typedef</span> <span class="n">VkCopyMemoryToImageIndirectCommandKHR</span> <span class="n">VkCopyMemoryToImageIndirectCommandNV</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>srcAddress</code> is the starting address of the source device memory to
copy from.</p>
</li>
<li>
<p><code>bufferRowLength</code> and <code>bufferImageHeight</code> specify in texels a
subregion of a larger two- or three-dimensional image in buffer memory,
and control the addressing calculations.
If either of these values is zero, that aspect of the buffer memory is
considered to be tightly packed according to the <code>imageExtent</code>.</p>
</li>
<li>
<p><code>imageSubresource</code> is a <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure
used to specify the specific image subresources of the image used for
the destination image data, which <strong class="purple">must</strong> match the value specified in
corresponding index of the
<code>pCopyMemoryToImageIndirectInfo-&gt;pImageSubresources</code> array of
<a href="chap22.html#vkCmdCopyMemoryToImageIndirectKHR">vkCmdCopyMemoryToImageIndirectKHR</a> during command recording.</p>
</li>
<li>
<p><code>imageOffset</code> selects the initial <code>x</code>, <code>y</code>, <code>z</code> offsets
in texels of the sub-region of the destination image data.</p>
</li>
<li>
<p><code>imageExtent</code> is the size in texels of the destination image in
<code>width</code>, <code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectCommandKHR-srcAddress-10963" href="chap22.html#VUID-VkCopyMemoryToImageIndirectCommandKHR-srcAddress-10963"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectCommandKHR-srcAddress-10963</span><br>

The <code>srcAddress</code> <strong class="purple">must</strong> be 4 byte aligned</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectCommandKHR-bufferRowLength-10964" href="chap22.html#VUID-VkCopyMemoryToImageIndirectCommandKHR-bufferRowLength-10964"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectCommandKHR-bufferRowLength-10964</span><br>

<code>bufferRowLength</code> <strong class="purple">must</strong> be <code>0</code>, or greater than or equal to the
<code>width</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectCommandKHR-bufferImageHeight-10965" href="chap22.html#VUID-VkCopyMemoryToImageIndirectCommandKHR-bufferImageHeight-10965"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectCommandKHR-bufferImageHeight-10965</span><br>

<code>bufferImageHeight</code> <strong class="purple">must</strong> be <code>0</code>, or greater than or equal to the
<code>height</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectCommandKHR-imageOffset-10966" href="chap22.html#VUID-VkCopyMemoryToImageIndirectCommandKHR-imageOffset-10966"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectCommandKHR-imageOffset-10966</span><br>

<code>imageOffset</code> <strong class="purple">must</strong> specify a valid offset in the destination image</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectCommandKHR-imageExtent-10967" href="chap22.html#VUID-VkCopyMemoryToImageIndirectCommandKHR-imageExtent-10967"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectCommandKHR-imageExtent-10967</span><br>

<code>imageExtent</code> <strong class="purple">must</strong> specify a valid region in the destination image
and <strong class="purple">can</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectCommandKHR-srcAddress-10968" href="chap22.html#VUID-VkCopyMemoryToImageIndirectCommandKHR-srcAddress-10968"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectCommandKHR-srcAddress-10968</span><br>

The memory region starting at <code>srcAddress</code> and described by
<code>bufferRowLength</code> and <code>bufferImageHeight</code> <strong class="purple">must</strong> not exceed the
bounds of the memory allocation backing memory at <code>srcAddress</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectCommandKHR-imageOffset-10969" href="chap22.html#VUID-VkCopyMemoryToImageIndirectCommandKHR-imageOffset-10969"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectCommandKHR-imageOffset-10969</span><br>

The <code>imageOffset</code> and <code>imageExtent</code> members of each region <strong class="purple">must</strong>
respect the image transfer granularity requirements of
<code>commandBuffer</code>’s command pool’s queue family, as described in
<a href="chap5.html#VkQueueFamilyProperties">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectCommandKHR-imageOffset-10970" href="chap22.html#VUID-VkCopyMemoryToImageIndirectCommandKHR-imageOffset-10970"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectCommandKHR-imageOffset-10970</span><br>

For each destination region, <code>imageOffset.x</code> and
<span class="eq">(<code>imageExtent.width</code> +  <code>imageOffset.x</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified subresource</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectCommandKHR-imageOffset-10971" href="chap22.html#VUID-VkCopyMemoryToImageIndirectCommandKHR-imageOffset-10971"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectCommandKHR-imageOffset-10971</span><br>

For each destination region, <code>imageOffset.y</code> and
<span class="eq">(<code>imageExtent.height</code> +  <code>imageOffset.y</code>)</span> <strong class="purple">must</strong> both
be greater than or equal to <code>0</code> and less than or equal to the height of
the specified subresource</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectCommandKHR-dstImage-10972" href="chap22.html#VUID-VkCopyMemoryToImageIndirectCommandKHR-dstImage-10972"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectCommandKHR-dstImage-10972</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each
destination region, <code>imageSubresource.baseArrayLayer</code> and
<span class="eq">(<code>imageSubresource.baseArrayLayer</code> + 
<code>imageSubresource.layerCount</code>)</span> <strong class="purple">must</strong> both be greater than or equal
to <code>0</code> and less than or equal to the depth of the specified subresource</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectCommandKHR-dstImage-10973" href="chap22.html#VUID-VkCopyMemoryToImageIndirectCommandKHR-dstImage-10973"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectCommandKHR-dstImage-10973</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, <code>imageOffset.z</code>
and <code>imageExtent.depth</code> are ignored as base slice and number of
slices to copy are read from <code>baseArrayLayer</code> and <code>layerCount</code>
from <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> in
<a href="chap22.html#VkCopyMemoryToImageIndirectInfoKHR">VkCopyMemoryToImageIndirectInfoKHR</a> at the time of command
recording</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectCommandKHR-srcAddress-parameter" href="chap22.html#VUID-VkCopyMemoryToImageIndirectCommandKHR-srcAddress-parameter"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectCommandKHR-srcAddress-parameter</span><br>
 <code>srcAddress</code> <strong class="purple">must</strong> be a valid <a href="chap3.html#VkDeviceAddress">VkDeviceAddress</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectCommandKHR-imageSubresource-parameter" href="chap22.html#VUID-VkCopyMemoryToImageIndirectCommandKHR-imageSubresource-parameter"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectCommandKHR-imageSubresource-parameter</span><br>
 <code>imageSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from a memory region to an image object by specifying copy
parameters in memory, call:</p>
</div>
<div id="vkCmdCopyMemoryToImageIndirectNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_copy_memory_indirect</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyMemoryToImageIndirectNV</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkDeviceAddress</span>                             <span class="n">copyBufferAddress</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">copyCount</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">stride</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">dstImage</span><span class="p">,</span>
    <span class="n">VkImageLayout</span>                               <span class="n">dstImageLayout</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkImageSubresourceLayers</span><span class="o">*</span>             <span class="n">pImageSubresources</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>copyBufferAddress</code> is the address specifying the copy parameters
which are laid out in memory as an array of
<a href="chap22.html#VkCopyMemoryToImageIndirectCommandNV">VkCopyMemoryToImageIndirectCommandNV</a> structures.</p>
</li>
<li>
<p><code>copyCount</code> is the number of copies to execute, and <strong class="purple">can</strong> be zero.</p>
</li>
<li>
<p><code>stride</code> is the byte stride between successive sets of copy
parameters.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the copy.</p>
</li>
<li>
<p><code>pImageSubresources</code> is a pointer to an array of <code>copyCount</code>
<a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structures, specifying the image
subresources of the destination image data for the copy operation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each region in <code>copyBufferAddress</code> is copied from the source memory
region to an image region in the destination image.
If the destination image is of type <code>VK_IMAGE_TYPE_3D</code>, the starting
slice and number of slices to copy are specified in
<code>pImageSubresources-&gt;baseArrayLayer</code> and
<code>pImageSubresources-&gt;layerCount</code> respectively.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-None-07660" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-None-07660"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-None-07660</span><br>

The <a href="chap51.html#features-indirectCopy"><code>indirectCopy</code></a> feature <strong class="purple">must</strong> be
enabled</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-offset-07676" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-offset-07676"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-offset-07676</span><br>

<code>copyBufferAddress</code> <strong class="purple">must</strong> be 4 byte aligned</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-stride-07677" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-stride-07677"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-stride-07677</span><br>

<code>stride</code> <strong class="purple">must</strong> be a multiple of <code>4</code> and <strong class="purple">must</strong> be greater than or
equal to sizeof(<a href="chap22.html#VkCopyMemoryToImageIndirectCommandNV">VkCopyMemoryToImageIndirectCommandNV</a>)</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-10956" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-10956"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-10956</span><br>

The <a href="chap6.html#VkCommandPool">VkCommandPool</a> that <code>commandBuffer</code> was allocated from
<strong class="purple">must</strong> support at least one of the queue types specified in
<a href="chap52.html#VkPhysicalDeviceCopyMemoryIndirectPropertiesKHR">VkPhysicalDeviceCopyMemoryIndirectPropertiesKHR</a>::<code>supportedQueues</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07661" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07661"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07661</span><br>

<code>dstImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-aspectMask-07662" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-aspectMask-07662"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-aspectMask-07662</span><br>

The <code>aspectMask</code> member for every subresource in
<code>pImageSubresources</code> <strong class="purple">must</strong> only have a single bit set</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07663" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07663"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07663</span><br>

The image region specified by each element in <code>copyBufferAddress</code>
<strong class="purple">must</strong> be a region that is contained within <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07664" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07664"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07664</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07665" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07665"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07665</span><br>

If <code>dstImage</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07973" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07973"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07973</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-dstImageLayout-07667" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-dstImageLayout-07667"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-dstImageLayout-07667</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>dstImage</code> at the time this command is executed on a
<code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-dstImageLayout-07669" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-dstImageLayout-07669"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-dstImageLayout-07669</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
or <code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-mipLevel-07670" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-mipLevel-07670"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-mipLevel-07670</span><br>

The specified <code>mipLevel</code> of each region in <code>pImageSubresources</code>
<strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-layerCount-08764" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-layerCount-08764"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-layerCount-08764</span><br>

If the specified <code>layerCount</code> of each region in
<code>pImageSubresources</code> is not <code>VK_REMAINING_ARRAY_LAYERS</code>, the
specified <code>baseArrayLayer</code> +  <code>layerCount</code> of each region in
<code>pImageSubresources</code> <strong class="purple">must</strong> be less than or equal to the
<code>arrayLayers</code> specified in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when
<code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07673" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07673"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07673</span><br>

<code>dstImage</code> <strong class="purple">must</strong> not have been created with <code>flags</code> containing
<code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-07674" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-07674"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-07674</span><br>

If the queue family used to create the <a href="chap6.html#VkCommandPool">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code>, for each region, the <code>aspectMask</code>
member of <code>pImageSubresources</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or <code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-10974" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-10974"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-10974</span><br>

The format features of <code>dstImage</code> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-copyBufferAddress-10975" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-copyBufferAddress-10975"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-copyBufferAddress-10975</span><br>

Any of the source or destination memory regions specified in
<code>copyBufferAddress</code> <strong class="purple">must</strong> not overlap with any of the specified
destination memory regions</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-parameter" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-copyBufferAddress-parameter" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-copyBufferAddress-parameter"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-copyBufferAddress-parameter</span><br>
 <code>copyBufferAddress</code> <strong class="purple">must</strong> be a valid <a href="chap3.html#VkDeviceAddress">VkDeviceAddress</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-parameter" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-parameter"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-parameter</span><br>
 <code>dstImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-dstImageLayout-parameter" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-dstImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-pImageSubresources-parameter" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-pImageSubresources-parameter"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-pImageSubresources-parameter</span><br>
 <code>pImageSubresources</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>copyCount</code> valid <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-recording" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-cmdpool" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support VK_QUEUE_COMPUTE_BIT, VK_QUEUE_GRAPHICS_BIT, or VK_QUEUE_TRANSFER_BIT operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-renderpass" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-renderpass"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-videocoding" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-videocoding"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-copyCount-arraylength" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-copyCount-arraylength"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-copyCount-arraylength</span><br>
 <code>copyCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-commonparent" href="chap22.html#VUID-vkCmdCopyMemoryToImageIndirectNV-commonparent"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-commonparent</span><br>
 Both of <code>commandBuffer</code>, and <code>dstImage</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap45.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VK_QUEUE_COMPUTE_BIT<br>
VK_QUEUE_GRAPHICS_BIT<br>
VK_QUEUE_TRANSFER_BIT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Conditional Rendering</div>
<div class="paragraph">
<p>vkCmdCopyMemoryToImageIndirectNV is not affected by <a href="chap23.html#drawing-conditional-rendering">conditional rendering</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="copies-imagescaling"><a class="anchor" href="chap22.html#copies-imagescaling"></a>22.5. Image Copies With Scaling</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy regions of a source image into a destination image, potentially
performing format conversion, arbitrary scaling, and filtering, call:</p>
</div>
<div id="vkCmdBlitImage" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkCmdBlitImage</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">srcImage</span><span class="p">,</span>
    <span class="n">VkImageLayout</span>                               <span class="n">srcImageLayout</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">dstImage</span><span class="p">,</span>
    <span class="n">VkImageLayout</span>                               <span class="n">dstImageLayout</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">regionCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkImageBlit</span><span class="o">*</span>                          <span class="n">pRegions</span><span class="p">,</span>
    <span class="n">VkFilter</span>                                    <span class="n">filter</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the blit.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the blit.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to blit.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap22.html#VkImageBlit">VkImageBlit</a> structures
specifying the regions to blit.</p>
</li>
<li>
<p><code>filter</code> is a <a href="chap14.html#VkFilter">VkFilter</a> specifying the filter to apply if the
blits require scaling.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkCmdBlitImage</code> <strong class="purple">must</strong> not be used for multisampled source or
destination images.
Use <a href="chap22.html#vkCmdResolveImage">vkCmdResolveImage</a> for this purpose.</p>
</div>
<div class="paragraph">
<p>As the sizes of the source and destination extents <strong class="purple">can</strong> differ in any
dimension, texels in the source extent are scaled and filtered to the
destination extent.
Scaling occurs via the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For each destination texel, the integer coordinate of that texel is
converted to an unnormalized texture coordinate, using the effective
inverse of the equations described in
<a href="chap17.html#textures-unnormalized-to-integer">unnormalized to integer
conversion</a>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u<sub>base</sub> = i +  ½</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v<sub>base</sub> = j +  ½</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w<sub>base</sub> = k +  ½</span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>These base coordinates are then offset by the first destination offset:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u<sub>offset</sub> = u<sub>base</sub> - x<sub>dst0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v<sub>offset</sub> = v<sub>base</sub> - y<sub>dst0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w<sub>offset</sub> = w<sub>base</sub> - z<sub>dst0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">a<sub>offset</sub> = a - <code>baseArrayCount</code><sub>dst</sub></span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>The scale is determined from the source and destination regions, and
applied to the offset coordinates:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">scale<sub>u</sub> = (x<sub>src1</sub> - x<sub>src0</sub>) / (x<sub>dst1</sub> - x<sub>dst0</sub>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">scale<sub>v</sub> = (y<sub>src1</sub> - y<sub>src0</sub>) / (y<sub>dst1</sub> - y<sub>dst0</sub>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">scale<sub>w</sub> = (z<sub>src1</sub> - z<sub>src0</sub>) / (z<sub>dst1</sub> - z<sub>dst0</sub>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u<sub>scaled</sub> = u<sub>offset</sub> × scale<sub>u</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v<sub>scaled</sub> = v<sub>offset</sub> × scale<sub>v</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w<sub>scaled</sub> = w<sub>offset</sub> × scale<sub>w</sub></span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>Finally the source offset is added to the scaled coordinates, to
determine the final unnormalized coordinates used to sample from
<code>srcImage</code>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u = u<sub>scaled</sub> +  x<sub>src0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v = v<sub>scaled</sub> +  y<sub>src0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w = w<sub>scaled</sub> +  z<sub>src0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">q = <code>mipLevel</code></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">a = a<sub>offset</sub> +  <code>baseArrayCount</code><sub>src</sub></span></p>
</dd>
</dl>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>These coordinates are used to sample from the source image, as described in
<a href="chap17.html">Image Operations chapter</a>, with the filter mode equal to that
of <code>filter</code>, a mipmap mode of <code>VK_SAMPLER_MIPMAP_MODE_NEAREST</code> and
an address mode of <code>VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE</code>.
Implementations <strong class="purple">must</strong> clamp at the edge of the source image, and <strong class="purple">may</strong>
additionally clamp to the edge of the source region.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Due to allowable rounding errors in the generation of the source texture
coordinates, it is not always possible to guarantee exactly which source
texels will be sampled for a given blit.
As rounding errors are implementation-dependent, the exact results of a
blitting operation are also implementation-dependent.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Blits are done layer by layer starting with the <code>baseArrayLayer</code> member
of <code>srcSubresource</code> for the source and <code>dstSubresource</code> for the
destination.
<code>layerCount</code> layers are blitted to the destination image.</p>
</div>
<div class="paragraph">
<p>When blitting 3D textures, slices in the destination region bounded by
<code>dstOffsets</code>[0].z and <code>dstOffsets</code>[1].z are sampled from slices in
the source region bounded by <code>srcOffsets</code>[0].z and
<code>srcOffsets</code>[1].z.
If the <code>filter</code> parameter is <code>VK_FILTER_LINEAR</code> then the value
sampled from the source image is taken by doing linear filtering using the
interpolated <strong>z</strong> coordinate represented by <strong>w</strong> in the previous equations.
If the <code>filter</code> parameter is <code>VK_FILTER_NEAREST</code> then the value
sampled from the source image is taken from the single nearest slice, with
an implementation-dependent arithmetic rounding mode.</p>
</div>
<div class="paragraph">
<p>The following filtering and conversion rules apply:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Integer formats <strong class="purple">can</strong> only be converted to other integer formats with the
same signedness.</p>
</li>
<li>
<p>No format conversion is supported between depth/stencil images.
The formats <strong class="purple">must</strong> match.</p>
</li>
<li>
<p>Format conversions on unorm, snorm, scaled and packed float formats of
the copied aspect of the image are performed by first converting the
pixels to float values.</p>
</li>
<li>
<p>For sRGB source formats, nonlinear RGB values are converted to linear
representation prior to filtering.</p>
</li>
<li>
<p>After filtering, the float values are first clamped and then cast to the
destination image format.
In case of sRGB destination format, linear RGB values are converted to
nonlinear representation before writing the pixel to the image.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Signed and unsigned integers are converted by first clamping to the
representable range of the destination format, then casting the value.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBlitImage-commandBuffer-01834" href="chap22.html#VUID-vkCmdBlitImage-commandBuffer-01834"></a> <span class="vuid">VUID-vkCmdBlitImage-commandBuffer-01834</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>srcImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-commandBuffer-01835" href="chap22.html#VUID-vkCmdBlitImage-commandBuffer-01835"></a> <span class="vuid">VUID-vkCmdBlitImage-commandBuffer-01835</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-commandBuffer-01836" href="chap22.html#VUID-vkCmdBlitImage-commandBuffer-01836"></a> <span class="vuid">VUID-vkCmdBlitImage-commandBuffer-01836</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong class="purple">must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBlitImage-pRegions-00217" href="chap22.html#VUID-vkCmdBlitImage-pRegions-00217"></a> <span class="vuid">VUID-vkCmdBlitImage-pRegions-00217</span><br>

The union of all destination regions, specified by the elements of
<code>pRegions</code>, <strong class="purple">must</strong> not overlap in memory with any texel that <strong class="purple">may</strong> be
sampled during the blit operation</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-01999" href="chap22.html#VUID-vkCmdBlitImage-srcImage-01999"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-01999</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>srcImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_BLIT_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-06421" href="chap22.html#VUID-vkCmdBlitImage-srcImage-06421"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-06421</span><br>

<code>srcImage</code> <strong class="purple">must</strong> not use a
<a href="chap53.html#formats-requiring-sampler-ycbcr-conversion">format that requires a
sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00219" href="chap22.html#VUID-vkCmdBlitImage-srcImage-00219"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00219</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00220" href="chap22.html#VUID-vkCmdBlitImage-srcImage-00220"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00220</span><br>

If <code>srcImage</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImageLayout-00221" href="chap22.html#VUID-vkCmdBlitImage-srcImageLayout-00221"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImageLayout-00221</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImageLayout-01398" href="chap22.html#VUID-vkCmdBlitImage-srcImageLayout-01398"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImageLayout-01398</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> be <code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-09459" href="chap22.html#VUID-vkCmdBlitImage-srcImage-09459"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-09459</span><br>

If <code>srcImage</code> and <code>dstImage</code> are the same, and an elements of
<code>pRegions</code> contains the <code>srcSubresource</code> and
<code>dstSubresource</code> with matching <code>mipLevel</code> and overlapping array
layers, then the <code>srcImageLayout</code> and <code>dstImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_GENERAL</code>
or <code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-02000" href="chap22.html#VUID-vkCmdBlitImage-dstImage-02000"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-02000</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>dstImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_BLIT_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-06422" href="chap22.html#VUID-vkCmdBlitImage-dstImage-06422"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-06422</span><br>

<code>dstImage</code> <strong class="purple">must</strong> not use a
<a href="chap53.html#formats-requiring-sampler-ycbcr-conversion">format that requires a
sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-00224" href="chap22.html#VUID-vkCmdBlitImage-dstImage-00224"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-00224</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-00225" href="chap22.html#VUID-vkCmdBlitImage-dstImage-00225"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-00225</span><br>

If <code>dstImage</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImageLayout-00226" href="chap22.html#VUID-vkCmdBlitImage-dstImageLayout-00226"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImageLayout-00226</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImageLayout-01399" href="chap22.html#VUID-vkCmdBlitImage-dstImageLayout-01399"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImageLayout-01399</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> be <code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00229" href="chap22.html#VUID-vkCmdBlitImage-srcImage-00229"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00229</span><br>

If either of <code>srcImage</code> or <code>dstImage</code> was created with a signed
integer <a href="chap53.html#VkFormat">VkFormat</a>, the other <strong class="purple">must</strong> also have been created with a
signed integer <a href="chap53.html#VkFormat">VkFormat</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00230" href="chap22.html#VUID-vkCmdBlitImage-srcImage-00230"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00230</span><br>

If either of <code>srcImage</code> or <code>dstImage</code> was created with an
unsigned integer <a href="chap53.html#VkFormat">VkFormat</a>, the other <strong class="purple">must</strong> also have been created
with an unsigned integer <a href="chap53.html#VkFormat">VkFormat</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00231" href="chap22.html#VUID-vkCmdBlitImage-srcImage-00231"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00231</span><br>

If either of <code>srcImage</code> or <code>dstImage</code> was created with a
depth/stencil format, the other <strong class="purple">must</strong> have exactly the same format</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00232" href="chap22.html#VUID-vkCmdBlitImage-srcImage-00232"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00232</span><br>

If <code>srcImage</code> was created with a depth/stencil format, <code>filter</code>
<strong class="purple">must</strong> be <code>VK_FILTER_NEAREST</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00233" href="chap22.html#VUID-vkCmdBlitImage-srcImage-00233"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00233</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have been created with a <code>samples</code> value of
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-00234" href="chap22.html#VUID-vkCmdBlitImage-dstImage-00234"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-00234</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have been created with a <code>samples</code> value of
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-filter-02001" href="chap22.html#VUID-vkCmdBlitImage-filter-02001"></a> <span class="vuid">VUID-vkCmdBlitImage-filter-02001</span><br>

If <code>filter</code> is <code>VK_FILTER_LINEAR</code>, then the
<a href="chap12.html#resources-image-format-features">format features</a> of <code>srcImage</code>
<strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-filter-02002" href="chap22.html#VUID-vkCmdBlitImage-filter-02002"></a> <span class="vuid">VUID-vkCmdBlitImage-filter-02002</span><br>

If <code>filter</code> is <code>VK_FILTER_CUBIC_EXT</code>, then the
<a href="chap12.html#resources-image-format-features">format features</a> of <code>srcImage</code>
<strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_CUBIC_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-filter-00237" href="chap22.html#VUID-vkCmdBlitImage-filter-00237"></a> <span class="vuid">VUID-vkCmdBlitImage-filter-00237</span><br>

If <code>filter</code> is <code>VK_FILTER_CUBIC_EXT</code>, <code>srcImage</code> <strong class="purple">must</strong> be of
type <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcSubresource-01705" href="chap22.html#VUID-vkCmdBlitImage-srcSubresource-01705"></a> <span class="vuid">VUID-vkCmdBlitImage-srcSubresource-01705</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstSubresource-01706" href="chap22.html#VUID-vkCmdBlitImage-dstSubresource-01706"></a> <span class="vuid">VUID-vkCmdBlitImage-dstSubresource-01706</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcSubresource-01707" href="chap22.html#VUID-vkCmdBlitImage-srcSubresource-01707"></a> <span class="vuid">VUID-vkCmdBlitImage-srcSubresource-01707</span><br>

If <code>srcSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>,
<span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong class="purple">must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstSubresource-01708" href="chap22.html#VUID-vkCmdBlitImage-dstSubresource-01708"></a> <span class="vuid">VUID-vkCmdBlitImage-dstSubresource-01708</span><br>

If <code>dstSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>,
<span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong class="purple">must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-02545" href="chap22.html#VUID-vkCmdBlitImage-dstImage-02545"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-02545</span><br>

<code>dstImage</code> and <code>srcImage</code> <strong class="purple">must</strong> not have been created with
<code>flags</code> containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-maintenance8-10207" href="chap22.html#VUID-vkCmdBlitImage-maintenance8-10207"></a> <span class="vuid">VUID-vkCmdBlitImage-maintenance8-10207</span><br>

If the <a href="chap51.html#features-maintenance8"><code>maintenance8</code></a> feature is enabled
and <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>srcSubresource.baseArrayLayer</code> <strong class="purple">must</strong> be
<code>0</code>, and <code>srcSubresource.layerCount</code> and
<code>dstSubresource.layerCount</code> <strong class="purple">must</strong> each be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-maintenance8-10208" href="chap22.html#VUID-vkCmdBlitImage-maintenance8-10208"></a> <span class="vuid">VUID-vkCmdBlitImage-maintenance8-10208</span><br>

If the <a href="chap51.html#features-maintenance8"><code>maintenance8</code></a> feature is enabled
and <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>dstSubresource.baseArrayLayer</code> <strong class="purple">must</strong> be
<code>0</code>, and <code>srcSubresource.layerCount</code> and
<code>dstSubresource.layerCount</code> <strong class="purple">must</strong> each be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-maintenance8-10579" href="chap22.html#VUID-vkCmdBlitImage-maintenance8-10579"></a> <span class="vuid">VUID-vkCmdBlitImage-maintenance8-10579</span><br>

If the <a href="chap51.html#features-maintenance8"><code>maintenance8</code></a> feature is enabled,
<code>dstImage</code> is <code>VK_IMAGE_TYPE_3D</code>, and <code>srcImage</code> is not of
type <code>VK_IMAGE_TYPE_3D</code>, then for each element of <code>pRegions</code>,
the absolute difference of the <code>z</code> member of each member of
<code>dstOffsets</code> <strong class="purple">must</strong> equal <code>srcSubresource.layerCount</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-maintenance8-10580" href="chap22.html#VUID-vkCmdBlitImage-maintenance8-10580"></a> <span class="vuid">VUID-vkCmdBlitImage-maintenance8-10580</span><br>

If the <a href="chap51.html#features-maintenance8"><code>maintenance8</code></a> feature is enabled,
<code>srcImage</code> is <code>VK_IMAGE_TYPE_3D</code>, and <code>dstImage</code> is not of
type <code>VK_IMAGE_TYPE_3D</code>, then for each element of <code>pRegions</code>,
the absolute difference of the <code>z</code> member of each member of
<code>srcOffsets</code> <strong class="purple">must</strong> equal <code>dstSubresource.layerCount</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00240" href="chap22.html#VUID-vkCmdBlitImage-srcImage-00240"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00240</span><br>

    If
the <a href="chap51.html#features-maintenance8"><code>maintenance8</code></a> feature is not enabled and
    either <code>srcImage</code> or <code>dstImage</code> is of type
    <code>VK_IMAGE_TYPE_3D</code>, then for each element of <code>pRegions</code>,
    <code>srcSubresource.baseArrayLayer</code> and
    <code>dstSubresource.baseArrayLayer</code> <strong class="purple">must</strong> each be <code>0</code>, and
    <code>srcSubresource.layerCount</code> and <code>dstSubresource.layerCount</code>
    <strong class="purple">must</strong> each be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-aspectMask-00241" href="chap22.html#VUID-vkCmdBlitImage-aspectMask-00241"></a> <span class="vuid">VUID-vkCmdBlitImage-aspectMask-00241</span><br>

For each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-aspectMask-00242" href="chap22.html#VUID-vkCmdBlitImage-aspectMask-00242"></a> <span class="vuid">VUID-vkCmdBlitImage-aspectMask-00242</span><br>

For each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcOffset-00243" href="chap22.html#VUID-vkCmdBlitImage-srcOffset-00243"></a> <span class="vuid">VUID-vkCmdBlitImage-srcOffset-00243</span><br>

For each element of <code>pRegions</code>, <code>srcOffsets</code>[0].x and
<code>srcOffsets</code>[1].x <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the width of the specified <code>srcSubresource</code> of
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcOffset-00244" href="chap22.html#VUID-vkCmdBlitImage-srcOffset-00244"></a> <span class="vuid">VUID-vkCmdBlitImage-srcOffset-00244</span><br>

For each element of <code>pRegions</code>, <code>srcOffsets</code>[0].y and
<code>srcOffsets</code>[1].y <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the height of the specified <code>srcSubresource</code>
of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00245" href="chap22.html#VUID-vkCmdBlitImage-srcImage-00245"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00245</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffsets</code>[0].y <strong class="purple">must</strong> be <code>0</code> and
<code>srcOffsets</code>[1].y <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcOffset-00246" href="chap22.html#VUID-vkCmdBlitImage-srcOffset-00246"></a> <span class="vuid">VUID-vkCmdBlitImage-srcOffset-00246</span><br>

For each element of <code>pRegions</code>, <code>srcOffsets</code>[0].z and
<code>srcOffsets</code>[1].z <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the depth of the specified <code>srcSubresource</code> of
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00247" href="chap22.html#VUID-vkCmdBlitImage-srcImage-00247"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00247</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>srcOffsets</code>[0].z <strong class="purple">must</strong> be <code>0</code> and <code>srcOffsets</code>[1].z <strong class="purple">must</strong> be
<code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstOffset-00248" href="chap22.html#VUID-vkCmdBlitImage-dstOffset-00248"></a> <span class="vuid">VUID-vkCmdBlitImage-dstOffset-00248</span><br>

For each element of <code>pRegions</code>, <code>dstOffsets</code>[0].x and
<code>dstOffsets</code>[1].x <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the width of the specified <code>dstSubresource</code> of
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstOffset-00249" href="chap22.html#VUID-vkCmdBlitImage-dstOffset-00249"></a> <span class="vuid">VUID-vkCmdBlitImage-dstOffset-00249</span><br>

For each element of <code>pRegions</code>, <code>dstOffsets</code>[0].y and
<code>dstOffsets</code>[1].y <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the height of the specified <code>dstSubresource</code>
of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-00250" href="chap22.html#VUID-vkCmdBlitImage-dstImage-00250"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-00250</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffsets</code>[0].y <strong class="purple">must</strong> be <code>0</code> and
<code>dstOffsets</code>[1].y <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstOffset-00251" href="chap22.html#VUID-vkCmdBlitImage-dstOffset-00251"></a> <span class="vuid">VUID-vkCmdBlitImage-dstOffset-00251</span><br>

For each element of <code>pRegions</code>, <code>dstOffsets</code>[0].z and
<code>dstOffsets</code>[1].z <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the depth of the specified <code>dstSubresource</code> of
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-00252" href="chap22.html#VUID-vkCmdBlitImage-dstImage-00252"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-00252</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>dstOffsets</code>[0].z <strong class="purple">must</strong> be <code>0</code> and <code>dstOffsets</code>[1].z <strong class="purple">must</strong> be
<code>1</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBlitImage-commandBuffer-parameter" href="chap22.html#VUID-vkCmdBlitImage-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-parameter" href="chap22.html#VUID-vkCmdBlitImage-srcImage-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-parameter</span><br>
 <code>srcImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImageLayout-parameter" href="chap22.html#VUID-vkCmdBlitImage-srcImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-parameter" href="chap22.html#VUID-vkCmdBlitImage-dstImage-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-parameter</span><br>
 <code>dstImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImageLayout-parameter" href="chap22.html#VUID-vkCmdBlitImage-dstImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-pRegions-parameter" href="chap22.html#VUID-vkCmdBlitImage-pRegions-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap22.html#VkImageBlit">VkImageBlit</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-filter-parameter" href="chap22.html#VUID-vkCmdBlitImage-filter-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-filter-parameter</span><br>
 <code>filter</code> <strong class="purple">must</strong> be a valid <a href="chap14.html#VkFilter">VkFilter</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-commandBuffer-recording" href="chap22.html#VUID-vkCmdBlitImage-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdBlitImage-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-commandBuffer-cmdpool" href="chap22.html#VUID-vkCmdBlitImage-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdBlitImage-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support VK_QUEUE_GRAPHICS_BIT operations</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-renderpass" href="chap22.html#VUID-vkCmdBlitImage-renderpass"></a> <span class="vuid">VUID-vkCmdBlitImage-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-videocoding" href="chap22.html#VUID-vkCmdBlitImage-videocoding"></a> <span class="vuid">VUID-vkCmdBlitImage-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-regionCount-arraylength" href="chap22.html#VUID-vkCmdBlitImage-regionCount-arraylength"></a> <span class="vuid">VUID-vkCmdBlitImage-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-commonparent" href="chap22.html#VUID-vkCmdBlitImage-commonparent"></a> <span class="vuid">VUID-vkCmdBlitImage-commonparent</span><br>
 Each of <code>commandBuffer</code>, <code>dstImage</code>, and <code>srcImage</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap45.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VK_QUEUE_GRAPHICS_BIT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Conditional Rendering</div>
<div class="paragraph">
<p>vkCmdBlitImage is not affected by <a href="chap23.html#drawing-conditional-rendering">conditional rendering</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageBlit</code> structure is defined as:</p>
</div>
<div id="VkImageBlit" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageBlit</span> <span class="p">{</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">srcSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">srcOffsets</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">dstSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">dstOffsets</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">}</span> <span class="n">VkImageBlit</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>srcSubresource</code> is the subresource to blit from.</p>
</li>
<li>
<p><code>srcOffsets</code> is a pointer to an array of two <a href="chap3.html#VkOffset3D">VkOffset3D</a>
structures specifying the bounds of the source region within
<code>srcSubresource</code>.</p>
</li>
<li>
<p><code>dstSubresource</code> is the subresource to blit into.</p>
</li>
<li>
<p><code>dstOffsets</code> is a pointer to an array of two <a href="chap3.html#VkOffset3D">VkOffset3D</a>
structures specifying the bounds of the destination region within
<code>dstSubresource</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For each element of the <code>pRegions</code> array, a blit operation is performed
for the specified source and destination regions.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageBlit-aspectMask-00238" href="chap22.html#VUID-VkImageBlit-aspectMask-00238"></a> <span class="vuid">VUID-VkImageBlit-aspectMask-00238</span><br>

The <code>aspectMask</code> member of <code>srcSubresource</code> and
<code>dstSubresource</code> <strong class="purple">must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageBlit-layerCount-08800" href="chap22.html#VUID-VkImageBlit-layerCount-08800"></a> <span class="vuid">VUID-VkImageBlit-layerCount-08800</span><br>

If neither of the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> are <code>VK_REMAINING_ARRAY_LAYERS</code>, the
<code>layerCount</code> members of <code>srcSubresource</code> or <code>dstSubresource</code>
<strong class="purple">must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageBlit-layerCount-08801" href="chap22.html#VUID-VkImageBlit-layerCount-08801"></a> <span class="vuid">VUID-VkImageBlit-layerCount-08801</span><br>

If one of the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> is <code>VK_REMAINING_ARRAY_LAYERS</code>, the other
member <strong class="purple">must</strong> be either <code>VK_REMAINING_ARRAY_LAYERS</code> or equal to the
<code>arrayLayers</code> member of the <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> used to create
the image minus <code>baseArrayLayer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageBlit-srcSubresource-parameter" href="chap22.html#VUID-VkImageBlit-srcSubresource-parameter"></a> <span class="vuid">VUID-VkImageBlit-srcSubresource-parameter</span><br>
 <code>srcSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageBlit-dstSubresource-parameter" href="chap22.html#VUID-VkImageBlit-dstSubresource-parameter"></a> <span class="vuid">VUID-VkImageBlit-dstSubresource-parameter</span><br>
 <code>dstSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>A more extensible version of the blit image command is defined below.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy regions of a source image into a destination image, potentially
performing format conversion, arbitrary scaling, and filtering, call:</p>
</div>
<div id="vkCmdBlitImage2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="kt">void</span> <span class="nf">vkCmdBlitImage2</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkBlitImageInfo2</span><span class="o">*</span>                     <span class="n">pBlitImageInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkCmdBlitImage2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="kt">void</span> <span class="nf">vkCmdBlitImage2KHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkBlitImageInfo2</span><span class="o">*</span>                     <span class="n">pBlitImageInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pBlitImageInfo</code> is a pointer to a <a href="chap22.html#VkBlitImageInfo2">VkBlitImageInfo2</a> structure
describing the blit parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally identical to <a href="chap22.html#vkCmdBlitImage">vkCmdBlitImage</a>, but includes
extensible sub-structures that include <code>sType</code> and <code>pNext</code>
parameters, allowing them to be more easily extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBlitImage2-commandBuffer-01834" href="chap22.html#VUID-vkCmdBlitImage2-commandBuffer-01834"></a> <span class="vuid">VUID-vkCmdBlitImage2-commandBuffer-01834</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>srcImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2-commandBuffer-01835" href="chap22.html#VUID-vkCmdBlitImage2-commandBuffer-01835"></a> <span class="vuid">VUID-vkCmdBlitImage2-commandBuffer-01835</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2-commandBuffer-01836" href="chap22.html#VUID-vkCmdBlitImage2-commandBuffer-01836"></a> <span class="vuid">VUID-vkCmdBlitImage2-commandBuffer-01836</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong class="purple">must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBlitImage2-commandBuffer-parameter" href="chap22.html#VUID-vkCmdBlitImage2-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage2-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2-pBlitImageInfo-parameter" href="chap22.html#VUID-vkCmdBlitImage2-pBlitImageInfo-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage2-pBlitImageInfo-parameter</span><br>
 <code>pBlitImageInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap22.html#VkBlitImageInfo2">VkBlitImageInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2-commandBuffer-recording" href="chap22.html#VUID-vkCmdBlitImage2-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdBlitImage2-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2-commandBuffer-cmdpool" href="chap22.html#VUID-vkCmdBlitImage2-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdBlitImage2-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support VK_QUEUE_GRAPHICS_BIT operations</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2-renderpass" href="chap22.html#VUID-vkCmdBlitImage2-renderpass"></a> <span class="vuid">VUID-vkCmdBlitImage2-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2-videocoding" href="chap22.html#VUID-vkCmdBlitImage2-videocoding"></a> <span class="vuid">VUID-vkCmdBlitImage2-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap45.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VK_QUEUE_GRAPHICS_BIT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Conditional Rendering</div>
<div class="paragraph">
<p>vkCmdBlitImage2 is not affected by <a href="chap23.html#drawing-conditional-rendering">conditional rendering</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBlitImageInfo2</code> structure is defined as:</p>
</div>
<div id="VkBlitImageInfo2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBlitImageInfo2</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>        <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>            <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImage</span>                <span class="n">srcImage</span><span class="p">;</span>
    <span class="n">VkImageLayout</span>          <span class="n">srcImageLayout</span><span class="p">;</span>
    <span class="n">VkImage</span>                <span class="n">dstImage</span><span class="p">;</span>
    <span class="n">VkImageLayout</span>          <span class="n">dstImageLayout</span><span class="p">;</span>
    <span class="kt">uint32_t</span>               <span class="n">regionCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkImageBlit2</span><span class="o">*</span>    <span class="n">pRegions</span><span class="p">;</span>
    <span class="n">VkFilter</span>               <span class="n">filter</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBlitImageInfo2</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkBlitImageInfo2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="k">typedef</span> <span class="n">VkBlitImageInfo2</span> <span class="n">VkBlitImageInfo2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="chap3.html#VkStructureType">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the blit.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the blit.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to blit.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap22.html#VkImageBlit2">VkImageBlit2</a> structures
specifying the regions to blit.</p>
</li>
<li>
<p><code>filter</code> is a <a href="chap14.html#VkFilter">VkFilter</a> specifying the filter to apply if the
blits require scaling.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBlitImageInfo2-pRegions-00217" href="chap22.html#VUID-VkBlitImageInfo2-pRegions-00217"></a> <span class="vuid">VUID-VkBlitImageInfo2-pRegions-00217</span><br>

The union of all destination regions, specified by the elements of
<code>pRegions</code>, <strong class="purple">must</strong> not overlap in memory with any texel that <strong class="purple">may</strong> be
sampled during the blit operation</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-01999" href="chap22.html#VUID-VkBlitImageInfo2-srcImage-01999"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-01999</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>srcImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_BLIT_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-06421" href="chap22.html#VUID-VkBlitImageInfo2-srcImage-06421"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-06421</span><br>

<code>srcImage</code> <strong class="purple">must</strong> not use a
<a href="chap53.html#formats-requiring-sampler-ycbcr-conversion">format that requires a
sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00219" href="chap22.html#VUID-VkBlitImageInfo2-srcImage-00219"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00219</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00220" href="chap22.html#VUID-VkBlitImageInfo2-srcImage-00220"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00220</span><br>

If <code>srcImage</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImageLayout-00221" href="chap22.html#VUID-VkBlitImageInfo2-srcImageLayout-00221"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImageLayout-00221</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImageLayout-01398" href="chap22.html#VUID-VkBlitImageInfo2-srcImageLayout-01398"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImageLayout-01398</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> be <code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-09459" href="chap22.html#VUID-VkBlitImageInfo2-srcImage-09459"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-09459</span><br>

If <code>srcImage</code> and <code>dstImage</code> are the same, and an elements of
<code>pRegions</code> contains the <code>srcSubresource</code> and
<code>dstSubresource</code> with matching <code>mipLevel</code> and overlapping array
layers, then the <code>srcImageLayout</code> and <code>dstImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_GENERAL</code>
or <code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-02000" href="chap22.html#VUID-VkBlitImageInfo2-dstImage-02000"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-02000</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>dstImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_BLIT_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-06422" href="chap22.html#VUID-VkBlitImageInfo2-dstImage-06422"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-06422</span><br>

<code>dstImage</code> <strong class="purple">must</strong> not use a
<a href="chap53.html#formats-requiring-sampler-ycbcr-conversion">format that requires a
sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-00224" href="chap22.html#VUID-VkBlitImageInfo2-dstImage-00224"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-00224</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-00225" href="chap22.html#VUID-VkBlitImageInfo2-dstImage-00225"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-00225</span><br>

If <code>dstImage</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImageLayout-00226" href="chap22.html#VUID-VkBlitImageInfo2-dstImageLayout-00226"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImageLayout-00226</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImageLayout-01399" href="chap22.html#VUID-VkBlitImageInfo2-dstImageLayout-01399"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImageLayout-01399</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> be <code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00229" href="chap22.html#VUID-VkBlitImageInfo2-srcImage-00229"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00229</span><br>

If either of <code>srcImage</code> or <code>dstImage</code> was created with a signed
integer <a href="chap53.html#VkFormat">VkFormat</a>, the other <strong class="purple">must</strong> also have been created with a
signed integer <a href="chap53.html#VkFormat">VkFormat</a></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00230" href="chap22.html#VUID-VkBlitImageInfo2-srcImage-00230"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00230</span><br>

If either of <code>srcImage</code> or <code>dstImage</code> was created with an
unsigned integer <a href="chap53.html#VkFormat">VkFormat</a>, the other <strong class="purple">must</strong> also have been created
with an unsigned integer <a href="chap53.html#VkFormat">VkFormat</a></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00231" href="chap22.html#VUID-VkBlitImageInfo2-srcImage-00231"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00231</span><br>

If either of <code>srcImage</code> or <code>dstImage</code> was created with a
depth/stencil format, the other <strong class="purple">must</strong> have exactly the same format</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00232" href="chap22.html#VUID-VkBlitImageInfo2-srcImage-00232"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00232</span><br>

If <code>srcImage</code> was created with a depth/stencil format, <code>filter</code>
<strong class="purple">must</strong> be <code>VK_FILTER_NEAREST</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00233" href="chap22.html#VUID-VkBlitImageInfo2-srcImage-00233"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00233</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have been created with a <code>samples</code> value of
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-00234" href="chap22.html#VUID-VkBlitImageInfo2-dstImage-00234"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-00234</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have been created with a <code>samples</code> value of
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-filter-02001" href="chap22.html#VUID-VkBlitImageInfo2-filter-02001"></a> <span class="vuid">VUID-VkBlitImageInfo2-filter-02001</span><br>

If <code>filter</code> is <code>VK_FILTER_LINEAR</code>, then the
<a href="chap12.html#resources-image-format-features">format features</a> of <code>srcImage</code>
<strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-filter-02002" href="chap22.html#VUID-VkBlitImageInfo2-filter-02002"></a> <span class="vuid">VUID-VkBlitImageInfo2-filter-02002</span><br>

If <code>filter</code> is <code>VK_FILTER_CUBIC_EXT</code>, then the
<a href="chap12.html#resources-image-format-features">format features</a> of <code>srcImage</code>
<strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_CUBIC_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-filter-00237" href="chap22.html#VUID-VkBlitImageInfo2-filter-00237"></a> <span class="vuid">VUID-VkBlitImageInfo2-filter-00237</span><br>

If <code>filter</code> is <code>VK_FILTER_CUBIC_EXT</code>, <code>srcImage</code> <strong class="purple">must</strong> be of
type <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcSubresource-01705" href="chap22.html#VUID-VkBlitImageInfo2-srcSubresource-01705"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcSubresource-01705</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstSubresource-01706" href="chap22.html#VUID-VkBlitImageInfo2-dstSubresource-01706"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstSubresource-01706</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcSubresource-01707" href="chap22.html#VUID-VkBlitImageInfo2-srcSubresource-01707"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcSubresource-01707</span><br>

If <code>srcSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>,
<span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong class="purple">must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstSubresource-01708" href="chap22.html#VUID-VkBlitImageInfo2-dstSubresource-01708"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstSubresource-01708</span><br>

If <code>dstSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>,
<span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong class="purple">must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-02545" href="chap22.html#VUID-VkBlitImageInfo2-dstImage-02545"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-02545</span><br>

<code>dstImage</code> and <code>srcImage</code> <strong class="purple">must</strong> not have been created with
<code>flags</code> containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-maintenance8-10207" href="chap22.html#VUID-VkBlitImageInfo2-maintenance8-10207"></a> <span class="vuid">VUID-VkBlitImageInfo2-maintenance8-10207</span><br>

If the <a href="chap51.html#features-maintenance8"><code>maintenance8</code></a> feature is enabled
and <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>srcSubresource.baseArrayLayer</code> <strong class="purple">must</strong> be
<code>0</code>, and <code>srcSubresource.layerCount</code> and
<code>dstSubresource.layerCount</code> <strong class="purple">must</strong> each be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-maintenance8-10208" href="chap22.html#VUID-VkBlitImageInfo2-maintenance8-10208"></a> <span class="vuid">VUID-VkBlitImageInfo2-maintenance8-10208</span><br>

If the <a href="chap51.html#features-maintenance8"><code>maintenance8</code></a> feature is enabled
and <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>dstSubresource.baseArrayLayer</code> <strong class="purple">must</strong> be
<code>0</code>, and <code>srcSubresource.layerCount</code> and
<code>dstSubresource.layerCount</code> <strong class="purple">must</strong> each be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-maintenance8-10579" href="chap22.html#VUID-VkBlitImageInfo2-maintenance8-10579"></a> <span class="vuid">VUID-VkBlitImageInfo2-maintenance8-10579</span><br>

If the <a href="chap51.html#features-maintenance8"><code>maintenance8</code></a> feature is enabled,
<code>dstImage</code> is <code>VK_IMAGE_TYPE_3D</code>, and <code>srcImage</code> is not of
type <code>VK_IMAGE_TYPE_3D</code>, then for each element of <code>pRegions</code>,
the absolute difference of the <code>z</code> member of each member of
<code>dstOffsets</code> <strong class="purple">must</strong> equal <code>srcSubresource.layerCount</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-maintenance8-10580" href="chap22.html#VUID-VkBlitImageInfo2-maintenance8-10580"></a> <span class="vuid">VUID-VkBlitImageInfo2-maintenance8-10580</span><br>

If the <a href="chap51.html#features-maintenance8"><code>maintenance8</code></a> feature is enabled,
<code>srcImage</code> is <code>VK_IMAGE_TYPE_3D</code>, and <code>dstImage</code> is not of
type <code>VK_IMAGE_TYPE_3D</code>, then for each element of <code>pRegions</code>,
the absolute difference of the <code>z</code> member of each member of
<code>srcOffsets</code> <strong class="purple">must</strong> equal <code>dstSubresource.layerCount</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00240" href="chap22.html#VUID-VkBlitImageInfo2-srcImage-00240"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00240</span><br>

    If
the <a href="chap51.html#features-maintenance8"><code>maintenance8</code></a> feature is not enabled and
    either <code>srcImage</code> or <code>dstImage</code> is of type
    <code>VK_IMAGE_TYPE_3D</code>, then for each element of <code>pRegions</code>,
    <code>srcSubresource.baseArrayLayer</code> and
    <code>dstSubresource.baseArrayLayer</code> <strong class="purple">must</strong> each be <code>0</code>, and
    <code>srcSubresource.layerCount</code> and <code>dstSubresource.layerCount</code>
    <strong class="purple">must</strong> each be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-aspectMask-00241" href="chap22.html#VUID-VkBlitImageInfo2-aspectMask-00241"></a> <span class="vuid">VUID-VkBlitImageInfo2-aspectMask-00241</span><br>

For each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-aspectMask-00242" href="chap22.html#VUID-VkBlitImageInfo2-aspectMask-00242"></a> <span class="vuid">VUID-VkBlitImageInfo2-aspectMask-00242</span><br>

For each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcOffset-00243" href="chap22.html#VUID-VkBlitImageInfo2-srcOffset-00243"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcOffset-00243</span><br>

For each element of <code>pRegions</code>, <code>srcOffsets</code>[0].x and
<code>srcOffsets</code>[1].x <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the width of the specified <code>srcSubresource</code> of
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcOffset-00244" href="chap22.html#VUID-VkBlitImageInfo2-srcOffset-00244"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcOffset-00244</span><br>

For each element of <code>pRegions</code>, <code>srcOffsets</code>[0].y and
<code>srcOffsets</code>[1].y <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the height of the specified <code>srcSubresource</code>
of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00245" href="chap22.html#VUID-VkBlitImageInfo2-srcImage-00245"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00245</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffsets</code>[0].y <strong class="purple">must</strong> be <code>0</code> and
<code>srcOffsets</code>[1].y <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcOffset-00246" href="chap22.html#VUID-VkBlitImageInfo2-srcOffset-00246"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcOffset-00246</span><br>

For each element of <code>pRegions</code>, <code>srcOffsets</code>[0].z and
<code>srcOffsets</code>[1].z <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the depth of the specified <code>srcSubresource</code> of
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00247" href="chap22.html#VUID-VkBlitImageInfo2-srcImage-00247"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00247</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>srcOffsets</code>[0].z <strong class="purple">must</strong> be <code>0</code> and <code>srcOffsets</code>[1].z <strong class="purple">must</strong> be
<code>1</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstOffset-00248" href="chap22.html#VUID-VkBlitImageInfo2-dstOffset-00248"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstOffset-00248</span><br>

For each element of <code>pRegions</code>, <code>dstOffsets</code>[0].x and
<code>dstOffsets</code>[1].x <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the width of the specified <code>dstSubresource</code> of
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstOffset-00249" href="chap22.html#VUID-VkBlitImageInfo2-dstOffset-00249"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstOffset-00249</span><br>

For each element of <code>pRegions</code>, <code>dstOffsets</code>[0].y and
<code>dstOffsets</code>[1].y <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the height of the specified <code>dstSubresource</code>
of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-00250" href="chap22.html#VUID-VkBlitImageInfo2-dstImage-00250"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-00250</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffsets</code>[0].y <strong class="purple">must</strong> be <code>0</code> and
<code>dstOffsets</code>[1].y <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstOffset-00251" href="chap22.html#VUID-VkBlitImageInfo2-dstOffset-00251"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstOffset-00251</span><br>

For each element of <code>pRegions</code>, <code>dstOffsets</code>[0].z and
<code>dstOffsets</code>[1].z <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the depth of the specified <code>dstSubresource</code> of
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-00252" href="chap22.html#VUID-VkBlitImageInfo2-dstImage-00252"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-00252</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>dstOffsets</code>[0].z <strong class="purple">must</strong> be <code>0</code> and <code>dstOffsets</code>[1].z <strong class="purple">must</strong> be
<code>1</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-pRegions-04561" href="chap22.html#VUID-VkBlitImageInfo2-pRegions-04561"></a> <span class="vuid">VUID-VkBlitImageInfo2-pRegions-04561</span><br>

If any element of <code>pRegions</code> contains
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>srcImage</code> and <code>dstImage</code> <strong class="purple">must</strong> not be block-compressed images</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-pRegions-06207" href="chap22.html#VUID-VkBlitImageInfo2KHR-pRegions-06207"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-pRegions-06207</span><br>

If any element of <code>pRegions</code> contains
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>srcImage</code> <strong class="purple">must</strong> be of type <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-pRegions-06208" href="chap22.html#VUID-VkBlitImageInfo2KHR-pRegions-06208"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-pRegions-06208</span><br>

If any element of <code>pRegions</code> contains
<a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>srcImage</code> <strong class="purple">must</strong> not have a <a href="chap53.html#formats-multiplanar">multi-planar
format</a></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-filter-09204" href="chap22.html#VUID-VkBlitImageInfo2-filter-09204"></a> <span class="vuid">VUID-VkBlitImageInfo2-filter-09204</span><br>

If <code>filter</code> is <code>VK_FILTER_CUBIC_EXT</code> and if the
<a href="chap51.html#features-selectableCubicWeights">selectableCubicWeights</a> feature is
not enabled then the cubic weights <strong class="purple">must</strong> be
<code>VK_CUBIC_FILTER_WEIGHTS_CATMULL_ROM_QCOM</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBlitImageInfo2-sType-sType" href="chap22.html#VUID-VkBlitImageInfo2-sType-sType"></a> <span class="vuid">VUID-VkBlitImageInfo2-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BLIT_IMAGE_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-pNext-pNext" href="chap22.html#VUID-VkBlitImageInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkBlitImageInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="chap22.html#VkBlitImageCubicWeightsInfoQCOM">VkBlitImageCubicWeightsInfoQCOM</a></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-sType-unique" href="chap22.html#VUID-VkBlitImageInfo2-sType-unique"></a> <span class="vuid">VUID-VkBlitImageInfo2-sType-unique</span><br>
 The <code>sType</code> value of each structure in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-parameter" href="chap22.html#VUID-VkBlitImageInfo2-srcImage-parameter"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-parameter</span><br>
 <code>srcImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImageLayout-parameter" href="chap22.html#VUID-VkBlitImageInfo2-srcImageLayout-parameter"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-parameter" href="chap22.html#VUID-VkBlitImageInfo2-dstImage-parameter"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-parameter</span><br>
 <code>dstImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImageLayout-parameter" href="chap22.html#VUID-VkBlitImageInfo2-dstImageLayout-parameter"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-pRegions-parameter" href="chap22.html#VUID-VkBlitImageInfo2-pRegions-parameter"></a> <span class="vuid">VUID-VkBlitImageInfo2-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap22.html#VkImageBlit2">VkImageBlit2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-filter-parameter" href="chap22.html#VUID-VkBlitImageInfo2-filter-parameter"></a> <span class="vuid">VUID-VkBlitImageInfo2-filter-parameter</span><br>
 <code>filter</code> <strong class="purple">must</strong> be a valid <a href="chap14.html#VkFilter">VkFilter</a> value</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-regionCount-arraylength" href="chap22.html#VUID-VkBlitImageInfo2-regionCount-arraylength"></a> <span class="vuid">VUID-VkBlitImageInfo2-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-commonparent" href="chap22.html#VUID-VkBlitImageInfo2-commonparent"></a> <span class="vuid">VUID-VkBlitImageInfo2-commonparent</span><br>
 Both of <code>dstImage</code>, and <code>srcImage</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If <code>filter</code> is <code>VK_FILTER_CUBIC_EXT</code> and if the <code>pNext</code> chain of
<a href="chap22.html#VkBlitImageInfo2">VkBlitImageInfo2</a> includes a <code>VkBlitImageCubicWeightsInfoQCOM</code>
structure, then that structure specifies cubic weights are used in the blit.
If that structure is not present, then cubic weights are considered to be
<code>VK_CUBIC_FILTER_WEIGHTS_CATMULL_ROM_QCOM</code>.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBlitImageCubicWeightsInfoQCOM</code> structure is defined as:</p>
</div>
<div id="VkBlitImageCubicWeightsInfoQCOM" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_QCOM_filter_cubic_weights</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBlitImageCubicWeightsInfoQCOM</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>             <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                 <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkCubicFilterWeightsQCOM</span>    <span class="n">cubicWeights</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBlitImageCubicWeightsInfoQCOM</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="chap3.html#VkStructureType">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>cubicWeights</code> is a <a href="chap14.html#VkCubicFilterWeightsQCOM">VkCubicFilterWeightsQCOM</a> value controlling
cubic filter weights for the blit.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBlitImageCubicWeightsInfoQCOM-sType-sType" href="chap22.html#VUID-VkBlitImageCubicWeightsInfoQCOM-sType-sType"></a> <span class="vuid">VUID-VkBlitImageCubicWeightsInfoQCOM-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BLIT_IMAGE_CUBIC_WEIGHTS_INFO_QCOM</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageCubicWeightsInfoQCOM-cubicWeights-parameter" href="chap22.html#VUID-VkBlitImageCubicWeightsInfoQCOM-cubicWeights-parameter"></a> <span class="vuid">VUID-VkBlitImageCubicWeightsInfoQCOM-cubicWeights-parameter</span><br>
 <code>cubicWeights</code> <strong class="purple">must</strong> be a valid <a href="chap14.html#VkCubicFilterWeightsQCOM">VkCubicFilterWeightsQCOM</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageBlit2</code> structure is defined as:</p>
</div>
<div id="VkImageBlit2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageBlit2</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>             <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                 <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">srcSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">srcOffsets</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">dstSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">dstOffsets</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">}</span> <span class="n">VkImageBlit2</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkImageBlit2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="k">typedef</span> <span class="n">VkImageBlit2</span> <span class="n">VkImageBlit2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="chap3.html#VkStructureType">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcSubresource</code> is the subresource to blit from.</p>
</li>
<li>
<p><code>srcOffsets</code> is a pointer to an array of two <a href="chap3.html#VkOffset3D">VkOffset3D</a>
structures specifying the bounds of the source region within
<code>srcSubresource</code>.</p>
</li>
<li>
<p><code>dstSubresource</code> is the subresource to blit into.</p>
</li>
<li>
<p><code>dstOffsets</code> is a pointer to an array of two <a href="chap3.html#VkOffset3D">VkOffset3D</a>
structures specifying the bounds of the destination region within
<code>dstSubresource</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For each element of the <code>pRegions</code> array, a blit operation is performed
for the specified source and destination regions.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageBlit2-aspectMask-00238" href="chap22.html#VUID-VkImageBlit2-aspectMask-00238"></a> <span class="vuid">VUID-VkImageBlit2-aspectMask-00238</span><br>

The <code>aspectMask</code> member of <code>srcSubresource</code> and
<code>dstSubresource</code> <strong class="purple">must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageBlit2-layerCount-08800" href="chap22.html#VUID-VkImageBlit2-layerCount-08800"></a> <span class="vuid">VUID-VkImageBlit2-layerCount-08800</span><br>

If neither of the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> are <code>VK_REMAINING_ARRAY_LAYERS</code>, the
<code>layerCount</code> members of <code>srcSubresource</code> or <code>dstSubresource</code>
<strong class="purple">must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageBlit2-layerCount-08801" href="chap22.html#VUID-VkImageBlit2-layerCount-08801"></a> <span class="vuid">VUID-VkImageBlit2-layerCount-08801</span><br>

If one of the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> is <code>VK_REMAINING_ARRAY_LAYERS</code>, the other
member <strong class="purple">must</strong> be either <code>VK_REMAINING_ARRAY_LAYERS</code> or equal to the
<code>arrayLayers</code> member of the <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> used to create
the image minus <code>baseArrayLayer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageBlit2-sType-sType" href="chap22.html#VUID-VkImageBlit2-sType-sType"></a> <span class="vuid">VUID-VkImageBlit2-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_BLIT_2</code></p>
</li>
<li>
<p><a id="VUID-VkImageBlit2-pNext-pNext" href="chap22.html#VUID-VkImageBlit2-pNext-pNext"></a> <span class="vuid">VUID-VkImageBlit2-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a></p>
</li>
<li>
<p><a id="VUID-VkImageBlit2-sType-unique" href="chap22.html#VUID-VkImageBlit2-sType-unique"></a> <span class="vuid">VUID-VkImageBlit2-sType-unique</span><br>
 The <code>sType</code> value of each structure in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkImageBlit2-srcSubresource-parameter" href="chap22.html#VUID-VkImageBlit2-srcSubresource-parameter"></a> <span class="vuid">VUID-VkImageBlit2-srcSubresource-parameter</span><br>
 <code>srcSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageBlit2-dstSubresource-parameter" href="chap22.html#VUID-VkImageBlit2-dstSubresource-parameter"></a> <span class="vuid">VUID-VkImageBlit2-dstSubresource-parameter</span><br>
 <code>dstSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>For <a href="chap22.html#vkCmdBlitImage2">vkCmdBlitImage2</a>, each region copied can include a rotation.
To specify a rotated region, add <a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> to the
<code>pNext</code> chain of <a href="chap22.html#VkImageBlit2">VkImageBlit2</a>.
For each region with a rotation specified,
<a href="chap22.html#copies-images-scaling-rotation">Image Blits with Scaling and Rotation</a>
specifies how coordinates are rotated prior to sampling from the source
image.
When rotation is specified, the source and destination images <strong class="purple">must</strong> each be
2D images, have a 1x1x1 <a href="chap53.html#formats-compatibility-classes">texel block
extent</a>, and only one plane.</p>
</div>
<div class="sect3">
<h4 id="copies-images-scaling-rotation"><a class="anchor" href="chap22.html#copies-images-scaling-rotation"></a>22.5.1. Image Blits With Scaling and Rotation</h4>
<div class="paragraph">
<p>When <a href="chap22.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> is in the <code>pNext</code> chain of
<a href="chap22.html#VkImageBlit2">VkImageBlit2</a>, the specified region is rotated during the blit.
The following description of rotated addressing replaces the description in
<a href="chap22.html#vkCmdBlitImage">vkCmdBlitImage</a>.</p>
</div>
<div class="paragraph">
<p>The following code computes rotation of normalized coordinates.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c"><span class="c1">// rotation of normalized coordinates</span>
<span class="n">VkOffset2D</span> <span class="nf">RotateNormUV</span><span class="p">(</span><span class="n">VkOffset2D</span> <span class="n">in</span><span class="p">,</span> <span class="n">VkSurfaceTransformFlagBitsKHR</span> <span class="n">flags</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">VkOffset2D</span> <span class="n">output</span><span class="p">;</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">flags</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">case</span> <span class="n">VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</span><span class="p">:</span>
            <span class="n">out</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">in</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
            <span class="n">out</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">in</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="n">VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</span><span class="p">:</span>
            <span class="n">out</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">in</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
            <span class="n">out</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span> <span class="o">-</span> <span class="n">in</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="n">VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</span><span class="p">:</span>
            <span class="n">out</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span> <span class="o">-</span> <span class="n">in</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
            <span class="n">out</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span> <span class="o">-</span> <span class="n">in</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="n">VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</span><span class="p">:</span>
            <span class="n">out</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span> <span class="o">-</span> <span class="n">in</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
            <span class="n">out</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">in</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">out</span><span class="p">;</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>For each destination texel, the integer coordinate of that texel is
converted to an unnormalized texture coordinate, using the effective
inverse of the equations described in
<a href="chap17.html#textures-unnormalized-to-integer">unnormalized to integer
conversion</a>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u<sub>base</sub> = i +  ½</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v<sub>base</sub> = j +  ½</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w<sub>base</sub> = k +  ½</span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>These base coordinates are then offset by the first destination offset:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u<sub>offset</sub> = u<sub>base</sub> - x<sub>dst0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v<sub>offset</sub> = v<sub>base</sub> - y<sub>dst0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w<sub>offset</sub> = w<sub>base</sub> - z<sub>dst0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">a<sub>offset</sub> = a - <code>baseArrayCount</code><sub>dst</sub></span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>The UV destination coordinates are scaled by the destination region,
rotated, and scaled by the source region.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u<sub>dest_scaled</sub> = u<sub>offset</sub> / (x<sub>dst1</sub> - x<sub>dst0</sub>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v<sub>dest_scaled</sub> = v<sub>offset</sub> / (y<sub>dst1</sub> - y<sub>dst0</sub>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">(u<sub>src_scaled</sub>, v<sub>src_scaled</sub>) =
<code>RotateNormUV</code>(u<sub>dest_scaled</sub>, v<sub>dest_scaled</sub>,
<code>transform</code>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u<sub>scaled</sub> = u<sub>src_scaled</sub> × (x<sub>Src1</sub> - x<sub>Src0</sub>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v<sub>scaled</sub> = v<sub>src_scaled</sub> × (y<sub>Src1</sub> - y<sub>Src0</sub>)</span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>The W coordinate is unaffected by rotation.
The scale is determined from the ratio of source and destination
regions, and applied to the offset coordinate:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">scale<sub>w</sub> = (z<sub>Src1</sub> - z<sub>Src0</sub>) / (z<sub>dst1</sub> - z<sub>dst0</sub>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w<sub>scaled</sub> = w<sub>offset</sub> × scale<sub>w</sub></span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>Finally the source offset is added to the scaled source coordinates, to
determine the final unnormalized coordinates used to sample from
<code>srcImage</code>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u = u<sub>scaled</sub> +  x<sub>Src0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v = v<sub>scaled</sub> +  y<sub>Src0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w = w<sub>scaled</sub> +  z<sub>Src0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">q = <code>mipLevel</code></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">a = a<sub>offset</sub> +  <code>baseArrayCount</code><sub>src</sub></span></p>
</dd>
</dl>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>These coordinates are used to sample from the source image as described for
<a href="chap17.html">Image Operations</a>, with the filter mode equal to that of
<code>filter</code>; a mipmap mode of <code>VK_SAMPLER_MIPMAP_MODE_NEAREST</code>; and an
address mode of <code>VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE</code>.
Implementations <strong class="purple">must</strong> clamp at the edge of the source image, and <strong class="purple">may</strong>
additionally clamp to the edge of the source region.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="copies-resolve"><a class="anchor" href="chap22.html#copies-resolve"></a>22.6. Resolving Multisample Images</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To resolve a multisample color image to a non-multisample color image, call:</p>
</div>
<div id="vkCmdResolveImage" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkCmdResolveImage</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">srcImage</span><span class="p">,</span>
    <span class="n">VkImageLayout</span>                               <span class="n">srcImageLayout</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">dstImage</span><span class="p">,</span>
    <span class="n">VkImageLayout</span>                               <span class="n">dstImageLayout</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">regionCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkImageResolve</span><span class="o">*</span>                       <span class="n">pRegions</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the resolve.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the resolve.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to resolve.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap22.html#VkImageResolve">VkImageResolve</a>
structures specifying the regions to resolve.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>During the resolve the samples corresponding to each pixel location in the
source are converted to a single sample before being written to the
destination.</p>
</div>
<div class="paragraph">
<p>If the source format is a floating-point or normalized type, the resolve
mode is chosen as implementation-dependent behavior.
If the resolve mode requires to calculate the result from multiple samples,
such as by computing an average or weighted average of the samples, the
values for each pixel are resolved with implementation-defined numerical
precision.</p>
</div>
<div class="paragraph">
<p>If the <a href="chap53.html#formats-numericformat">numeric format</a> of <code>srcImage</code> uses sRGB
encoding and the resolve mode requires the implementation to convert the
samples to floating-point to perform the calculations, the implementation
<strong class="purple">should</strong> convert samples from nonlinear to linear before resolving the
samples as described in the “sRGB EOTF” section of the
<a href="chap2.html#data-format">Khronos Data Format Specification</a>.
In this case, the implementation <strong class="purple">must</strong> convert the linear averaged value to
nonlinear before writing the resolved result to <code>dstImage</code>.</p>
</div>
<div class="paragraph">
<p>If the source format is an integer type, a single sample’s value is selected
for each pixel.</p>
</div>
<div class="paragraph">
<p><code>srcOffset</code> and <code>dstOffset</code> select the initial <code>x</code>, <code>y</code>, and
<code>z</code> offsets in texels of the sub-regions of the source and destination
image data.
<code>extent</code> is the size in texels of the source image to resolve in
<code>width</code>, <code>height</code> and <code>depth</code>.
Each element of <code>pRegions</code> <strong class="purple">must</strong> be a region that is contained within
its corresponding image.</p>
</div>
<div class="paragraph">
<p>Resolves are done layer by layer starting with <code>baseArrayLayer</code> member
of <code>srcSubresource</code> for the source and <code>dstSubresource</code> for the
destination.
<code>layerCount</code> layers are resolved to the destination image.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdResolveImage-commandBuffer-01837" href="chap22.html#VUID-vkCmdResolveImage-commandBuffer-01837"></a> <span class="vuid">VUID-vkCmdResolveImage-commandBuffer-01837</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>srcImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-commandBuffer-01838" href="chap22.html#VUID-vkCmdResolveImage-commandBuffer-01838"></a> <span class="vuid">VUID-vkCmdResolveImage-commandBuffer-01838</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-commandBuffer-01839" href="chap22.html#VUID-vkCmdResolveImage-commandBuffer-01839"></a> <span class="vuid">VUID-vkCmdResolveImage-commandBuffer-01839</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong class="purple">must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdResolveImage-pRegions-00255" href="chap22.html#VUID-vkCmdResolveImage-pRegions-00255"></a> <span class="vuid">VUID-vkCmdResolveImage-pRegions-00255</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong class="purple">must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-00256" href="chap22.html#VUID-vkCmdResolveImage-srcImage-00256"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-00256</span><br>

If <code>srcImage</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-00257" href="chap22.html#VUID-vkCmdResolveImage-srcImage-00257"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-00257</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have a sample count equal to any valid sample count
value other than <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-00258" href="chap22.html#VUID-vkCmdResolveImage-dstImage-00258"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-00258</span><br>

If <code>dstImage</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-00259" href="chap22.html#VUID-vkCmdResolveImage-dstImage-00259"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-00259</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImageLayout-00260" href="chap22.html#VUID-vkCmdResolveImage-srcImageLayout-00260"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImageLayout-00260</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImageLayout-01400" href="chap22.html#VUID-vkCmdResolveImage-srcImageLayout-01400"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImageLayout-01400</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImageLayout-00262" href="chap22.html#VUID-vkCmdResolveImage-dstImageLayout-00262"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImageLayout-00262</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImageLayout-01401" href="chap22.html#VUID-vkCmdResolveImage-dstImageLayout-01401"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImageLayout-01401</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-02003" href="chap22.html#VUID-vkCmdResolveImage-dstImage-02003"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-02003</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>dstImage</code> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-linearColorAttachment-06519" href="chap22.html#VUID-vkCmdResolveImage-linearColorAttachment-06519"></a> <span class="vuid">VUID-vkCmdResolveImage-linearColorAttachment-06519</span><br>

If the <a href="chap51.html#features-linearColorAttachment"><code>linearColorAttachment</code></a>
feature is enabled and the image is created with
<code>VK_IMAGE_TILING_LINEAR</code>, the
<a href="chap12.html#resources-image-format-features">format features</a> of <code>dstImage</code>
<strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_2_LINEAR_COLOR_ATTACHMENT_BIT_NV</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-01386" href="chap22.html#VUID-vkCmdResolveImage-srcImage-01386"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-01386</span><br>

<code>srcImage</code> and <code>dstImage</code> <strong class="purple">must</strong> have been created with the same
image format</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcSubresource-01709" href="chap22.html#VUID-vkCmdResolveImage-srcSubresource-01709"></a> <span class="vuid">VUID-vkCmdResolveImage-srcSubresource-01709</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstSubresource-01710" href="chap22.html#VUID-vkCmdResolveImage-dstSubresource-01710"></a> <span class="vuid">VUID-vkCmdResolveImage-dstSubresource-01710</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcSubresource-01711" href="chap22.html#VUID-vkCmdResolveImage-srcSubresource-01711"></a> <span class="vuid">VUID-vkCmdResolveImage-srcSubresource-01711</span><br>

If <code>srcSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>,
<span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong class="purple">must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstSubresource-01712" href="chap22.html#VUID-vkCmdResolveImage-dstSubresource-01712"></a> <span class="vuid">VUID-vkCmdResolveImage-dstSubresource-01712</span><br>

If <code>dstSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>,
<span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong class="purple">must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-02546" href="chap22.html#VUID-vkCmdResolveImage-dstImage-02546"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-02546</span><br>

<code>dstImage</code> and <code>srcImage</code> <strong class="purple">must</strong> not have been created with
<code>flags</code> containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-04446" href="chap22.html#VUID-vkCmdResolveImage-srcImage-04446"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-04446</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>srcSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-04447" href="chap22.html#VUID-vkCmdResolveImage-srcImage-04447"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-04447</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>dstSubresource.baseArrayLayer</code> <strong class="purple">must</strong> be
<code>0</code> and <code>dstSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcOffset-00269" href="chap22.html#VUID-vkCmdResolveImage-srcOffset-00269"></a> <span class="vuid">VUID-vkCmdResolveImage-srcOffset-00269</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>srcOffset.x</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcOffset-00270" href="chap22.html#VUID-vkCmdResolveImage-srcOffset-00270"></a> <span class="vuid">VUID-vkCmdResolveImage-srcOffset-00270</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>srcOffset.y</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-00271" href="chap22.html#VUID-vkCmdResolveImage-srcImage-00271"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-00271</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>extent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcOffset-00272" href="chap22.html#VUID-vkCmdResolveImage-srcOffset-00272"></a> <span class="vuid">VUID-vkCmdResolveImage-srcOffset-00272</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>srcOffset.z</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-00273" href="chap22.html#VUID-vkCmdResolveImage-srcImage-00273"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-00273</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>srcOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and <code>extent.depth</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstOffset-00274" href="chap22.html#VUID-vkCmdResolveImage-dstOffset-00274"></a> <span class="vuid">VUID-vkCmdResolveImage-dstOffset-00274</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>dstOffset.x</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstOffset-00275" href="chap22.html#VUID-vkCmdResolveImage-dstOffset-00275"></a> <span class="vuid">VUID-vkCmdResolveImage-dstOffset-00275</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>dstOffset.y</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-00276" href="chap22.html#VUID-vkCmdResolveImage-dstImage-00276"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-00276</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>extent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstOffset-00277" href="chap22.html#VUID-vkCmdResolveImage-dstOffset-00277"></a> <span class="vuid">VUID-vkCmdResolveImage-dstOffset-00277</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>dstOffset.z</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-00278" href="chap22.html#VUID-vkCmdResolveImage-dstImage-00278"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-00278</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>dstOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and <code>extent.depth</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-06762" href="chap22.html#VUID-vkCmdResolveImage-srcImage-06762"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-06762</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-06763" href="chap22.html#VUID-vkCmdResolveImage-srcImage-06763"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-06763</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>srcImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-06764" href="chap22.html#VUID-vkCmdResolveImage-dstImage-06764"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-06764</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-06765" href="chap22.html#VUID-vkCmdResolveImage-dstImage-06765"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-06765</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>dstImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdResolveImage-commandBuffer-parameter" href="chap22.html#VUID-vkCmdResolveImage-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-parameter" href="chap22.html#VUID-vkCmdResolveImage-srcImage-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-parameter</span><br>
 <code>srcImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImageLayout-parameter" href="chap22.html#VUID-vkCmdResolveImage-srcImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-parameter" href="chap22.html#VUID-vkCmdResolveImage-dstImage-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-parameter</span><br>
 <code>dstImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImageLayout-parameter" href="chap22.html#VUID-vkCmdResolveImage-dstImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-pRegions-parameter" href="chap22.html#VUID-vkCmdResolveImage-pRegions-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap22.html#VkImageResolve">VkImageResolve</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-commandBuffer-recording" href="chap22.html#VUID-vkCmdResolveImage-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdResolveImage-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-commandBuffer-cmdpool" href="chap22.html#VUID-vkCmdResolveImage-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdResolveImage-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support VK_QUEUE_GRAPHICS_BIT operations</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-renderpass" href="chap22.html#VUID-vkCmdResolveImage-renderpass"></a> <span class="vuid">VUID-vkCmdResolveImage-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-videocoding" href="chap22.html#VUID-vkCmdResolveImage-videocoding"></a> <span class="vuid">VUID-vkCmdResolveImage-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-regionCount-arraylength" href="chap22.html#VUID-vkCmdResolveImage-regionCount-arraylength"></a> <span class="vuid">VUID-vkCmdResolveImage-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-commonparent" href="chap22.html#VUID-vkCmdResolveImage-commonparent"></a> <span class="vuid">VUID-vkCmdResolveImage-commonparent</span><br>
 Each of <code>commandBuffer</code>, <code>dstImage</code>, and <code>srcImage</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap45.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VK_QUEUE_GRAPHICS_BIT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Conditional Rendering</div>
<div class="paragraph">
<p>vkCmdResolveImage is not affected by <a href="chap23.html#drawing-conditional-rendering">conditional rendering</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageResolve</code> structure is defined as:</p>
</div>
<div id="VkImageResolve" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageResolve</span> <span class="p">{</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">srcSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">srcOffset</span><span class="p">;</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">dstSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">dstOffset</span><span class="p">;</span>
    <span class="n">VkExtent3D</span>                  <span class="n">extent</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageResolve</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>srcSubresource</code> and <code>dstSubresource</code> are
<a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structures specifying the image
subresources of the images used for the source and destination image
data, respectively.
Resolve of depth/stencil images is not supported.</p>
</li>
<li>
<p><code>srcOffset</code> and <code>dstOffset</code> select the initial <code>x</code>, <code>y</code>,
and <code>z</code> offsets in texels of the sub-regions of the source and
destination image data.</p>
</li>
<li>
<p><code>extent</code> is the size in texels of the source image to resolve in
<code>width</code>, <code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageResolve-aspectMask-00266" href="chap22.html#VUID-VkImageResolve-aspectMask-00266"></a> <span class="vuid">VUID-VkImageResolve-aspectMask-00266</span><br>

The <code>aspectMask</code> member of <code>srcSubresource</code> and
<code>dstSubresource</code> <strong class="purple">must</strong> only contain <code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageResolve-layerCount-08803" href="chap22.html#VUID-VkImageResolve-layerCount-08803"></a> <span class="vuid">VUID-VkImageResolve-layerCount-08803</span><br>

If neither of the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> are <code>VK_REMAINING_ARRAY_LAYERS</code>, the
<code>layerCount</code> member of <code>srcSubresource</code> and <code>dstSubresource</code>
<strong class="purple">must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageResolve-layerCount-08804" href="chap22.html#VUID-VkImageResolve-layerCount-08804"></a> <span class="vuid">VUID-VkImageResolve-layerCount-08804</span><br>

If one of the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> is <code>VK_REMAINING_ARRAY_LAYERS</code>, the other
member <strong class="purple">must</strong> be either <code>VK_REMAINING_ARRAY_LAYERS</code> or equal to the
<code>arrayLayers</code> member of the <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> used to create
the image minus <code>baseArrayLayer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageResolve-srcSubresource-parameter" href="chap22.html#VUID-VkImageResolve-srcSubresource-parameter"></a> <span class="vuid">VUID-VkImageResolve-srcSubresource-parameter</span><br>
 <code>srcSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageResolve-dstSubresource-parameter" href="chap22.html#VUID-VkImageResolve-dstSubresource-parameter"></a> <span class="vuid">VUID-VkImageResolve-dstSubresource-parameter</span><br>
 <code>dstSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>A more extensible version of the resolve image command is defined below.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To resolve a multisample image to a non-multisample image, call:</p>
</div>
<div id="vkCmdResolveImage2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="kt">void</span> <span class="nf">vkCmdResolveImage2</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkResolveImageInfo2</span><span class="o">*</span>                  <span class="n">pResolveImageInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkCmdResolveImage2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="kt">void</span> <span class="nf">vkCmdResolveImage2KHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkResolveImageInfo2</span><span class="o">*</span>                  <span class="n">pResolveImageInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pResolveImageInfo</code> is a pointer to a <a href="chap22.html#VkResolveImageInfo2">VkResolveImageInfo2</a>
structure describing the resolve parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally identical to <a href="chap22.html#vkCmdResolveImage">vkCmdResolveImage</a>, but
includes extensible sub-structures that include <code>sType</code> and <code>pNext</code>
parameters, allowing them to be more easily extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdResolveImage2-commandBuffer-01837" href="chap22.html#VUID-vkCmdResolveImage2-commandBuffer-01837"></a> <span class="vuid">VUID-vkCmdResolveImage2-commandBuffer-01837</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>srcImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2-commandBuffer-01838" href="chap22.html#VUID-vkCmdResolveImage2-commandBuffer-01838"></a> <span class="vuid">VUID-vkCmdResolveImage2-commandBuffer-01838</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2-commandBuffer-01839" href="chap22.html#VUID-vkCmdResolveImage2-commandBuffer-01839"></a> <span class="vuid">VUID-vkCmdResolveImage2-commandBuffer-01839</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong class="purple">must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdResolveImage2-commandBuffer-parameter" href="chap22.html#VUID-vkCmdResolveImage2-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage2-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2-pResolveImageInfo-parameter" href="chap22.html#VUID-vkCmdResolveImage2-pResolveImageInfo-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage2-pResolveImageInfo-parameter</span><br>
 <code>pResolveImageInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap22.html#VkResolveImageInfo2">VkResolveImageInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2-commandBuffer-recording" href="chap22.html#VUID-vkCmdResolveImage2-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdResolveImage2-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2-commandBuffer-cmdpool" href="chap22.html#VUID-vkCmdResolveImage2-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdResolveImage2-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support VK_QUEUE_GRAPHICS_BIT operations</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2-renderpass" href="chap22.html#VUID-vkCmdResolveImage2-renderpass"></a> <span class="vuid">VUID-vkCmdResolveImage2-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2-videocoding" href="chap22.html#VUID-vkCmdResolveImage2-videocoding"></a> <span class="vuid">VUID-vkCmdResolveImage2-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap45.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VK_QUEUE_GRAPHICS_BIT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Conditional Rendering</div>
<div class="paragraph">
<p>vkCmdResolveImage2 is not affected by <a href="chap23.html#drawing-conditional-rendering">conditional rendering</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkResolveImageInfo2</code> structure is defined as:</p>
</div>
<div id="VkResolveImageInfo2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkResolveImageInfo2</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>           <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>               <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImage</span>                   <span class="n">srcImage</span><span class="p">;</span>
    <span class="n">VkImageLayout</span>             <span class="n">srcImageLayout</span><span class="p">;</span>
    <span class="n">VkImage</span>                   <span class="n">dstImage</span><span class="p">;</span>
    <span class="n">VkImageLayout</span>             <span class="n">dstImageLayout</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                  <span class="n">regionCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkImageResolve2</span><span class="o">*</span>    <span class="n">pRegions</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkResolveImageInfo2</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkResolveImageInfo2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="k">typedef</span> <span class="n">VkResolveImageInfo2</span> <span class="n">VkResolveImageInfo2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="chap3.html#VkStructureType">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the resolve.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the resolve.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to resolve.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap22.html#VkImageResolve2">VkImageResolve2</a>
structures specifying the regions to resolve.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkResolveImageInfo2-pRegions-00255" href="chap22.html#VUID-VkResolveImageInfo2-pRegions-00255"></a> <span class="vuid">VUID-VkResolveImageInfo2-pRegions-00255</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong class="purple">must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-00256" href="chap22.html#VUID-VkResolveImageInfo2-srcImage-00256"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-00256</span><br>

If <code>srcImage</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-00257" href="chap22.html#VUID-VkResolveImageInfo2-srcImage-00257"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-00257</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have a sample count equal to any valid sample count
value other than <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-00258" href="chap22.html#VUID-VkResolveImageInfo2-dstImage-00258"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-00258</span><br>

If <code>dstImage</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-00259" href="chap22.html#VUID-VkResolveImageInfo2-dstImage-00259"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-00259</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImageLayout-00260" href="chap22.html#VUID-VkResolveImageInfo2-srcImageLayout-00260"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImageLayout-00260</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImageLayout-01400" href="chap22.html#VUID-VkResolveImageInfo2-srcImageLayout-01400"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImageLayout-01400</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImageLayout-00262" href="chap22.html#VUID-VkResolveImageInfo2-dstImageLayout-00262"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImageLayout-00262</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImageLayout-01401" href="chap22.html#VUID-VkResolveImageInfo2-dstImageLayout-01401"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImageLayout-01401</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-02003" href="chap22.html#VUID-VkResolveImageInfo2-dstImage-02003"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-02003</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>dstImage</code> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-linearColorAttachment-06519" href="chap22.html#VUID-VkResolveImageInfo2-linearColorAttachment-06519"></a> <span class="vuid">VUID-VkResolveImageInfo2-linearColorAttachment-06519</span><br>

If the <a href="chap51.html#features-linearColorAttachment"><code>linearColorAttachment</code></a>
feature is enabled and the image is created with
<code>VK_IMAGE_TILING_LINEAR</code>, the
<a href="chap12.html#resources-image-format-features">format features</a> of <code>dstImage</code>
<strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_2_LINEAR_COLOR_ATTACHMENT_BIT_NV</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-01386" href="chap22.html#VUID-VkResolveImageInfo2-srcImage-01386"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-01386</span><br>

<code>srcImage</code> and <code>dstImage</code> <strong class="purple">must</strong> have been created with the same
image format</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcSubresource-01709" href="chap22.html#VUID-VkResolveImageInfo2-srcSubresource-01709"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcSubresource-01709</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstSubresource-01710" href="chap22.html#VUID-VkResolveImageInfo2-dstSubresource-01710"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstSubresource-01710</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcSubresource-01711" href="chap22.html#VUID-VkResolveImageInfo2-srcSubresource-01711"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcSubresource-01711</span><br>

If <code>srcSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>,
<span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong class="purple">must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstSubresource-01712" href="chap22.html#VUID-VkResolveImageInfo2-dstSubresource-01712"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstSubresource-01712</span><br>

If <code>dstSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>,
<span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong class="purple">must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-02546" href="chap22.html#VUID-VkResolveImageInfo2-dstImage-02546"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-02546</span><br>

<code>dstImage</code> and <code>srcImage</code> <strong class="purple">must</strong> not have been created with
<code>flags</code> containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-04446" href="chap22.html#VUID-VkResolveImageInfo2-srcImage-04446"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-04446</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>srcSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-04447" href="chap22.html#VUID-VkResolveImageInfo2-srcImage-04447"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-04447</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>dstSubresource.baseArrayLayer</code> <strong class="purple">must</strong> be
<code>0</code> and <code>dstSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcOffset-00269" href="chap22.html#VUID-VkResolveImageInfo2-srcOffset-00269"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcOffset-00269</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>srcOffset.x</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcOffset-00270" href="chap22.html#VUID-VkResolveImageInfo2-srcOffset-00270"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcOffset-00270</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>srcOffset.y</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-00271" href="chap22.html#VUID-VkResolveImageInfo2-srcImage-00271"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-00271</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>extent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcOffset-00272" href="chap22.html#VUID-VkResolveImageInfo2-srcOffset-00272"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcOffset-00272</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>srcOffset.z</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-00273" href="chap22.html#VUID-VkResolveImageInfo2-srcImage-00273"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-00273</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>srcOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and <code>extent.depth</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstOffset-00274" href="chap22.html#VUID-VkResolveImageInfo2-dstOffset-00274"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstOffset-00274</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>dstOffset.x</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstOffset-00275" href="chap22.html#VUID-VkResolveImageInfo2-dstOffset-00275"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstOffset-00275</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>dstOffset.y</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-00276" href="chap22.html#VUID-VkResolveImageInfo2-dstImage-00276"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-00276</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>extent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstOffset-00277" href="chap22.html#VUID-VkResolveImageInfo2-dstOffset-00277"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstOffset-00277</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>dstOffset.z</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-00278" href="chap22.html#VUID-VkResolveImageInfo2-dstImage-00278"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-00278</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>dstOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and <code>extent.depth</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-06762" href="chap22.html#VUID-VkResolveImageInfo2-srcImage-06762"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-06762</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-06763" href="chap22.html#VUID-VkResolveImageInfo2-srcImage-06763"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-06763</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>srcImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-06764" href="chap22.html#VUID-VkResolveImageInfo2-dstImage-06764"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-06764</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-06765" href="chap22.html#VUID-VkResolveImageInfo2-dstImage-06765"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-06765</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>dstImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkResolveImageInfo2-sType-sType" href="chap22.html#VUID-VkResolveImageInfo2-sType-sType"></a> <span class="vuid">VUID-VkResolveImageInfo2-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_RESOLVE_IMAGE_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-pNext-pNext" href="chap22.html#VUID-VkResolveImageInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkResolveImageInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-parameter" href="chap22.html#VUID-VkResolveImageInfo2-srcImage-parameter"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-parameter</span><br>
 <code>srcImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImageLayout-parameter" href="chap22.html#VUID-VkResolveImageInfo2-srcImageLayout-parameter"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-parameter" href="chap22.html#VUID-VkResolveImageInfo2-dstImage-parameter"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-parameter</span><br>
 <code>dstImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImageLayout-parameter" href="chap22.html#VUID-VkResolveImageInfo2-dstImageLayout-parameter"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-pRegions-parameter" href="chap22.html#VUID-VkResolveImageInfo2-pRegions-parameter"></a> <span class="vuid">VUID-VkResolveImageInfo2-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap22.html#VkImageResolve2">VkImageResolve2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-regionCount-arraylength" href="chap22.html#VUID-VkResolveImageInfo2-regionCount-arraylength"></a> <span class="vuid">VUID-VkResolveImageInfo2-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-commonparent" href="chap22.html#VUID-VkResolveImageInfo2-commonparent"></a> <span class="vuid">VUID-VkResolveImageInfo2-commonparent</span><br>
 Both of <code>dstImage</code>, and <code>srcImage</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageResolve2</code> structure is defined as:</p>
</div>
<div id="VkImageResolve2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageResolve2</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>             <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                 <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">srcSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">srcOffset</span><span class="p">;</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">dstSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">dstOffset</span><span class="p">;</span>
    <span class="n">VkExtent3D</span>                  <span class="n">extent</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageResolve2</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkImageResolve2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="k">typedef</span> <span class="n">VkImageResolve2</span> <span class="n">VkImageResolve2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="chap3.html#VkStructureType">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcSubresource</code> and <code>dstSubresource</code> are
<a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structures specifying the image
subresources of the images used for the source and destination image
data, respectively.
Resolve of depth/stencil images is not supported.</p>
</li>
<li>
<p><code>srcOffset</code> and <code>dstOffset</code> select the initial <code>x</code>, <code>y</code>,
and <code>z</code> offsets in texels of the sub-regions of the source and
destination image data.</p>
</li>
<li>
<p><code>extent</code> is the size in texels of the source image to resolve in
<code>width</code>, <code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageResolve2-aspectMask-00266" href="chap22.html#VUID-VkImageResolve2-aspectMask-00266"></a> <span class="vuid">VUID-VkImageResolve2-aspectMask-00266</span><br>

The <code>aspectMask</code> member of <code>srcSubresource</code> and
<code>dstSubresource</code> <strong class="purple">must</strong> only contain <code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageResolve2-layerCount-08803" href="chap22.html#VUID-VkImageResolve2-layerCount-08803"></a> <span class="vuid">VUID-VkImageResolve2-layerCount-08803</span><br>

If neither of the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> are <code>VK_REMAINING_ARRAY_LAYERS</code>, the
<code>layerCount</code> member of <code>srcSubresource</code> and <code>dstSubresource</code>
<strong class="purple">must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageResolve2-layerCount-08804" href="chap22.html#VUID-VkImageResolve2-layerCount-08804"></a> <span class="vuid">VUID-VkImageResolve2-layerCount-08804</span><br>

If one of the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> is <code>VK_REMAINING_ARRAY_LAYERS</code>, the other
member <strong class="purple">must</strong> be either <code>VK_REMAINING_ARRAY_LAYERS</code> or equal to the
<code>arrayLayers</code> member of the <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> used to create
the image minus <code>baseArrayLayer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageResolve2-sType-sType" href="chap22.html#VUID-VkImageResolve2-sType-sType"></a> <span class="vuid">VUID-VkImageResolve2-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_RESOLVE_2</code></p>
</li>
<li>
<p><a id="VUID-VkImageResolve2-pNext-pNext" href="chap22.html#VUID-VkImageResolve2-pNext-pNext"></a> <span class="vuid">VUID-VkImageResolve2-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkImageResolve2-srcSubresource-parameter" href="chap22.html#VUID-VkImageResolve2-srcSubresource-parameter"></a> <span class="vuid">VUID-VkImageResolve2-srcSubresource-parameter</span><br>
 <code>srcSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageResolve2-dstSubresource-parameter" href="chap22.html#VUID-VkImageResolve2-dstSubresource-parameter"></a> <span class="vuid">VUID-VkImageResolve2-dstSubresource-parameter</span><br>
 <code>dstSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap22.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="copies-buffer-markers"><a class="anchor" href="chap22.html#copies-buffer-markers"></a>22.7. Buffer Markers</h3>
<div class="paragraph">
<p><em>Buffer marker write commands</em> are as follows:</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To write a 32-bit marker value into a buffer as a pipelined operation, call:</p>
</div>
<div id="vkCmdWriteBufferMarker2AMD" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_AMD_buffer_marker with VK_VERSION_1_3 or VK_KHR_synchronization2</span>
<span class="kt">void</span> <span class="nf">vkCmdWriteBufferMarker2AMD</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkPipelineStageFlags2</span>                       <span class="n">stage</span><span class="p">,</span>
    <span class="n">VkBuffer</span>                                    <span class="n">dstBuffer</span><span class="p">,</span>
    <span class="n">VkDeviceSize</span>                                <span class="n">dstOffset</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">marker</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>stage</code> specifies the pipeline stage whose completion triggers the
marker write.</p>
</li>
<li>
<p><code>dstBuffer</code> is the buffer where the marker will be written.</p>
</li>
<li>
<p><code>dstOffset</code> is the byte offset into the buffer where the marker will
be written.</p>
</li>
<li>
<p><code>marker</code> is the 32-bit value of the marker.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When <code>vkCmdWriteBufferMarker2AMD</code> is submitted to a queue, it defines an
execution dependency between prior operations and writing the marker value,
as well as a memory dependency from earlier <a href="chap22.html#copies-buffer-markers">buffer
marker write commands</a>.</p>
</div>
<div class="paragraph">
<p>The first <a href="chap7.html#synchronization-dependencies-scopes">synchronization scope</a>
includes operations performed by operations that occur earlier in
<a href="chap7.html#synchronization-submission-order">submission order</a> in the pipeline stage
identified by <code>pipelineStage</code>.
It additionally includes other <a href="chap22.html#copies-buffer-markers">buffer marker write
commands</a> that occur earlier in <a href="chap7.html#synchronization-submission-order">submission order</a> that specified either the same <code>pipelineStage</code> or a
stage that is <a href="chap7.html#synchronization-pipeline-stages-order">logically earlier</a>.</p>
</div>
<div class="paragraph">
<p>The second <a href="chap7.html#synchronization-dependencies-scopes">synchronization scope</a>
includes only the buffer marker write.</p>
</div>
<div class="paragraph">
<p>The first <a href="chap7.html#synchronization-dependencies-access-scopes">access scope</a>
includes only accesses performed by other <a href="chap22.html#copies-buffer-markers">buffer
marker write commands</a>.</p>
</div>
<div class="paragraph">
<p>The second <a href="chap7.html#synchronization-dependencies-access-scopes">access scope</a> is
empty.</p>
</div>
<div class="paragraph">
<p>The access scope for buffer marker writes falls under the
<code>VK_ACCESS_TRANSFER_WRITE_BIT</code> flag, and is performed by either
<code>pipelineStage</code> or <code>VK_PIPELINE_STAGE_TRANSFER_BIT</code>.
<a href="chap7.html">Synchronization commands</a> should specify this access
flag and both pipeline stages when defining dependencies with this command.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Similar to <code>vkCmdWriteTimestamp2</code>, if an implementation is unable to
write a marker at any specific pipeline stage, it <strong class="purple">may</strong> instead do so at any
logically later stage.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Implementations <strong class="purple">may</strong> only support a limited number of pipelined marker write
operations in flight at a given time.
Thus an excessive number of marker write operations <strong class="purple">may</strong> degrade command
execution performance.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03929" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-stage-03929"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03929</span><br>

If the <a href="chap51.html#features-geometryShader"><code>geometryShader</code></a> feature is not
enabled, <code>stage</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_GEOMETRY_SHADER_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03930" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-stage-03930"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03930</span><br>

If the <a href="chap51.html#features-tessellationShader"><code>tessellationShader</code></a> feature
is not enabled, <code>stage</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_TESSELLATION_CONTROL_SHADER_BIT</code> or
<code>VK_PIPELINE_STAGE_2_TESSELLATION_EVALUATION_SHADER_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03931" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-stage-03931"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03931</span><br>

If the <a href="chap51.html#features-conditionalRendering"><code>conditionalRendering</code></a>
feature is not enabled, <code>stage</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_CONDITIONAL_RENDERING_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03932" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-stage-03932"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03932</span><br>

If the <a href="chap51.html#features-fragmentDensityMap"><code>fragmentDensityMap</code></a> feature
is not enabled, <code>stage</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_FRAGMENT_DENSITY_PROCESS_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03933" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-stage-03933"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03933</span><br>

If the <a href="chap51.html#features-transformFeedback"><code>transformFeedback</code></a> feature
is not enabled, <code>stage</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_TRANSFORM_FEEDBACK_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03934" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-stage-03934"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03934</span><br>

If the <a href="chap51.html#features-meshShader"><code>meshShader</code></a> feature is not enabled,
<code>stage</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_MESH_SHADER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03935" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-stage-03935"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03935</span><br>

If the <a href="chap51.html#features-taskShader"><code>taskShader</code></a> feature is not enabled,
<code>stage</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_TASK_SHADER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-07316" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-stage-07316"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-07316</span><br>

If neither of the <a href="chap51.html#features-shadingRateImage"><code>shadingRateImage</code></a>
or the <a href="chap51.html#features-attachmentFragmentShadingRate"><code>attachmentFragmentShadingRate</code></a> features are enabled,
<code>stage</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-04957" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-stage-04957"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-04957</span><br>

If the <a href="chap51.html#features-subpassShading"><code>subpassShading</code></a> feature is not
enabled, <code>stage</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_SUBPASS_SHADER_BIT_HUAWEI</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-04995" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-stage-04995"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-04995</span><br>

If the <a href="chap51.html#features-invocationMask"><code>invocationMask</code></a> feature is not
enabled, <code>stage</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_INVOCATION_MASK_BIT_HUAWEI</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-07946" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-stage-07946"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-07946</span><br>

If neither the <a href="chap60.html#VK_NV_ray_tracing">VK_NV_ray_tracing</a> extension or the
<a href="chap51.html#features-rayTracingPipeline"><code>rayTracingPipeline</code></a> feature are
enabled, <code>stage</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_RAY_TRACING_SHADER_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-10751" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-stage-10751"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-10751</span><br>

If the <a href="chap51.html#features-accelerationStructure"><code>accelerationStructure</code></a>
feature is not enabled, <code>stage</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_ACCELERATION_STRUCTURE_BUILD_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-10752" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-stage-10752"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-10752</span><br>

If the <a href="chap51.html#features-rayTracingMaintenance1"><code>rayTracingMaintenance1</code></a>
feature is not enabled, <code>stage</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_ACCELERATION_STRUCTURE_COPY_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-10753" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-stage-10753"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-10753</span><br>

If the <a href="chap51.html#features-micromap"><code>micromap</code></a> feature is not enabled,
<code>stage</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_MICROMAP_BUILD_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-synchronization2-03893" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-synchronization2-03893"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-synchronization2-03893</span><br>

The <a href="chap51.html#features-synchronization2"><code>synchronization2</code></a> feature <strong class="purple">must</strong>
be enabled</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03894" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-stage-03894"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03894</span><br>

<code>stage</code> <strong class="purple">must</strong> include only a single pipeline stage</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03895" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-stage-03895"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03895</span><br>

<code>stage</code> <strong class="purple">must</strong> include only stages that are valid for the queue
family that was used to create the command pool that <code>commandBuffer</code>
was allocated from</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-dstOffset-03896" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-dstOffset-03896"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-dstOffset-03896</span><br>

<code>dstOffset</code> <strong class="purple">must</strong> be less than or equal to the size of
<code>dstBuffer</code> minus <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-03897" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-03897"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-03897</span><br>

<code>dstBuffer</code> <strong class="purple">must</strong> have been created with the
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-03898" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-03898"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-03898</span><br>

If <code>dstBuffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-dstOffset-03899" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-dstOffset-03899"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-dstOffset-03899</span><br>

<code>dstOffset</code> <strong class="purple">must</strong> be a multiple of <code>4</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-parameter" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-parameter" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-stage-parameter"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-parameter</span><br>
 <code>stage</code> <strong class="purple">must</strong> be a valid combination of <a href="chap7.html#VkPipelineStageFlagBits2">VkPipelineStageFlagBits2</a> values</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-parameter" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-parameter"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-recording" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-cmdpool" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support VK_QUEUE_COMPUTE_BIT, VK_QUEUE_GRAPHICS_BIT, or VK_QUEUE_TRANSFER_BIT operations</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-videocoding" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-videocoding"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-commonparent" href="chap22.html#VUID-vkCmdWriteBufferMarker2AMD-commonparent"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-commonparent</span><br>
 Both of <code>commandBuffer</code>, and <code>dstBuffer</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap45.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VK_QUEUE_COMPUTE_BIT<br>
VK_QUEUE_GRAPHICS_BIT<br>
VK_QUEUE_TRANSFER_BIT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Conditional Rendering</div>
<div class="paragraph">
<p>vkCmdWriteBufferMarker2AMD is not affected by <a href="chap23.html#drawing-conditional-rendering">conditional rendering</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To write a 32-bit marker value into a buffer as a pipelined operation, call:</p>
</div>
<div id="vkCmdWriteBufferMarkerAMD" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_AMD_buffer_marker</span>
<span class="kt">void</span> <span class="nf">vkCmdWriteBufferMarkerAMD</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkPipelineStageFlagBits</span>                     <span class="n">pipelineStage</span><span class="p">,</span>
    <span class="n">VkBuffer</span>                                    <span class="n">dstBuffer</span><span class="p">,</span>
    <span class="n">VkDeviceSize</span>                                <span class="n">dstOffset</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">marker</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pipelineStage</code> is a <a href="chap7.html#VkPipelineStageFlagBits">VkPipelineStageFlagBits</a> value specifying
the pipeline stage whose completion triggers the marker write.</p>
</li>
<li>
<p><code>dstBuffer</code> is the buffer where the marker will be written to.</p>
</li>
<li>
<p><code>dstOffset</code> is the byte offset into the buffer where the marker will
be written to.</p>
</li>
<li>
<p><code>marker</code> is the 32-bit value of the marker.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When <code>vkCmdWriteBufferMarkerAMD</code> is submitted to a queue, it defines an
execution dependency between prior operations and writing the marker value,
as well as a memory dependency from earlier <a href="chap22.html#copies-buffer-markers">buffer
marker write commands</a>.</p>
</div>
<div class="paragraph">
<p>The first <a href="chap7.html#synchronization-dependencies-scopes">synchronization scope</a>
includes operations performed by operations that occur earlier in
<a href="chap7.html#synchronization-submission-order">submission order</a> in the pipeline stage
identified by <code>pipelineStage</code>.
It additionally includes other <a href="chap22.html#copies-buffer-markers">buffer marker write
commands</a> that occur earlier in <a href="chap7.html#synchronization-submission-order">submission order</a> that specified either the same <code>pipelineStage</code> or a
stage that is <a href="chap7.html#synchronization-pipeline-stages-order">logically earlier</a>.</p>
</div>
<div class="paragraph">
<p>The second <a href="chap7.html#synchronization-dependencies-scopes">synchronization scope</a>
includes only the buffer marker write.</p>
</div>
<div class="paragraph">
<p>The first <a href="chap7.html#synchronization-dependencies-access-scopes">access scope</a>
includes only accesses performed by other <a href="chap22.html#copies-buffer-markers">buffer
marker write commands</a>.</p>
</div>
<div class="paragraph">
<p>The second <a href="chap7.html#synchronization-dependencies-access-scopes">access scope</a> is
empty.</p>
</div>
<div class="paragraph">
<p>The access scope for buffer marker writes falls under the
<code>VK_ACCESS_TRANSFER_WRITE_BIT</code> flag, and is performed by either
<code>pipelineStage</code> or <code>VK_PIPELINE_STAGE_TRANSFER_BIT</code>.
<a href="chap7.html">Synchronization commands</a> should specify this access
flag and both pipeline stages when defining dependencies with this command.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Similar to <code>vkCmdWriteTimestamp</code>, if an implementation is unable to
write a marker at any specific pipeline stage, it <strong class="purple">may</strong> instead do so at any
logically later stage.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Implementations <strong class="purple">may</strong> only support a limited number of pipelined marker write
operations in flight at a given time, thus excessive number of marker write
operations <strong class="purple">may</strong> degrade command execution performance.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04074" href="chap22.html#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04074"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04074</span><br>

<code>pipelineStage</code> <strong class="purple">must</strong> be a
<a href="chap7.html#synchronization-pipeline-stages-supported">valid stage</a> for the queue
family that was used to create the command pool that <code>commandBuffer</code>
was allocated from</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04075" href="chap22.html#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04075"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04075</span><br>

If the <a href="chap51.html#features-geometryShader"><code>geometryShader</code></a> feature is not
enabled, <code>pipelineStage</code> <strong class="purple">must</strong> not be
<code>VK_PIPELINE_STAGE_GEOMETRY_SHADER_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04076" href="chap22.html#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04076"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04076</span><br>

If the <a href="chap51.html#features-tessellationShader"><code>tessellationShader</code></a> feature
is not enabled, <code>pipelineStage</code> <strong class="purple">must</strong> not be
<code>VK_PIPELINE_STAGE_TESSELLATION_CONTROL_SHADER_BIT</code> or
<code>VK_PIPELINE_STAGE_TESSELLATION_EVALUATION_SHADER_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04077" href="chap22.html#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04077"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04077</span><br>

If the <a href="chap51.html#features-conditionalRendering"><code>conditionalRendering</code></a>
feature is not enabled, <code>pipelineStage</code> <strong class="purple">must</strong> not be
<code>VK_PIPELINE_STAGE_CONDITIONAL_RENDERING_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04078" href="chap22.html#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04078"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04078</span><br>

If the <a href="chap51.html#features-fragmentDensityMap"><code>fragmentDensityMap</code></a> feature
is not enabled, <code>pipelineStage</code> <strong class="purple">must</strong> not be
<code>VK_PIPELINE_STAGE_FRAGMENT_DENSITY_PROCESS_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04079" href="chap22.html#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04079"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04079</span><br>

If the <a href="chap51.html#features-transformFeedback"><code>transformFeedback</code></a> feature
is not enabled, <code>pipelineStage</code> <strong class="purple">must</strong> not be
<code>VK_PIPELINE_STAGE_TRANSFORM_FEEDBACK_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04080" href="chap22.html#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04080"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04080</span><br>

If the <a href="chap51.html#features-meshShader"><code>meshShader</code></a> feature is not enabled,
<code>pipelineStage</code> <strong class="purple">must</strong> not be
<code>VK_PIPELINE_STAGE_MESH_SHADER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-07077" href="chap22.html#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-07077"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-07077</span><br>

If the <a href="chap51.html#features-taskShader"><code>taskShader</code></a> feature is not enabled,
<code>pipelineStage</code> <strong class="purple">must</strong> not be
<code>VK_PIPELINE_STAGE_TASK_SHADER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-shadingRateImage-07314" href="chap22.html#VUID-vkCmdWriteBufferMarkerAMD-shadingRateImage-07314"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-shadingRateImage-07314</span><br>

If neither of the <a href="chap51.html#features-shadingRateImage"><code>shadingRateImage</code></a>
or the <a href="chap51.html#features-attachmentFragmentShadingRate"><code>attachmentFragmentShadingRate</code></a> features are enabled,
<code>pipelineStage</code> <strong class="purple">must</strong> not be
<code>VK_PIPELINE_STAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-synchronization2-06489" href="chap22.html#VUID-vkCmdWriteBufferMarkerAMD-synchronization2-06489"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-synchronization2-06489</span><br>

If the <a href="chap51.html#features-synchronization2"><code>synchronization2</code></a> feature is
not enabled, <code>pipelineStage</code> <strong class="purple">must</strong> not be
<code>VK_PIPELINE_STAGE_NONE</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-rayTracingPipeline-07943" href="chap22.html#VUID-vkCmdWriteBufferMarkerAMD-rayTracingPipeline-07943"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-rayTracingPipeline-07943</span><br>

If neither of the <a href="chap60.html#VK_NV_ray_tracing">VK_NV_ray_tracing</a> extension or the
<a href="chap51.html#features-rayTracingPipeline"><code>rayTracingPipeline</code></a> feature are
enabled, <code>pipelineStage</code> <strong class="purple">must</strong> not be
<code>VK_PIPELINE_STAGE_RAY_TRACING_SHADER_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-dstOffset-01798" href="chap22.html#VUID-vkCmdWriteBufferMarkerAMD-dstOffset-01798"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-dstOffset-01798</span><br>

<code>dstOffset</code> <strong class="purple">must</strong> be less than or equal to the size of
<code>dstBuffer</code> minus <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-01799" href="chap22.html#VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-01799"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-01799</span><br>

<code>dstBuffer</code> <strong class="purple">must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-01800" href="chap22.html#VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-01800"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-01800</span><br>

If <code>dstBuffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-dstOffset-01801" href="chap22.html#VUID-vkCmdWriteBufferMarkerAMD-dstOffset-01801"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-dstOffset-01801</span><br>

<code>dstOffset</code> <strong class="purple">must</strong> be a multiple of <code>4</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-parameter" href="chap22.html#VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-parameter" href="chap22.html#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-parameter"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-parameter</span><br>
 If <code>pipelineStage</code> is not <code>0</code>, <code>pipelineStage</code> <strong class="purple">must</strong> be a valid <a href="chap7.html#VkPipelineStageFlagBits">VkPipelineStageFlagBits</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-parameter" href="chap22.html#VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-parameter"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-recording" href="chap22.html#VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-cmdpool" href="chap22.html#VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support VK_QUEUE_COMPUTE_BIT, VK_QUEUE_GRAPHICS_BIT, or VK_QUEUE_TRANSFER_BIT operations</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-videocoding" href="chap22.html#VUID-vkCmdWriteBufferMarkerAMD-videocoding"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-commonparent" href="chap22.html#VUID-vkCmdWriteBufferMarkerAMD-commonparent"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-commonparent</span><br>
 Both of <code>commandBuffer</code>, and <code>dstBuffer</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap45.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VK_QUEUE_COMPUTE_BIT<br>
VK_QUEUE_GRAPHICS_BIT<br>
VK_QUEUE_TRANSFER_BIT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Conditional Rendering</div>
<div class="paragraph">
<p>vkCmdWriteBufferMarkerAMD is not affected by <a href="chap23.html#drawing-conditional-rendering">conditional rendering</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="copies-tensors"><a class="anchor" href="chap22.html#copies-tensors"></a>22.8. Copying Data Between Tensors</h3>
<div class="paragraph">
<p><a href="chap22.html#vkCmdCopyTensorARM">vkCmdCopyTensorARM</a> performs tensor copies in a similar manner to a
host memcpy.
It does not perform general-purpose conversions such as scaling, resizing,
or format conversions.
Rather, it simply copies raw tensor data.
<a href="chap22.html#vkCmdCopyTensorARM">vkCmdCopyTensorARM</a> <strong class="purple">can</strong> copy between tensors with different formats,
provided the formats are compatible.
Tensor formats are compatible if they share the same class, as shown in the
<a href="chap53.html#formats-compatibility">Compatible Formats</a>.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data between tensor objects, call:</p>
</div>
<div id="vkCmdCopyTensorARM" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_ARM_tensors</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyTensorARM</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
     <span class="k">const</span> <span class="n">VkCopyTensorInfoARM</span><span class="o">*</span>                 <span class="n">pCopyTensorInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pCopyTensorInfo</code> is a pointer to <a href="chap22.html#VkCopyTensorInfoARM">VkCopyTensorInfoARM</a>
structure describing the copy parameters.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyTensorARM-commandBuffer-parameter" href="chap22.html#VUID-vkCmdCopyTensorARM-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyTensorARM-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyTensorARM-pCopyTensorInfo-parameter" href="chap22.html#VUID-vkCmdCopyTensorARM-pCopyTensorInfo-parameter"></a> <span class="vuid">VUID-vkCmdCopyTensorARM-pCopyTensorInfo-parameter</span><br>
 <code>pCopyTensorInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap22.html#VkCopyTensorInfoARM">VkCopyTensorInfoARM</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyTensorARM-commandBuffer-recording" href="chap22.html#VUID-vkCmdCopyTensorARM-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyTensorARM-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyTensorARM-commandBuffer-cmdpool" href="chap22.html#VUID-vkCmdCopyTensorARM-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyTensorARM-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support VK_QUEUE_COMPUTE_BIT, VK_QUEUE_GRAPHICS_BIT, or VK_QUEUE_TRANSFER_BIT operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyTensorARM-renderpass" href="chap22.html#VUID-vkCmdCopyTensorARM-renderpass"></a> <span class="vuid">VUID-vkCmdCopyTensorARM-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyTensorARM-videocoding" href="chap22.html#VUID-vkCmdCopyTensorARM-videocoding"></a> <span class="vuid">VUID-vkCmdCopyTensorARM-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap45.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VK_QUEUE_COMPUTE_BIT<br>
VK_QUEUE_GRAPHICS_BIT<br>
VK_QUEUE_TRANSFER_BIT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Conditional Rendering</div>
<div class="paragraph">
<p>vkCmdCopyTensorARM is not affected by <a href="chap23.html#drawing-conditional-rendering">conditional rendering</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyTensorInfoARM</code> structure is defined as:</p>
</div>
<div id="VkCopyTensorInfoARM" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_ARM_tensors</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkCopyTensorInfoARM</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>           <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>               <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkTensorARM</span>               <span class="n">srcTensor</span><span class="p">;</span>
    <span class="n">VkTensorARM</span>               <span class="n">dstTensor</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                  <span class="n">regionCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkTensorCopyARM</span><span class="o">*</span>    <span class="n">pRegions</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkCopyTensorInfoARM</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="chap3.html#VkStructureType">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is NULL or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcTensor</code> is the source tensor.</p>
</li>
<li>
<p><code>dstTensor</code> is the destination tensor.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap22.html#VkTensorCopyARM">VkTensorCopyARM</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each region in <code>pRegions</code> describes a region to be copied from the
source tensor to a corresponding region of the destination tensor.
<code>srcTensor</code> and <code>dstTensor</code> <strong class="purple">can</strong> be the same tensor or alias the
same memory.</p>
</div>
<div id="copies-tensors-format-compatibility" class="paragraph">
<p>The formats of <code>srcTensor</code> and <code>dstTensor</code> <strong class="purple">must</strong> be compatible.
Formats are compatible if they share the same class, as shown in the
<a href="chap53.html#formats-compatibility">Compatible Formats</a> table.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="title">editing-note</div>
<div class="paragraph">
<p>The valid usage rules restrict copies to copying whole tensors of equal
sizes.
That is, only a single region can be copied and this region must be the
entire tensor.
This means the entire tensor must be copied.
These restrictions may be relaxed in future extensions.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div id="copies-tensors-format-size-compatibility" class="paragraph">
<p><code>vkCmdCopyTensorARM</code> allows copying between <em>size-compatible</em> internal
formats.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyTensorInfoARM-dimensionCount-09684" href="chap22.html#VUID-VkCopyTensorInfoARM-dimensionCount-09684"></a> <span class="vuid">VUID-VkCopyTensorInfoARM-dimensionCount-09684</span><br>

<code>srcTensor</code> and <code>dstTensor</code> <strong class="purple">must</strong> have been created with equal
values for <a href="chap12.html#VkTensorDescriptionARM">VkTensorDescriptionARM</a>::<code>dimensionCount</code></p>
</li>
<li>
<p><a id="VUID-VkCopyTensorInfoARM-pDimensions-09685" href="chap22.html#VUID-VkCopyTensorInfoARM-pDimensions-09685"></a> <span class="vuid">VUID-VkCopyTensorInfoARM-pDimensions-09685</span><br>

For each of the elements of
<a href="chap12.html#VkTensorDescriptionARM">VkTensorDescriptionARM</a>::<code>pDimensions</code>, <code>srcTensor</code> and
<code>dstTensor</code> <strong class="purple">must</strong> be the same size</p>
</li>
<li>
<p><a id="VUID-VkCopyTensorInfoARM-regionCount-09686" href="chap22.html#VUID-VkCopyTensorInfoARM-regionCount-09686"></a> <span class="vuid">VUID-VkCopyTensorInfoARM-regionCount-09686</span><br>

<code>regionCount</code> must be equal to 1</p>
</li>
<li>
<p><a id="VUID-VkCopyTensorInfoARM-pRegions-09687" href="chap22.html#VUID-VkCopyTensorInfoARM-pRegions-09687"></a> <span class="vuid">VUID-VkCopyTensorInfoARM-pRegions-09687</span><br>

Each element of <code>pRegions</code> <strong class="purple">must</strong> be a <a href="chap22.html#VkTensorCopyARM">VkTensorCopyARM</a>
structure whose <code>pSrcOffset</code> is <code>NULL</code> or has all its elements equal
to <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyTensorInfoARM-pRegions-09688" href="chap22.html#VUID-VkCopyTensorInfoARM-pRegions-09688"></a> <span class="vuid">VUID-VkCopyTensorInfoARM-pRegions-09688</span><br>

Each element of <code>pRegions</code> <strong class="purple">must</strong> be a <a href="chap22.html#VkTensorCopyARM">VkTensorCopyARM</a>
structure whose <code>pDstOffset</code> is <code>NULL</code> or has all its elements equal
to <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyTensorInfoARM-pRegions-09689" href="chap22.html#VUID-VkCopyTensorInfoARM-pRegions-09689"></a> <span class="vuid">VUID-VkCopyTensorInfoARM-pRegions-09689</span><br>

Each element of <code>pRegions</code> <strong class="purple">must</strong> be a <a href="chap22.html#VkTensorCopyARM">VkTensorCopyARM</a>
structure whose <code>pExtent</code> is <code>NULL</code> or equal to the
<a href="chap12.html#VkTensorDescriptionARM">VkTensorDescriptionARM</a>::<code>pDimensions</code> array specified when
<code>srcTensor</code> and <code>dstTensor</code> were created</p>
</li>
<li>
<p><a id="VUID-VkCopyTensorInfoARM-pRegions-09954" href="chap22.html#VUID-VkCopyTensorInfoARM-pRegions-09954"></a> <span class="vuid">VUID-VkCopyTensorInfoARM-pRegions-09954</span><br>

Each element of <code>pRegions</code> <strong class="purple">must</strong> be a <a href="chap22.html#VkTensorCopyARM">VkTensorCopyARM</a>
structure whose <code>dimensionCount</code>, if it is not equal to 0, is equal
to the largest of the <a href="chap12.html#VkTensorDescriptionARM">VkTensorDescriptionARM</a>::<code>dimensionCount</code>
of <code>srcTensor</code> or <code>dstTensor</code></p>
</li>
<li>
<p><a id="VUID-VkCopyTensorInfoARM-srcTensor-09690" href="chap22.html#VUID-VkCopyTensorInfoARM-srcTensor-09690"></a> <span class="vuid">VUID-VkCopyTensorInfoARM-srcTensor-09690</span><br>

The <a href="chap12.html#resources-tensor-view-format-features">format features</a> of
<code>srcTensor</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_2_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyTensorInfoARM-srcTensor-09691" href="chap22.html#VUID-VkCopyTensorInfoARM-srcTensor-09691"></a> <span class="vuid">VUID-VkCopyTensorInfoARM-srcTensor-09691</span><br>

<code>srcTensor</code> <strong class="purple">must</strong> have been created with
<code>VK_TENSOR_USAGE_TRANSFER_SRC_BIT_ARM</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyTensorInfoARM-dstTensor-09692" href="chap22.html#VUID-VkCopyTensorInfoARM-dstTensor-09692"></a> <span class="vuid">VUID-VkCopyTensorInfoARM-dstTensor-09692</span><br>

The <a href="chap12.html#resources-tensor-view-format-features">format features</a> of
<code>dstTensor</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_2_TRANSFER_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyTensorInfoARM-dstTensor-09693" href="chap22.html#VUID-VkCopyTensorInfoARM-dstTensor-09693"></a> <span class="vuid">VUID-VkCopyTensorInfoARM-dstTensor-09693</span><br>

<code>dstTensor</code> <strong class="purple">must</strong> have been created with
<code>VK_TENSOR_USAGE_TRANSFER_DST_BIT_ARM</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyTensorInfoARM-srcTensor-09694" href="chap22.html#VUID-VkCopyTensorInfoARM-srcTensor-09694"></a> <span class="vuid">VUID-VkCopyTensorInfoARM-srcTensor-09694</span><br>

If <code>srcTensor</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a> object</p>
</li>
<li>
<p><a id="VUID-VkCopyTensorInfoARM-dstTensor-09695" href="chap22.html#VUID-VkCopyTensorInfoARM-dstTensor-09695"></a> <span class="vuid">VUID-VkCopyTensorInfoARM-dstTensor-09695</span><br>

If <code>dstTensor</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a> object</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyTensorInfoARM-sType-sType" href="chap22.html#VUID-VkCopyTensorInfoARM-sType-sType"></a> <span class="vuid">VUID-VkCopyTensorInfoARM-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_COPY_TENSOR_INFO_ARM</code></p>
</li>
<li>
<p><a id="VUID-VkCopyTensorInfoARM-pNext-pNext" href="chap22.html#VUID-VkCopyTensorInfoARM-pNext-pNext"></a> <span class="vuid">VUID-VkCopyTensorInfoARM-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyTensorInfoARM-srcTensor-parameter" href="chap22.html#VUID-VkCopyTensorInfoARM-srcTensor-parameter"></a> <span class="vuid">VUID-VkCopyTensorInfoARM-srcTensor-parameter</span><br>
 <code>srcTensor</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkTensorARM">VkTensorARM</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyTensorInfoARM-dstTensor-parameter" href="chap22.html#VUID-VkCopyTensorInfoARM-dstTensor-parameter"></a> <span class="vuid">VUID-VkCopyTensorInfoARM-dstTensor-parameter</span><br>
 <code>dstTensor</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkTensorARM">VkTensorARM</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyTensorInfoARM-pRegions-parameter" href="chap22.html#VUID-VkCopyTensorInfoARM-pRegions-parameter"></a> <span class="vuid">VUID-VkCopyTensorInfoARM-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap22.html#VkTensorCopyARM">VkTensorCopyARM</a> structures</p>
</li>
<li>
<p><a id="VUID-VkCopyTensorInfoARM-regionCount-arraylength" href="chap22.html#VUID-VkCopyTensorInfoARM-regionCount-arraylength"></a> <span class="vuid">VUID-VkCopyTensorInfoARM-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyTensorInfoARM-commonparent" href="chap22.html#VUID-VkCopyTensorInfoARM-commonparent"></a> <span class="vuid">VUID-VkCopyTensorInfoARM-commonparent</span><br>
 Both of <code>dstTensor</code>, and <code>srcTensor</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkTensorCopyARM</code> structure is defined as:</p>
</div>
<div id="VkTensorCopyARM" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_ARM_tensors</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkTensorCopyARM</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">dimensionCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint64_t</span><span class="o">*</span>    <span class="n">pSrcOffset</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint64_t</span><span class="o">*</span>    <span class="n">pDstOffset</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint64_t</span><span class="o">*</span>    <span class="n">pExtent</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkTensorCopyARM</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="chap3.html#VkStructureType">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>dimensionCount</code> is the number of elements in the <code>pSrcOffset</code>,
<code>pDstOffset</code> and <code>pExtent</code> arrays.</p>
</li>
<li>
<p><code>pSrcOffset</code> is <code>NULL</code> or an array of size <code>dimensionCount</code>
providing an offset into the source tensor.
When <code>pSrcOffset</code> is <code>NULL</code>, the offset into the source tensor is
<code>0</code> in all dimensions.</p>
</li>
<li>
<p><code>pDstOffset</code> is <code>NULL</code> or an array of size <code>dimensionCount</code>
providing an offset into the destination tensor.
When <code>pDstOffset</code> is <code>NULL</code>, the offset into the destination tensor
is <code>0</code> in all dimensions.</p>
</li>
<li>
<p><code>pExtent</code> is <code>NULL</code> or an array of size <code>dimensionCount</code>
providing the number of elements to copy in each dimension.
When <code>pExtent</code> is <code>NULL</code>, the number of elements to copy is taken as
the total number of elements in each dimension of the source tensor.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkTensorCopyARM-dimensionCount-09955" href="chap22.html#VUID-VkTensorCopyARM-dimensionCount-09955"></a> <span class="vuid">VUID-VkTensorCopyARM-dimensionCount-09955</span><br>

<code>dimensionCount</code> <strong class="purple">must</strong> be greater than 0 if <code>pSrcOffset</code>,
<code>pDstOffset</code>, or <code>pExtent</code> is not <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkTensorCopyARM-sType-sType" href="chap22.html#VUID-VkTensorCopyARM-sType-sType"></a> <span class="vuid">VUID-VkTensorCopyARM-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_TENSOR_COPY_ARM</code></p>
</li>
<li>
<p><a id="VUID-VkTensorCopyARM-pNext-pNext" href="chap22.html#VUID-VkTensorCopyARM-pNext-pNext"></a> <span class="vuid">VUID-VkTensorCopyARM-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkTensorCopyARM-pSrcOffset-parameter" href="chap22.html#VUID-VkTensorCopyARM-pSrcOffset-parameter"></a> <span class="vuid">VUID-VkTensorCopyARM-pSrcOffset-parameter</span><br>
 If <code>dimensionCount</code> is not <code>0</code>, and <code>pSrcOffset</code> is not <code>NULL</code>, <code>pSrcOffset</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>dimensionCount</code> <code>uint64_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkTensorCopyARM-pDstOffset-parameter" href="chap22.html#VUID-VkTensorCopyARM-pDstOffset-parameter"></a> <span class="vuid">VUID-VkTensorCopyARM-pDstOffset-parameter</span><br>
 If <code>dimensionCount</code> is not <code>0</code>, and <code>pDstOffset</code> is not <code>NULL</code>, <code>pDstOffset</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>dimensionCount</code> <code>uint64_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkTensorCopyARM-pExtent-parameter" href="chap22.html#VUID-VkTensorCopyARM-pExtent-parameter"></a> <span class="vuid">VUID-VkTensorCopyARM-pExtent-parameter</span><br>
 If <code>dimensionCount</code> is not <code>0</code>, and <code>pExtent</code> is not <code>NULL</code>, <code>pExtent</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>dimensionCount</code> <code>uint64_t</code> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div></div>
<nav>
  <a rel="prev" href="chap21.html" class="nav nav-prev" title="Previous page" aria-label="Previous page" aria-keyshortcuts="Left">
        <i class="fa fa-angle-left"></i>
     </a>
  <a rel="next" href="chap23.html" class="nav nav-next" title="Next page" aria-label="Next page" aria-keyshortcuts="Right">
        <i class="fa fa-angle-right"></i>
     </a>
  <div style="clear: both"></div>
</nav>




</body>
  <script>
  function isInViewport(ele) {
    const rect = ele.getBoundingClientRect();
    return (
        rect.top >= 0 &&
        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight)
    );
  }
  function yPosition (ele) {
    const rect = ele.getBoundingClientRect();
    return (rect.top - 20); // 20px above
  }
  let curr = document.getElementsByClassName('current');
  if (!isInViewport(curr[curr.length - 1])) {
    document.getElementById('toc').scrollTo({
      top: yPosition(curr[0]),
      left: 0,
      behavior: 'smooth'
    });
  }

  /* For page navigation */
  function gotoPage(selector) {
    const button = document.querySelector(selector);
    if (button)
      window.location.href = button.href;
  }
  document.addEventListener('keydown', e => {
    switch (e.key) {
      case 'ArrowRight':
        e.preventDefault();
        gotoPage('.nav-next');
        break;
      case 'ArrowLeft':
        e.preventDefault();
        gotoPage('.nav-prev');
        break;
    }
  });
  </script>
  </html>